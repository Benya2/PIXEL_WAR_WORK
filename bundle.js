const _0x2b752c=_0x2886;(function(_0x6bc103,_0x2cdf67){const _0x1a5f2e=_0x2886,_0xd6f8c7=_0x6bc103();while(!![]){try{const _0x39eee0=-parseInt(_0x1a5f2e(0x22e))/0x1*(parseInt(_0x1a5f2e(0x20a))/0x2)+-parseInt(_0x1a5f2e(0x1dc))/0x3+-parseInt(_0x1a5f2e(0x1ac))/0x4+-parseInt(_0x1a5f2e(0x1ce))/0x5+parseInt(_0x1a5f2e(0x21f))/0x6+parseInt(_0x1a5f2e(0x1df))/0x7+parseInt(_0x1a5f2e(0x201))/0x8;if(_0x39eee0===_0x2cdf67)break;else _0xd6f8c7['push'](_0xd6f8c7['shift']());}catch(_0x23db48){_0xd6f8c7['push'](_0xd6f8c7['shift']());}}}(_0x5f30,0x40577));import{initializeApp}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js';import{getFirestore,collection,doc,setDoc,onSnapshot,deleteDoc,getDocs}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js';import{getDatabase,ref,remove}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js';import{getAuth,onAuthStateChanged,signInWithEmailAndPassword,createUserWithEmailAndPassword,signOut}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-auth.js';const firebaseConfig={'apiKey':_0x2b752c(0x21c),'authDomain':'pixellox.firebaseapp.com','projectId':'pixellox','storageBucket':'pixellox.firebasestorage.app','messagingSenderId':_0x2b752c(0x238),'appId':_0x2b752c(0x1a8)},app=initializeApp(firebaseConfig),db=getFirestore(app),rtdb=getDatabase(app),auth=getAuth(app),coordsDisplayEl=document[_0x2b752c(0x23b)](_0x2b752c(0x1a1)),colorsChoiceEl=document[_0x2b752c(0x23b)]('colorsChoice'),paletteToggle=document[_0x2b752c(0x23b)](_0x2b752c(0x202)),game=document[_0x2b752c(0x23b)](_0x2b752c(0x1c7)),ctx=game[_0x2b752c(0x23f)]('2d'),cursor=document[_0x2b752c(0x23b)](_0x2b752c(0x232)),reloadTimerEl=document[_0x2b752c(0x23b)](_0x2b752c(0x20f)),adminPanel=document['getElementById'](_0x2b752c(0x1a5)),clearAllPixelsBtn=document[_0x2b752c(0x23b)](_0x2b752c(0x23c)),banUserBtn=document[_0x2b752c(0x23b)](_0x2b752c(0x203)),authButton=document['getElementById'](_0x2b752c(0x224)),coordsInput=document[_0x2b752c(0x23b)](_0x2b752c(0x1ea)),addPixelBtn=document['getElementById']('addPixelBtn'),removePixelBtn=document['getElementById'](_0x2b752c(0x1dd)),teleportInput=document[_0x2b752c(0x23b)](_0x2b752c(0x1c9)),teleportBtn=document[_0x2b752c(0x23b)](_0x2b752c(0x20e));teleportBtn['addEventListener'](_0x2b752c(0x1b0),()=>{const _0x1a824a=_0x2b752c;if(!auth[_0x1a824a(0x212)]||auth[_0x1a824a(0x212)][_0x1a824a(0x22c)]!==_0x1a824a(0x1c3))return alert('Только\x20админ!');const _0x141d1d=teleportInput[_0x1a824a(0x247)][_0x1a824a(0x1d8)]();if(!_0x141d1d)return;const [_0x5a61ad,_0x23a068]=_0x141d1d[_0x1a824a(0x1a4)](/\s+/),_0x48e168=parseInt(_0x5a61ad),_0x178b31=parseInt(_0x23a068);if(Number[_0x1a824a(0x1bf)](_0x48e168)||Number[_0x1a824a(0x1bf)](_0x178b31))return alert(_0x1a824a(0x217));const _0x2e1a12=_0x48e168*gridCellSize,_0x443695=_0x178b31*gridCellSize;camX=_0x2e1a12-game['width']/0x2/scale,camY=_0x443695-game['height']/0x2/scale,renderAll();}),ctx['imageSmoothingEnabled']=![];const gridCellSize=0xa;game[_0x2b752c(0x220)]=0x4b0,game[_0x2b752c(0x21a)]=0x258;let currentColor='#000000',canPlace=!![];const reloadTime=0x5,colors=[_0x2b752c(0x1d7),_0x2b752c(0x1a7),'rgb(228,\x20228,\x20228)',_0x2b752c(0x237),_0x2b752c(0x21b),'rgb(255,\x20248,\x20137)',_0x2b752c(0x1f1),_0x2b752c(0x223),'rgb(78,\x2078,\x2078)','rgb(148,\x20224,\x2068)','rgb(0,\x200,\x200)',_0x2b752c(0x215),_0x2b752c(0x1c0),_0x2b752c(0x225),_0x2b752c(0x22d),'rgb(0,\x20101,\x2019)',_0x2b752c(0x1ff),_0x2b752c(0x242),_0x2b752c(0x239),_0x2b752c(0x1f8),'rgb(229,\x200,\x200)','rgb(0,\x20131,\x20199)','rgb(154,\x200,\x200)',_0x2b752c(0x1a2),'rgb(254,\x20164,\x2096)',_0x2b752c(0x222),_0x2b752c(0x1b9),_0x2b752c(0x1ed),_0x2b752c(0x200),_0x2b752c(0x1e0)];colorsChoiceEl['innerHTML']='',colors[_0x2b752c(0x206)](_0x1490a3=>{const _0x47b7ad=_0x2b752c,_0x175c88=document[_0x47b7ad(0x1b3)](_0x47b7ad(0x1b1));_0x175c88[_0x47b7ad(0x1cd)][_0x47b7ad(0x1d9)]=_0x1490a3,_0x175c88[_0x47b7ad(0x1cf)](_0x47b7ad(0x1b0),()=>{const _0x5415f2=_0x47b7ad;currentColor=_0x1490a3,document[_0x5415f2(0x21d)](_0x5415f2(0x229))['forEach'](_0x418d00=>_0x418d00[_0x5415f2(0x1cc)][_0x5415f2(0x1af)](_0x5415f2(0x22f))),_0x175c88['classList'][_0x5415f2(0x241)](_0x5415f2(0x22f));}),colorsChoiceEl[_0x47b7ad(0x210)](_0x175c88);});const colorsChoice=document['getElementById'](_0x2b752c(0x1d0)),togglePalette=document[_0x2b752c(0x23b)](_0x2b752c(0x205));togglePalette[_0x2b752c(0x1cf)](_0x2b752c(0x1b0),()=>{const _0x2cfb23=_0x2b752c;colorsChoice[_0x2cfb23(0x1cd)][_0x2cfb23(0x1c4)]==='none'?colorsChoice[_0x2cfb23(0x1cd)]['display']=_0x2cfb23(0x1f5):colorsChoice[_0x2cfb23(0x1cd)][_0x2cfb23(0x1c4)]='none';});const worldMap=new Image();worldMap[_0x2b752c(0x234)]='world.png';const SCALE_TILE=0x32;let WORLD_W=0x4e20*SCALE_TILE,WORLD_H=0x4e20*SCALE_TILE,camX=0x0,camY=0x0,scale=0x1;const MIN_SCALE=0.005,MAX_SCALE=0x6;let isPanning=![],lastMouseX=0x0,lastMouseY=0x0;function clamp(_0x3d9721,_0x201325,_0x484f3c){const _0x374ca8=_0x2b752c;return Math[_0x374ca8(0x1d2)](_0x201325,Math[_0x374ca8(0x1c1)](_0x484f3c,_0x3d9721));}function screenToWorld(_0x2be164,_0x44b4fd){const _0x5bfca5=_0x2b752c,_0x410393=game[_0x5bfca5(0x1d6)](),_0x11b41c=(_0x2be164-_0x410393['left'])/scale+camX,_0x5783a7=(_0x44b4fd-_0x410393[_0x5bfca5(0x209)])/scale+camY;return[_0x11b41c,_0x5783a7];}function snapToGrid(_0x28ddf3,_0x5bd029){const _0x582a7b=_0x2b752c;return[Math[_0x582a7b(0x22b)](_0x28ddf3/gridCellSize)*gridCellSize,Math[_0x582a7b(0x22b)](_0x5bd029/gridCellSize)*gridCellSize];}let hoverCellX=0x0,hoverCellY=0x0;const pixelsCache=new Map();let markers=[];function updateCoordsDisplay(){const _0x3d30af=_0x2b752c;if(!coordsDisplayEl)return;const _0x9b8b10=Math['floor'](hoverCellX/gridCellSize),_0xac3ea3=Math['floor'](hoverCellY/gridCellSize);coordsDisplayEl[_0x3d30af(0x1f6)]='X:\x20'+_0x9b8b10+'\x20\x20Y:\x20'+_0xac3ea3;}const TILE_SIZE=0x3e8;let tiles=[];const offscreenCanvas=document[_0x2b752c(0x1b3)](_0x2b752c(0x1bb));offscreenCanvas[_0x2b752c(0x220)]=TILE_SIZE,offscreenCanvas[_0x2b752c(0x21a)]=TILE_SIZE;const offCtx=offscreenCanvas[_0x2b752c(0x23f)]('2d',{'willReadFrequently':!![]});offCtx[_0x2b752c(0x1e8)]=![],worldMap[_0x2b752c(0x213)]=()=>{const _0x2d1d53=_0x2b752c,_0x12a71b=worldMap['naturalWidth']||0x4e20,_0x116710=worldMap['naturalHeight']||0x4e20;WORLD_W=_0x12a71b*SCALE_TILE,WORLD_H=_0x116710*SCALE_TILE;const _0x3021a5=Math[_0x2d1d53(0x1eb)](_0x12a71b/TILE_SIZE),_0x4423bb=Math['ceil'](_0x116710/TILE_SIZE);tiles=[];for(let _0x3d66b7=0x0;_0x3d66b7<_0x3021a5;_0x3d66b7++){for(let _0x2c91a9=0x0;_0x2c91a9<_0x4423bb;_0x2c91a9++){const _0x236406=_0x3d66b7*TILE_SIZE,_0x2cf93a=_0x2c91a9*TILE_SIZE,_0x14e6c4=Math[_0x2d1d53(0x1c1)](TILE_SIZE,_0x12a71b-_0x236406),_0x10c522=Math[_0x2d1d53(0x1c1)](TILE_SIZE,_0x116710-_0x2cf93a);offCtx[_0x2d1d53(0x1ec)](0x0,0x0,TILE_SIZE,TILE_SIZE),offCtx['drawImage'](worldMap,_0x236406,_0x2cf93a,_0x14e6c4,_0x10c522,0x0,0x0,_0x14e6c4,_0x10c522);const _0x381fb0=new Image();_0x381fb0[_0x2d1d53(0x234)]=offscreenCanvas[_0x2d1d53(0x216)](_0x2d1d53(0x230));const _0x5d1631=_0x236406*SCALE_TILE,_0x18d724=_0x2cf93a*SCALE_TILE,_0x3cc379=_0x14e6c4*SCALE_TILE,_0x5711c9=_0x10c522*SCALE_TILE;tiles[_0x2d1d53(0x1f0)]({'img':_0x381fb0,'dx':_0x5d1631,'dy':_0x18d724,'dw':_0x3cc379,'dh':_0x5711c9});}}renderAll();};function renderAll(){const _0x4eb171=_0x2b752c;ctx[_0x4eb171(0x1e8)]=![],ctx[_0x4eb171(0x23d)](0x1,0x0,0x0,0x1,0x0,0x0),ctx[_0x4eb171(0x1ec)](0x0,0x0,game[_0x4eb171(0x220)],game[_0x4eb171(0x21a)]),ctx[_0x4eb171(0x23d)](scale,0x0,0x0,scale,-camX*scale,-camY*scale);const _0x44b419=camX,_0xd2eb06=camY,_0x441cb8=camX+game[_0x4eb171(0x220)]/scale,_0x223656=camY+game[_0x4eb171(0x21a)]/scale;for(const _0x344fce of tiles){if(_0x344fce['dx']+_0x344fce['dw']<_0x44b419||_0x344fce['dx']>_0x441cb8||_0x344fce['dy']+_0x344fce['dh']<_0xd2eb06||_0x344fce['dy']>_0x223656)continue;_0x344fce[_0x4eb171(0x1d3)][_0x4eb171(0x211)]&&_0x344fce[_0x4eb171(0x1d3)]['naturalWidth']?ctx[_0x4eb171(0x1db)](_0x344fce[_0x4eb171(0x1d3)],_0x344fce['dx'],_0x344fce['dy'],_0x344fce['dw'],_0x344fce['dh']):(ctx[_0x4eb171(0x20d)]='#eef6ff',ctx[_0x4eb171(0x1a6)](_0x344fce['dx'],_0x344fce['dy'],_0x344fce['dw'],_0x344fce['dh']));}ctx[_0x4eb171(0x1e5)](),ctx[_0x4eb171(0x235)]=_0x4eb171(0x1da);let _0xb3714a=Math[_0x4eb171(0x22b)](_0x44b419/gridCellSize)*gridCellSize;for(let _0xfa6140=_0xb3714a;_0xfa6140<=_0x441cb8;_0xfa6140+=gridCellSize){ctx[_0x4eb171(0x20c)](_0xfa6140,_0xd2eb06),ctx[_0x4eb171(0x1f7)](_0xfa6140,_0x223656);}let _0x55f007=Math[_0x4eb171(0x22b)](_0xd2eb06/gridCellSize)*gridCellSize;for(let _0x29f06c=_0x55f007;_0x29f06c<=_0x223656;_0x29f06c+=gridCellSize){ctx[_0x4eb171(0x20c)](_0x44b419,_0x29f06c),ctx[_0x4eb171(0x1f7)](_0x441cb8,_0x29f06c);}ctx[_0x4eb171(0x1d1)](),pixelsCache[_0x4eb171(0x206)](_0x4d8d59=>{const _0x4c80e1=_0x4eb171;_0x4d8d59[_0x4c80e1(0x1f4)]!==_0x4c80e1(0x22a)&&(ctx[_0x4c80e1(0x20d)]=_0x4d8d59['color'],ctx[_0x4c80e1(0x1a6)](_0x4d8d59['x'],_0x4d8d59['y'],gridCellSize,gridCellSize));}),ctx[_0x4eb171(0x20d)]=_0x4eb171(0x231);for(const [_0x4764fe,_0x3f9c46]of markers){ctx[_0x4eb171(0x1a6)](_0x4764fe,_0x3f9c46,gridCellSize,gridCellSize);}ctx[_0x4eb171(0x20d)]='rgba(0,0,0,0.12)',ctx[_0x4eb171(0x1a6)](hoverCellX,hoverCellY,gridCellSize,gridCellSize),ctx['setTransform'](0x1,0x0,0x0,0x1,0x0,0x0);}onSnapshot(collection(db,_0x2b752c(0x1bd)),_0x10d2ed=>{const _0x5bd68f=_0x2b752c;pixelsCache[_0x5bd68f(0x1fb)](),_0x10d2ed['forEach'](_0x42aa68=>{const _0x216c08=_0x5bd68f,_0x362fbe=_0x42aa68[_0x216c08(0x233)]();pixelsCache[_0x216c08(0x1e4)](_0x362fbe['x']+'-'+_0x362fbe['y'],_0x362fbe);}),renderAll();}),game[_0x2b752c(0x1cf)](_0x2b752c(0x1a3),_0x5ee112=>{const _0x563107=_0x2b752c;(_0x5ee112[_0x563107(0x244)]===0x1||_0x5ee112[_0x563107(0x244)]===0x2||_0x5ee112[_0x563107(0x1c6)]||_0x5ee112['ctrlKey']||_0x5ee112['metaKey']||_0x5ee112[_0x563107(0x1c2)])&&(isPanning=!![],lastMouseX=_0x5ee112[_0x563107(0x1e6)],lastMouseY=_0x5ee112[_0x563107(0x1b4)],_0x5ee112[_0x563107(0x1ee)]());}),window['addEventListener'](_0x2b752c(0x1be),()=>{isPanning=![];}),game[_0x2b752c(0x1cf)](_0x2b752c(0x208),_0x44f236=>_0x44f236[_0x2b752c(0x1ee)]()),game[_0x2b752c(0x1cf)](_0x2b752c(0x1e1),_0x2df7bc=>{const _0x4798f2=_0x2b752c;if(isPanning){const _0x2f25f9=_0x2df7bc[_0x4798f2(0x1e6)]-lastMouseX,_0x339913=_0x2df7bc['clientY']-lastMouseY;camX-=_0x2f25f9/scale,camY-=_0x339913/scale,lastMouseX=_0x2df7bc[_0x4798f2(0x1e6)],lastMouseY=_0x2df7bc[_0x4798f2(0x1b4)],renderAll();}const [_0xa84d80,_0x2657ea]=screenToWorld(_0x2df7bc[_0x4798f2(0x1e6)],_0x2df7bc[_0x4798f2(0x1b4)]);[hoverCellX,hoverCellY]=snapToGrid(_0xa84d80,_0x2657ea),updateCoordsDisplay(),renderAll();}),game['addEventListener'](_0x2b752c(0x1f9),_0xcf4e15=>{const _0x59cb50=_0x2b752c;_0xcf4e15[_0x59cb50(0x1ee)]();const _0x588312=1.1,[_0x496f77,_0x268b60]=screenToWorld(_0xcf4e15[_0x59cb50(0x1e6)],_0xcf4e15['clientY']),_0x579340=_0xcf4e15[_0x59cb50(0x1a9)]<0x0?0x1:-0x1,_0x4141f4=clamp(scale*(_0x579340>0x0?_0x588312:0x1/_0x588312),MIN_SCALE,MAX_SCALE);if(_0x4141f4===scale)return;scale=_0x4141f4;const _0x32a8af=game[_0x59cb50(0x1d6)]();camX=_0x496f77-(_0xcf4e15[_0x59cb50(0x1e6)]-_0x32a8af[_0x59cb50(0x1fa)])/scale,camY=_0x268b60-(_0xcf4e15['clientY']-_0x32a8af[_0x59cb50(0x209)])/scale;const [_0x5ec51a,_0x3ce3ca]=screenToWorld(_0xcf4e15['clientX'],_0xcf4e15[_0x59cb50(0x1b4)]);[hoverCellX,hoverCellY]=snapToGrid(_0x5ec51a,_0x3ce3ca),updateCoordsDisplay(),renderAll();},{'passive':![]});async function placePixelWithHover(){const _0x4de815=_0x2b752c;if(!auth[_0x4de815(0x212)])return alert(_0x4de815(0x1c5));if(!canPlace)return;canPlace=![];const _0x809d6b=hoverCellX,_0x50b692=hoverCellY,_0x422599=doc(db,_0x4de815(0x1bd),_0x809d6b+'-'+_0x50b692);try{if(currentColor==='#FFFFFF')await deleteDoc(_0x422599);else await setDoc(_0x422599,{'x':_0x809d6b,'y':_0x50b692,'color':currentColor});}catch(_0x50e569){console[_0x4de815(0x23a)](_0x50e569);}startReload();}game[_0x2b752c(0x1cf)](_0x2b752c(0x1b0),_0x176454=>{const _0xa3cb49=_0x2b752c;if(isPanning||_0x176454[_0xa3cb49(0x244)]!==0x0)return;placePixelWithHover();});if(cursor)cursor[_0x2b752c(0x1cd)][_0x2b752c(0x1c4)]=_0x2b752c(0x1d4);function startReload(){const _0x5b25aa=_0x2b752c;let _0x5b77db=reloadTime;reloadTimerEl['innerText']=_0x5b25aa(0x1b5)+_0x5b77db+_0x5b25aa(0x228);const _0x7b1a43=setInterval(()=>{const _0x281653=_0x5b25aa;_0x5b77db--;if(_0x5b77db<=0x0)clearInterval(_0x7b1a43),canPlace=!![],reloadTimerEl[_0x281653(0x1fe)]='Ready!';else reloadTimerEl['innerText']=_0x281653(0x1b5)+_0x5b77db+'\x20sec';},0x3e8);}authButton[_0x2b752c(0x1cf)](_0x2b752c(0x1b0),async()=>{const _0x301fe4=_0x2b752c;if(auth[_0x301fe4(0x212)]){await signOut(auth);return;}const _0x2ace07=prompt(_0x301fe4(0x1b8));if(!_0x2ace07||_0x2ace07!=='1'&&_0x2ace07!=='2')return;const _0xd4a1da=prompt('Email:'),_0x599a9a=prompt('Password:');if(!_0xd4a1da||!_0x599a9a)return;try{_0x2ace07==='1'?(await signInWithEmailAndPassword(auth,_0xd4a1da,_0x599a9a),alert(_0x301fe4(0x204))):(await createUserWithEmailAndPassword(auth,_0xd4a1da,_0x599a9a),alert(_0x301fe4(0x1e3)));}catch(_0x464f0a){alert(_0x464f0a[_0x301fe4(0x1bc)]);}}),onAuthStateChanged(auth,_0x76de77=>{const _0x171ae7=_0x2b752c;_0x76de77?(authButton[_0x171ae7(0x1f6)]=_0x171ae7(0x1a0),_0x76de77['email']===_0x171ae7(0x1c3)?adminPanel[_0x171ae7(0x1cd)][_0x171ae7(0x1c4)]=_0x171ae7(0x1e2):adminPanel['style'][_0x171ae7(0x1c4)]=_0x171ae7(0x1d4)):(authButton['textContent']=_0x171ae7(0x1d5),adminPanel['style'][_0x171ae7(0x1c4)]=_0x171ae7(0x1d4));});function parseCoords(){const _0x235b2e=_0x2b752c;markers=[];const _0x3d77f4=coordsInput[_0x235b2e(0x247)][_0x235b2e(0x1d8)]();if(!_0x3d77f4){renderAll();return;}_0x3d77f4[_0x235b2e(0x1a4)](',')[_0x235b2e(0x206)](_0x23c6ae=>{const _0xa901ba=_0x235b2e,[_0xd4b9d7,_0x49152e,_0x5ce32b,_0x384293]=_0x23c6ae[_0xa901ba(0x1d8)]()['split'](/\s+/),_0x2de9cc=parseInt(_0xd4b9d7),_0x233935=parseInt(_0x49152e),_0x2a4421=parseInt(_0x5ce32b||'1'),_0xffd4c4=parseInt(_0x384293||'1');if(Number[_0xa901ba(0x1bf)](_0x2de9cc)||Number[_0xa901ba(0x1bf)](_0x233935)||Number[_0xa901ba(0x1bf)](_0x2a4421)||Number[_0xa901ba(0x1bf)](_0xffd4c4))return;const _0x4bacc6=_0x2de9cc*gridCellSize,_0x3065cb=_0x233935*gridCellSize;for(let _0x2c28f1=0x0;_0x2c28f1<_0x2a4421;_0x2c28f1++){for(let _0x2dfc1d=0x0;_0x2dfc1d<_0xffd4c4;_0x2dfc1d++){const _0x18a0f3=_0x4bacc6+_0x2c28f1*gridCellSize,_0x4fba59=_0x3065cb+_0x2dfc1d*gridCellSize;_0x18a0f3>=0x0&&_0x4fba59>=0x0&&_0x18a0f3<=WORLD_W-gridCellSize&&_0x4fba59<=WORLD_H-gridCellSize&&markers['push']([_0x18a0f3,_0x4fba59]);}}}),renderAll();}const upBtn=document[_0x2b752c(0x23b)](_0x2b752c(0x1cb)),downBtn=document['getElementById'](_0x2b752c(0x246)),leftBtn=document['getElementById'](_0x2b752c(0x221)),rightBtn=document[_0x2b752c(0x23b)](_0x2b752c(0x1f2)),zoomInBtn=document[_0x2b752c(0x23b)](_0x2b752c(0x219)),zoomOutBtn=document[_0x2b752c(0x23b)](_0x2b752c(0x21e)),moveSpeed=0x32,zoomFactorBtn=1.2;function moveCamera(_0x5519ef,_0x499b9c){camX+=_0x5519ef/scale,camY+=_0x499b9c/scale,renderAll();}upBtn['addEventListener'](_0x2b752c(0x1b0),()=>moveCamera(0x0,-moveSpeed)),downBtn[_0x2b752c(0x1cf)](_0x2b752c(0x1b0),()=>moveCamera(0x0,moveSpeed)),leftBtn['addEventListener'](_0x2b752c(0x1b0),()=>moveCamera(-moveSpeed,0x0)),rightBtn[_0x2b752c(0x1cf)](_0x2b752c(0x1b0),()=>moveCamera(moveSpeed,0x0)),zoomInBtn[_0x2b752c(0x1cf)](_0x2b752c(0x1b0),()=>{const _0x382792=clamp(scale*zoomFactorBtn,MIN_SCALE,MAX_SCALE);scale=_0x382792,renderAll();}),zoomOutBtn[_0x2b752c(0x1cf)]('click',()=>{const _0x52951d=clamp(scale/zoomFactorBtn,MIN_SCALE,MAX_SCALE);scale=_0x52951d,renderAll();}),coordsInput[_0x2b752c(0x1cf)](_0x2b752c(0x207),parseCoords);async function adminApplyPixels(_0x1854dc){const _0x10aa95=_0x2b752c;if(!auth['currentUser']||auth[_0x10aa95(0x212)][_0x10aa95(0x22c)]!==_0x10aa95(0x1c3))return alert('Только\x20админ!');parseCoords();let _0xda7b7e=0x0;for(const [_0x5979f6,_0x34456a]of markers){const _0x192a0e=doc(db,_0x10aa95(0x1bd),_0x5979f6+'-'+_0x34456a);_0x1854dc===_0x10aa95(0x241)?(await setDoc(_0x192a0e,{'x':_0x5979f6,'y':_0x34456a,'color':currentColor}),_0xda7b7e++):(await deleteDoc(_0x192a0e),_0xda7b7e++);}alert((_0x1854dc==='add'?'Добавлено':_0x10aa95(0x1ef))+_0x10aa95(0x1fc)+_0xda7b7e);}addPixelBtn[_0x2b752c(0x1cf)](_0x2b752c(0x1b0),()=>adminApplyPixels(_0x2b752c(0x241))),removePixelBtn[_0x2b752c(0x1cf)](_0x2b752c(0x1b0),()=>adminApplyPixels(_0x2b752c(0x1af))),clearAllPixelsBtn[_0x2b752c(0x1cf)](_0x2b752c(0x1b0),async()=>{const _0x10a348=_0x2b752c;if(!auth[_0x10a348(0x212)])return alert(_0x10a348(0x1e7));const _0x4fd1f3=await getDocs(collection(db,_0x10a348(0x1bd)));_0x4fd1f3[_0x10a348(0x206)](_0x147bd2=>deleteDoc(_0x147bd2['ref']));}),banUserBtn[_0x2b752c(0x1cf)](_0x2b752c(0x1b0),()=>{const _0x46dc85=_0x2b752c;if(!auth['currentUser'])return alert(_0x46dc85(0x1e7));const _0x43e5ff=prompt(_0x46dc85(0x1ad));if(!_0x43e5ff)return;const _0x887143=ref(rtdb,'users/'+_0x43e5ff);remove(_0x887143)['then'](()=>alert('Пользователь\x20забанен!'))[_0x46dc85(0x1aa)](_0x9e500=>console[_0x46dc85(0x23a)](_0x9e500));});import{onDisconnect,set}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js';function trackOnlinePlayer(){const _0x337083=_0x2b752c;if(!auth[_0x337083(0x212)])return;const _0x49aa32=auth[_0x337083(0x212)]['uid'],_0x1729c9=ref(rtdb,_0x337083(0x236)+_0x49aa32);set(_0x1729c9,{'email':auth[_0x337083(0x212)][_0x337083(0x22c)],'lastSeen':Date[_0x337083(0x245)]()}),onDisconnect(_0x1729c9)[_0x337083(0x1af)]();}onAuthStateChanged(auth,_0x390231=>{_0x390231&&trackOnlinePlayer();});function updateOnlinePlayers(){const _0x4e0ad0=_0x2b752c,_0x4f52f5=ref(rtdb,_0x4e0ad0(0x236));onValue(_0x4f52f5,_0x4869aa=>{const _0x782d7a=_0x4e0ad0,_0x372791=_0x4869aa[_0x782d7a(0x1ba)](),_0x999eb4=_0x372791?Object[_0x782d7a(0x1ca)](_0x372791)[_0x782d7a(0x218)]:0x0;onlinePlayersEl[_0x782d7a(0x1fe)]=_0x782d7a(0x240)+_0x999eb4;});}updateOnlinePlayers();let lastTouchX=0x0,lastTouchY=0x0,isTouchPanning=![];game[_0x2b752c(0x1cf)]('touchstart',_0x5e2896=>{const _0x25b8e6=_0x2b752c;_0x5e2896['touches']['length']===0x1&&(isTouchPanning=!![],lastTouchX=_0x5e2896['touches'][0x0]['clientX'],lastTouchY=_0x5e2896[_0x25b8e6(0x226)][0x0]['clientY']);}),game[_0x2b752c(0x1cf)](_0x2b752c(0x1c8),_0x427b3d=>{const _0x474c01=_0x2b752c;if(isTouchPanning&&_0x427b3d[_0x474c01(0x226)][_0x474c01(0x218)]===0x1){const _0x3e9d58=_0x427b3d[_0x474c01(0x226)][0x0],_0xd8cd48=_0x3e9d58[_0x474c01(0x1e6)]-lastTouchX,_0x3bb01c=_0x3e9d58[_0x474c01(0x1b4)]-lastTouchY;camX-=_0xd8cd48/scale,camY-=_0x3bb01c/scale,lastTouchX=_0x3e9d58[_0x474c01(0x1e6)],lastTouchY=_0x3e9d58['clientY'],renderAll();}_0x427b3d['preventDefault']();},{'passive':![]}),game[_0x2b752c(0x1cf)]('touchend',_0x1858e6=>{isTouchPanning=![];});function _0x2886(_0x204f3a,_0x32dc24){const _0x5f3011=_0x5f30();return _0x2886=function(_0x288603,_0x393fbb){_0x288603=_0x288603-0x1a0;let _0x359558=_0x5f3011[_0x288603];return _0x359558;},_0x2886(_0x204f3a,_0x32dc24);}const overlay=document[_0x2b752c(0x23b)](_0x2b752c(0x1fd)),fileInput=document[_0x2b752c(0x23b)](_0x2b752c(0x1b2)),opacityRange=document[_0x2b752c(0x23b)](_0x2b752c(0x227)),coordX=document['getElementById'](_0x2b752c(0x23e)),coordY=document['getElementById']('coordY'),applyCoordsBtn=document['getElementById'](_0x2b752c(0x1de)),toggleBtn=document['getElementById'](_0x2b752c(0x214));let templateX=0x0,templateY=0x0,templateOpacity=0.5,templateVisible=!![];fileInput[_0x2b752c(0x1cf)]('change',_0x456718=>{const _0x6174a4=_0x2b752c,_0x2a7e0f=_0x456718[_0x6174a4(0x243)][_0x6174a4(0x1b6)][0x0];if(!_0x2a7e0f)return;const _0x5384b7=new FileReader();_0x5384b7['onload']=_0x2c11b9=>{const _0x34fee6=_0x6174a4;overlay[_0x34fee6(0x234)]=_0x2c11b9[_0x34fee6(0x243)]['result'],overlay['style'][_0x34fee6(0x1c4)]=_0x34fee6(0x1e2);},_0x5384b7[_0x6174a4(0x1e9)](_0x2a7e0f);}),opacityRange[_0x2b752c(0x1cf)]('input',()=>{const _0x58a494=_0x2b752c;templateOpacity=opacityRange[_0x58a494(0x247)],overlay[_0x58a494(0x1cd)][_0x58a494(0x20b)]=templateOpacity;}),applyCoordsBtn[_0x2b752c(0x1cf)](_0x2b752c(0x1b0),()=>{const _0x4b4982=_0x2b752c;templateX=parseInt(coordX[_0x4b4982(0x247)])||0x0,templateY=parseInt(coordY[_0x4b4982(0x247)])||0x0,updateTemplatePosition();}),toggleBtn[_0x2b752c(0x1cf)](_0x2b752c(0x1b0),()=>{const _0x458ccc=_0x2b752c;templateVisible=!templateVisible,overlay[_0x458ccc(0x1cd)][_0x458ccc(0x1c4)]=templateVisible?_0x458ccc(0x1e2):_0x458ccc(0x1d4);});function _0x5f30(){const _0x58057e=['rgb(196,\x20196,\x20196)','AIzaSyCwy4jVn9JIwXuIXVycYAv9EdPGPkgIJvA','querySelectorAll','zoomOutBtn','1692294znhGGz','width','leftBtn','rgb(25,\x2025,\x20115)','rgb(229,\x20217,\x200)','authButton','rgb(104,\x20131,\x2056)','touches','opacityRange','\x20sec','#colorsChoice\x20div','#FFFFFF','floor','email','rgb(255,\x20167,\x20209)','43346xXioWQ','selected','image/png','rgba(255,0,0,0.5)','cursor','data','src','strokeStyle','users/','rgb(245,\x20223,\x20176)','461991610382','rgb(255,\x20101,\x20101)','error','getElementById','clearAllPixels','setTransform','coordX','getContext','Online\x20players:\x20','add','rgb(202,\x20227,\x20255)','target','button','now','downBtn','value','Log\x20Out','coordsDisplay','rgb(0,\x200,\x20234)','mousedown','split','adminPanel','fillRect','rgb(96,\x2064,\x2040)','1:461991610382:web:2a5ae293dde4a754c2d45f','deltaY','catch','transformOrigin','1369356CLryjV','Введите\x20UserID\x20для\x20бана:','px,\x20','remove','click','div','templateFile','createElement','clientY','Reload:\x20','files','translate(','Enter\x201\x20to\x20sign\x20in,\x20or\x202\x20to\x20create\x20a\x20new\x20account:','rgb(229,\x20149,\x200)','val','canvas','message','pixels','mouseup','isNaN','rgb(244,\x20179,\x20174)','min','altKey','logo100153@gmail.com','display','Login\x20to\x20draw!','shiftKey','game','touchmove','teleportInput','keys','upBtn','classList','style','1538915JVMeJS','addEventListener','colorsChoice','stroke','max','img','none','Log\x20In','getBoundingClientRect','rgb(255,\x20255,\x20255)','trim','backgroundColor','#ccc','drawImage','1237458CyDwyh','removePixelBtn','applyCoords','3598945blRsIf','rgb(130,\x200,\x20128)','mousemove','block','Account\x20created!','set','beginPath','clientX','Только\x20админ!','imageSmoothingEnabled','readAsDataURL','coordsInput','ceil','clearRect','rgb(207,\x20110,\x20228)','preventDefault','Удалено','push','rgb(136,\x20136,\x20136)','rightBtn','transform','color','grid','textContent','lineTo','rgb(0,\x20211,\x20221)','wheel','left','clear','\x20пикселей:\x20','overlayTemplate','innerText','rgb(255,\x2084,\x20178)','rgb(160,\x20106,\x2066)','7013880lcXhlz','paletteToggle','banUser','Come\x20in!','togglePalette','forEach','input','contextmenu','top','16pYFsfQ','opacity','moveTo','fillStyle','teleportBtn','reloadTimer','appendChild','complete','currentUser','onload','toggleBtn','rgb(2,\x20190,\x201)','toDataURL','Введите\x20корректные\x20координаты\x20X\x20Y','length','zoomInBtn','height'];_0x5f30=function(){return _0x58057e;};return _0x5f30();}function updateTemplatePosition(){const _0x4a673b=_0x2b752c;overlay[_0x4a673b(0x1cd)][_0x4a673b(0x1f3)]=_0x4a673b(0x1b7)+(-camX*scale+templateX)+_0x4a673b(0x1ae)+(-camY*scale+templateY)+'px)\x20scale('+scale+')',overlay[_0x4a673b(0x1cd)][_0x4a673b(0x1ab)]='top\x20left';}const oldRenderAll=renderAll;renderAll=function(){const _0x2db7f8=_0x2b752c;oldRenderAll();if(overlay[_0x2db7f8(0x234)])updateTemplatePosition();};
