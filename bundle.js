const _0x3ef637=_0x3081;(function(_0x269f66,_0x850480){const _0x26bd31=_0x3081,_0x35a8f7=_0x269f66();while(!![]){try{const _0x5e230e=parseInt(_0x26bd31(0x1be))/0x1+-parseInt(_0x26bd31(0x1fc))/0x2+-parseInt(_0x26bd31(0x1a2))/0x3+-parseInt(_0x26bd31(0x18d))/0x4*(parseInt(_0x26bd31(0x1ee))/0x5)+parseInt(_0x26bd31(0x1d8))/0x6+-parseInt(_0x26bd31(0x1e6))/0x7+-parseInt(_0x26bd31(0x184))/0x8*(-parseInt(_0x26bd31(0x1bb))/0x9);if(_0x5e230e===_0x850480)break;else _0x35a8f7['push'](_0x35a8f7['shift']());}catch(_0x5f2f8c){_0x35a8f7['push'](_0x35a8f7['shift']());}}}(_0x442c,0x5ba89));import{initializeApp}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js';import{getFirestore,collection,doc,setDoc,onSnapshot,deleteDoc,getDocs}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js';import{getDatabase,ref,remove}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js';import{getAuth,onAuthStateChanged,signInWithEmailAndPassword,createUserWithEmailAndPassword,signOut}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-auth.js';const firebaseConfig={'apiKey':'AIzaSyCwy4jVn9JIwXuIXVycYAv9EdPGPkgIJvA','authDomain':_0x3ef637(0x1a3),'projectId':_0x3ef637(0x169),'storageBucket':_0x3ef637(0x1b6),'messagingSenderId':_0x3ef637(0x17f),'appId':_0x3ef637(0x189)},app=initializeApp(firebaseConfig),db=getFirestore(app),rtdb=getDatabase(app),auth=getAuth(app),coordsDisplayEl=document[_0x3ef637(0x1af)]('coordsDisplay'),colorsChoiceEl=document[_0x3ef637(0x1af)](_0x3ef637(0x1f1)),paletteToggle=document[_0x3ef637(0x1af)](_0x3ef637(0x19d)),game=document[_0x3ef637(0x1af)](_0x3ef637(0x178)),ctx=game['getContext']('2d'),cursor=document[_0x3ef637(0x1af)](_0x3ef637(0x19e)),reloadTimerEl=document[_0x3ef637(0x1af)](_0x3ef637(0x1e3)),adminPanel=document['getElementById'](_0x3ef637(0x17d)),clearAllPixelsBtn=document[_0x3ef637(0x1af)]('clearAllPixels'),banUserBtn=document[_0x3ef637(0x1af)](_0x3ef637(0x19a)),authButton=document[_0x3ef637(0x1af)]('authButton'),coordsInput=document[_0x3ef637(0x1af)]('coordsInput'),addPixelBtn=document['getElementById']('addPixelBtn'),removePixelBtn=document['getElementById'](_0x3ef637(0x1e2)),teleportInput=document[_0x3ef637(0x1af)](_0x3ef637(0x1e9)),teleportBtn=document['getElementById']('teleportBtn');teleportBtn['addEventListener'](_0x3ef637(0x195),()=>{const _0x1a86db=_0x3ef637;if(!auth['currentUser']||auth['currentUser'][_0x1a86db(0x1c9)]!=='logo100153@gmail.com')return alert(_0x1a86db(0x1f7));const _0x22f75b=teleportInput[_0x1a86db(0x188)]['trim']();if(!_0x22f75b)return;const [_0x4177dd,_0x40f38f]=_0x22f75b['split'](/\s+/),_0x3d0544=parseInt(_0x4177dd),_0x1b7752=parseInt(_0x40f38f);if(Number[_0x1a86db(0x1ea)](_0x3d0544)||Number[_0x1a86db(0x1ea)](_0x1b7752))return alert(_0x1a86db(0x174));const _0x220d72=_0x3d0544*gridCellSize,_0x3de862=_0x1b7752*gridCellSize;camX=_0x220d72-game[_0x1a86db(0x1d2)]/0x2/scale,camY=_0x3de862-game[_0x1a86db(0x1f2)]/0x2/scale,renderAll();}),ctx['imageSmoothingEnabled']=![];const gridCellSize=0xa;game[_0x3ef637(0x1d2)]=0x4b0,game[_0x3ef637(0x1f2)]=0x258;let currentColor=_0x3ef637(0x183),canPlace=!![];const reloadTime=0x5,colors=[_0x3ef637(0x1c8),_0x3ef637(0x1f8),_0x3ef637(0x17c),'rgb(245,\x20223,\x20176)',_0x3ef637(0x1c1),'rgb(255,\x20248,\x20137)',_0x3ef637(0x1e5),'rgb(229,\x20217,\x200)',_0x3ef637(0x1fe),_0x3ef637(0x1c6),_0x3ef637(0x1a5),_0x3ef637(0x1dd),'rgb(244,\x20179,\x20174)',_0x3ef637(0x172),_0x3ef637(0x162),_0x3ef637(0x175),'rgb(255,\x2084,\x20178)','rgb(202,\x20227,\x20255)','rgb(255,\x20101,\x20101)',_0x3ef637(0x16a),_0x3ef637(0x171),'rgb(0,\x20131,\x20199)',_0x3ef637(0x181),_0x3ef637(0x19f),_0x3ef637(0x1d7),'rgb(25,\x2025,\x20115)','rgb(229,\x20149,\x200)',_0x3ef637(0x1f4),'rgb(160,\x20106,\x2066)','rgb(130,\x200,\x20128)'];colorsChoiceEl[_0x3ef637(0x192)]='',colors[_0x3ef637(0x163)](_0x35b684=>{const _0x4f4ade=_0x3ef637,_0x59753a=document['createElement'](_0x4f4ade(0x1e1));_0x59753a[_0x4f4ade(0x176)][_0x4f4ade(0x16e)]=_0x35b684,_0x59753a[_0x4f4ade(0x1d6)](_0x4f4ade(0x195),()=>{const _0x5f16e9=_0x4f4ade;currentColor=_0x35b684,document[_0x5f16e9(0x17e)]('#colorsChoice\x20div')[_0x5f16e9(0x163)](_0x5cb598=>_0x5cb598['classList'][_0x5f16e9(0x199)](_0x5f16e9(0x1e4))),_0x59753a[_0x5f16e9(0x1e0)][_0x5f16e9(0x1b1)](_0x5f16e9(0x1e4));}),colorsChoiceEl[_0x4f4ade(0x1bf)](_0x59753a);});const colorsChoice=document[_0x3ef637(0x1af)](_0x3ef637(0x1f1)),togglePalette=document[_0x3ef637(0x1af)]('togglePalette');togglePalette[_0x3ef637(0x1d6)](_0x3ef637(0x195),()=>{const _0x57ee82=_0x3ef637;colorsChoice[_0x57ee82(0x176)][_0x57ee82(0x1ed)]==='none'?colorsChoice[_0x57ee82(0x176)]['display']=_0x57ee82(0x1b9):colorsChoice[_0x57ee82(0x176)][_0x57ee82(0x1ed)]=_0x57ee82(0x1ba);});const worldMap=new Image();worldMap[_0x3ef637(0x1ad)]=_0x3ef637(0x17b);const SCALE_TILE=0x3c;let WORLD_W=0x4e20*SCALE_TILE,WORLD_H=0x4e20*SCALE_TILE,camX=0x0,camY=0x0,scale=0x1;const MIN_SCALE=0.005,MAX_SCALE=0x6;let isPanning=![],lastMouseX=0x0,lastMouseY=0x0;function clamp(_0x3d7286,_0x5746f8,_0x2cadb0){const _0x476aeb=_0x3ef637;return Math['max'](_0x5746f8,Math[_0x476aeb(0x161)](_0x2cadb0,_0x3d7286));}function screenToWorld(_0xb315dd,_0x26dd0e){const _0x348e39=_0x3ef637,_0x1eda96=game['getBoundingClientRect'](),_0x36ff6b=(_0xb315dd-_0x1eda96['left'])/scale+camX,_0x5ae991=(_0x26dd0e-_0x1eda96[_0x348e39(0x1b8)])/scale+camY;return[_0x36ff6b,_0x5ae991];}function snapToGrid(_0x10705f,_0x4efe8e){const _0x187207=_0x3ef637;return[Math['floor'](_0x10705f/gridCellSize)*gridCellSize,Math[_0x187207(0x1db)](_0x4efe8e/gridCellSize)*gridCellSize];}let hoverCellX=0x0,hoverCellY=0x0;const pixelsCache=new Map();let markers=[];function updateCoordsDisplay(){const _0xff4cef=_0x3ef637;if(!coordsDisplayEl)return;const _0x2db9c2=Math['floor'](hoverCellX/gridCellSize),_0x50f774=Math[_0xff4cef(0x1db)](hoverCellY/gridCellSize);coordsDisplayEl[_0xff4cef(0x1a8)]=_0xff4cef(0x1d3)+_0x2db9c2+_0xff4cef(0x1b2)+_0x50f774;}const TILE_SIZE=0x3e8;let tiles=[];const offscreenCanvas=document[_0x3ef637(0x1f5)]('canvas');offscreenCanvas[_0x3ef637(0x1d2)]=TILE_SIZE,offscreenCanvas[_0x3ef637(0x1f2)]=TILE_SIZE;const offCtx=offscreenCanvas[_0x3ef637(0x1ce)]('2d',{'willReadFrequently':!![]});offCtx['imageSmoothingEnabled']=![],worldMap['onload']=()=>{const _0x366062=_0x3ef637,_0x4c9584=worldMap[_0x366062(0x19c)]||0x4e20,_0x2131f8=worldMap[_0x366062(0x197)]||0x4e20;WORLD_W=_0x4c9584*SCALE_TILE,WORLD_H=_0x2131f8*SCALE_TILE;const _0x411e48=Math[_0x366062(0x1fb)](_0x4c9584/TILE_SIZE),_0x23ffb9=Math[_0x366062(0x1fb)](_0x2131f8/TILE_SIZE);tiles=[];for(let _0x423bb4=0x0;_0x423bb4<_0x411e48;_0x423bb4++){for(let _0x155a21=0x0;_0x155a21<_0x23ffb9;_0x155a21++){const _0x3dd056=_0x423bb4*TILE_SIZE,_0x2a1771=_0x155a21*TILE_SIZE,_0x4d670a=Math['min'](TILE_SIZE,_0x4c9584-_0x3dd056),_0x1b00e3=Math[_0x366062(0x161)](TILE_SIZE,_0x2131f8-_0x2a1771);offCtx[_0x366062(0x1c3)](0x0,0x0,TILE_SIZE,TILE_SIZE),offCtx[_0x366062(0x200)](worldMap,_0x3dd056,_0x2a1771,_0x4d670a,_0x1b00e3,0x0,0x0,_0x4d670a,_0x1b00e3);const _0x3a8047=new Image();_0x3a8047[_0x366062(0x1ad)]=offscreenCanvas[_0x366062(0x1ec)](_0x366062(0x170));const _0x56b0bd=_0x3dd056*SCALE_TILE,_0x388e40=_0x2a1771*SCALE_TILE,_0xd84af1=_0x4d670a*SCALE_TILE,_0x543076=_0x1b00e3*SCALE_TILE;tiles['push']({'img':_0x3a8047,'dx':_0x56b0bd,'dy':_0x388e40,'dw':_0xd84af1,'dh':_0x543076});}}renderAll();};function renderAll(){const _0x4a2362=_0x3ef637;ctx['imageSmoothingEnabled']=![],ctx[_0x4a2362(0x17a)](0x1,0x0,0x0,0x1,0x0,0x0),ctx[_0x4a2362(0x1c3)](0x0,0x0,game['width'],game[_0x4a2362(0x1f2)]),ctx[_0x4a2362(0x17a)](scale,0x0,0x0,scale,-camX*scale,-camY*scale);const _0x324c97=camX,_0x149fbd=camY,_0x15ca1e=camX+game[_0x4a2362(0x1d2)]/scale,_0x3b6b2f=camY+game[_0x4a2362(0x1f2)]/scale;for(const _0x215b4c of tiles){if(_0x215b4c['dx']+_0x215b4c['dw']<_0x324c97||_0x215b4c['dx']>_0x15ca1e||_0x215b4c['dy']+_0x215b4c['dh']<_0x149fbd||_0x215b4c['dy']>_0x3b6b2f)continue;_0x215b4c[_0x4a2362(0x1d5)][_0x4a2362(0x1f3)]&&_0x215b4c['img'][_0x4a2362(0x19c)]?ctx['drawImage'](_0x215b4c[_0x4a2362(0x1d5)],_0x215b4c['dx'],_0x215b4c['dy'],_0x215b4c['dw'],_0x215b4c['dh']):(ctx[_0x4a2362(0x1ca)]=_0x4a2362(0x187),ctx[_0x4a2362(0x1a7)](_0x215b4c['dx'],_0x215b4c['dy'],_0x215b4c['dw'],_0x215b4c['dh']));}ctx[_0x4a2362(0x173)](),ctx['strokeStyle']=_0x4a2362(0x1a0);let _0x3c9d59=Math[_0x4a2362(0x1db)](_0x324c97/gridCellSize)*gridCellSize;for(let _0x196343=_0x3c9d59;_0x196343<=_0x15ca1e;_0x196343+=gridCellSize){ctx[_0x4a2362(0x160)](_0x196343,_0x149fbd),ctx['lineTo'](_0x196343,_0x3b6b2f);}let _0x2ffd72=Math[_0x4a2362(0x1db)](_0x149fbd/gridCellSize)*gridCellSize;for(let _0x1e23c9=_0x2ffd72;_0x1e23c9<=_0x3b6b2f;_0x1e23c9+=gridCellSize){ctx['moveTo'](_0x324c97,_0x1e23c9),ctx[_0x4a2362(0x1a4)](_0x15ca1e,_0x1e23c9);}ctx[_0x4a2362(0x1ff)](),pixelsCache[_0x4a2362(0x163)](_0xfd7fb0=>{const _0x4af965=_0x4a2362;_0xfd7fb0['color']!==_0x4af965(0x165)&&(ctx[_0x4af965(0x1ca)]=_0xfd7fb0[_0x4af965(0x1c5)],ctx[_0x4af965(0x1a7)](_0xfd7fb0['x'],_0xfd7fb0['y'],gridCellSize,gridCellSize));}),ctx['fillStyle']=_0x4a2362(0x164);for(const [_0x396c6e,_0x47bd16]of markers){ctx[_0x4a2362(0x1a7)](_0x396c6e,_0x47bd16,gridCellSize,gridCellSize);}ctx[_0x4a2362(0x1ca)]=_0x4a2362(0x198),ctx[_0x4a2362(0x1a7)](hoverCellX,hoverCellY,gridCellSize,gridCellSize),ctx['setTransform'](0x1,0x0,0x0,0x1,0x0,0x0);}onSnapshot(collection(db,_0x3ef637(0x1d1)),_0x36b945=>{const _0x50a039=_0x3ef637;pixelsCache[_0x50a039(0x18f)](),_0x36b945[_0x50a039(0x163)](_0x39c023=>{const _0x1241c8=_0x50a039,_0xe26d0f=_0x39c023[_0x1241c8(0x1cb)]();pixelsCache[_0x1241c8(0x1a9)](_0xe26d0f['x']+'-'+_0xe26d0f['y'],_0xe26d0f);}),renderAll();}),game[_0x3ef637(0x1d6)](_0x3ef637(0x168),_0x18277b=>{const _0x2cad77=_0x3ef637;(_0x18277b[_0x2cad77(0x1b7)]===0x1||_0x18277b[_0x2cad77(0x1b7)]===0x2||_0x18277b['shiftKey']||_0x18277b['ctrlKey']||_0x18277b[_0x2cad77(0x196)]||_0x18277b[_0x2cad77(0x1ae)])&&(isPanning=!![],lastMouseX=_0x18277b['clientX'],lastMouseY=_0x18277b[_0x2cad77(0x1dc)],_0x18277b[_0x2cad77(0x166)]());}),window[_0x3ef637(0x1d6)](_0x3ef637(0x1c4),()=>{isPanning=![];}),game['addEventListener'](_0x3ef637(0x185),_0x39bf9c=>_0x39bf9c['preventDefault']()),game['addEventListener']('mousemove',_0x13aaba=>{const _0x29ca5c=_0x3ef637;if(isPanning){const _0x567cc3=_0x13aaba[_0x29ca5c(0x179)]-lastMouseX,_0x4a226a=_0x13aaba[_0x29ca5c(0x1dc)]-lastMouseY;camX-=_0x567cc3/scale,camY-=_0x4a226a/scale,lastMouseX=_0x13aaba[_0x29ca5c(0x179)],lastMouseY=_0x13aaba[_0x29ca5c(0x1dc)],renderAll();}const [_0xd99596,_0x559744]=screenToWorld(_0x13aaba[_0x29ca5c(0x179)],_0x13aaba[_0x29ca5c(0x1dc)]);[hoverCellX,hoverCellY]=snapToGrid(_0xd99596,_0x559744),updateCoordsDisplay(),renderAll();}),game[_0x3ef637(0x1d6)](_0x3ef637(0x1b0),_0x35ad9a=>{const _0x20e797=_0x3ef637;_0x35ad9a[_0x20e797(0x166)]();const _0x13d989=1.1,[_0x3f778a,_0x4b00ce]=screenToWorld(_0x35ad9a[_0x20e797(0x179)],_0x35ad9a[_0x20e797(0x1dc)]),_0x24c00d=_0x35ad9a['deltaY']<0x0?0x1:-0x1,_0x4ae3df=clamp(scale*(_0x24c00d>0x0?_0x13d989:0x1/_0x13d989),MIN_SCALE,MAX_SCALE);if(_0x4ae3df===scale)return;scale=_0x4ae3df;const _0x532323=game[_0x20e797(0x201)]();camX=_0x3f778a-(_0x35ad9a[_0x20e797(0x179)]-_0x532323[_0x20e797(0x18e)])/scale,camY=_0x4b00ce-(_0x35ad9a['clientY']-_0x532323['top'])/scale;const [_0x33ff5a,_0x2bd72f]=screenToWorld(_0x35ad9a[_0x20e797(0x179)],_0x35ad9a[_0x20e797(0x1dc)]);[hoverCellX,hoverCellY]=snapToGrid(_0x33ff5a,_0x2bd72f),updateCoordsDisplay(),renderAll();},{'passive':![]});async function placePixelWithHover(){const _0xaec2f0=_0x3ef637;if(!auth[_0xaec2f0(0x1df)])return alert(_0xaec2f0(0x1e7));if(!canPlace)return;canPlace=![];const _0x2e304a=hoverCellX,_0x1e954d=hoverCellY,_0x211b31=doc(db,_0xaec2f0(0x1d1),_0x2e304a+'-'+_0x1e954d);try{if(currentColor==='#FFFFFF')await deleteDoc(_0x211b31);else await setDoc(_0x211b31,{'x':_0x2e304a,'y':_0x1e954d,'color':currentColor});}catch(_0x3b0733){console[_0xaec2f0(0x16c)](_0x3b0733);}startReload();}game['addEventListener']('click',_0x50f716=>{if(isPanning||_0x50f716['button']!==0x0)return;placePixelWithHover();});if(cursor)cursor[_0x3ef637(0x176)][_0x3ef637(0x1ed)]='none';function startReload(){let _0x4cab1d=reloadTime;reloadTimerEl['innerText']='Reload:\x20'+_0x4cab1d+'\x20sec';const _0x28e186=setInterval(()=>{const _0x5e2c0b=_0x3081;_0x4cab1d--;if(_0x4cab1d<=0x0)clearInterval(_0x28e186),canPlace=!![],reloadTimerEl[_0x5e2c0b(0x1a6)]=_0x5e2c0b(0x1f0);else reloadTimerEl[_0x5e2c0b(0x1a6)]=_0x5e2c0b(0x18a)+_0x4cab1d+_0x5e2c0b(0x1cc);},0x3e8);}authButton[_0x3ef637(0x1d6)](_0x3ef637(0x195),async()=>{const _0xcf8870=_0x3ef637;if(auth[_0xcf8870(0x1df)]){await signOut(auth);return;}const _0x2fb613=prompt(_0xcf8870(0x1f6));if(!_0x2fb613||_0x2fb613!=='1'&&_0x2fb613!=='2')return;const _0x5af9a6=prompt(_0xcf8870(0x1a1)),_0x5df0d6=prompt(_0xcf8870(0x1b4));if(!_0x5af9a6||!_0x5df0d6)return;try{_0x2fb613==='1'?(await signInWithEmailAndPassword(auth,_0x5af9a6,_0x5df0d6),alert(_0xcf8870(0x1fd))):(await createUserWithEmailAndPassword(auth,_0x5af9a6,_0x5df0d6),alert(_0xcf8870(0x1d0)));}catch(_0x441a81){alert(_0x441a81['message']);}}),onAuthStateChanged(auth,_0x101ed8=>{const _0x1b872a=_0x3ef637;_0x101ed8?(authButton['textContent']='Log\x20Out',_0x101ed8[_0x1b872a(0x1c9)]===_0x1b872a(0x1fa)?adminPanel[_0x1b872a(0x176)][_0x1b872a(0x1ed)]=_0x1b872a(0x1b5):adminPanel[_0x1b872a(0x176)][_0x1b872a(0x1ed)]=_0x1b872a(0x1ba)):(authButton[_0x1b872a(0x1a8)]=_0x1b872a(0x182),adminPanel[_0x1b872a(0x176)]['display']='none');});function parseCoords(){const _0x42413d=_0x3ef637;markers=[];const _0x5998d9=coordsInput['value'][_0x42413d(0x194)]();if(!_0x5998d9){renderAll();return;}_0x5998d9[_0x42413d(0x1e8)](',')[_0x42413d(0x163)](_0x270cc8=>{const _0x47bcb4=_0x42413d,[_0x18fadb,_0x945f94,_0x5afc1b,_0x51747d]=_0x270cc8[_0x47bcb4(0x194)]()['split'](/\s+/),_0x205446=parseInt(_0x18fadb),_0x5a75ca=parseInt(_0x945f94),_0x377892=parseInt(_0x5afc1b||'1'),_0x5a685e=parseInt(_0x51747d||'1');if(Number[_0x47bcb4(0x1ea)](_0x205446)||Number[_0x47bcb4(0x1ea)](_0x5a75ca)||Number['isNaN'](_0x377892)||Number[_0x47bcb4(0x1ea)](_0x5a685e))return;const _0x51c66b=_0x205446*gridCellSize,_0x32afdb=_0x5a75ca*gridCellSize;for(let _0x2d7548=0x0;_0x2d7548<_0x377892;_0x2d7548++){for(let _0x2754fc=0x0;_0x2754fc<_0x5a685e;_0x2754fc++){const _0x2eb04a=_0x51c66b+_0x2d7548*gridCellSize,_0x582f44=_0x32afdb+_0x2754fc*gridCellSize;_0x2eb04a>=0x0&&_0x582f44>=0x0&&_0x2eb04a<=WORLD_W-gridCellSize&&_0x582f44<=WORLD_H-gridCellSize&&markers[_0x47bcb4(0x1b3)]([_0x2eb04a,_0x582f44]);}}}),renderAll();}const upBtn=document[_0x3ef637(0x1af)](_0x3ef637(0x1da)),downBtn=document[_0x3ef637(0x1af)]('downBtn'),leftBtn=document[_0x3ef637(0x1af)](_0x3ef637(0x1d4)),rightBtn=document[_0x3ef637(0x1af)](_0x3ef637(0x1cf)),zoomInBtn=document[_0x3ef637(0x1af)]('zoomInBtn'),zoomOutBtn=document[_0x3ef637(0x1af)](_0x3ef637(0x167)),moveSpeed=0x32,zoomFactorBtn=1.2;function moveCamera(_0x2d1204,_0x59a7a1){camX+=_0x2d1204/scale,camY+=_0x59a7a1/scale,renderAll();}function _0x442c(){const _0x4bf757=['wheel','add','\x20\x20Y:\x20','push','Password:','block','pixellox.firebasestorage.app','button','top','grid','none','171FhCAQT','Добавлено','length','542005NmFKNB','appendChild','target','rgb(196,\x20196,\x20196)','catch','clearRect','mouseup','color','rgb(148,\x20224,\x2068)','transform','rgb(255,\x20255,\x20255)','email','fillStyle','data','\x20sec','users/','getContext','rightBtn','Account\x20created!','pixels','width','X:\x20','leftBtn','img','addEventListener','rgb(254,\x20164,\x2096)','1401504YDXQgJ','Удалено','upBtn','floor','clientY','rgb(2,\x20190,\x201)','coordX','currentUser','classList','div','removePixelBtn','reloadTimer','selected','rgb(136,\x20136,\x20136)','567581eIySHS','Login\x20to\x20draw!','split','teleportInput','isNaN','files','toDataURL','display','2515TqIyod','overlayTemplate','Ready!','colorsChoice','height','complete','rgb(207,\x20110,\x20228)','createElement','Enter\x201\x20to\x20sign\x20in,\x20or\x202\x20to\x20create\x20a\x20new\x20account:','Только\x20админ!','rgb(96,\x2064,\x2040)','ref','logo100153@gmail.com','ceil','853370ZZcjWd','Come\x20in!','rgb(78,\x2078,\x2078)','stroke','drawImage','getBoundingClientRect','moveTo','min','rgb(255,\x20167,\x20209)','forEach','rgba(255,0,0,0.5)','#FFFFFF','preventDefault','zoomOutBtn','mousedown','pixellox','rgb(0,\x20211,\x20221)','transformOrigin','error','toggleBtn','backgroundColor','uid','image/png','rgb(229,\x200,\x200)','rgb(104,\x20131,\x2056)','beginPath','Введите\x20корректные\x20координаты\x20X\x20Y','rgb(0,\x20101,\x2019)','style','px,\x20','game','clientX','setTransform','world.png','rgb(228,\x20228,\x20228)','adminPanel','querySelectorAll','461991610382','translate(','rgb(154,\x200,\x200)','Log\x20In','#000000','274968jsbhMY','contextmenu','coordY','#eef6ff','value','1:461991610382:web:2a5ae293dde4a754c2d45f','Reload:\x20','readAsDataURL','Пользователь\x20забанен!','2040tYVLIA','left','clear','now','applyCoords','innerHTML','change','trim','click','metaKey','naturalHeight','rgba(0,0,0,0.12)','remove','banUser','top\x20left','naturalWidth','paletteToggle','cursor','rgb(0,\x200,\x20234)','#ccc','Email:','866721zpUZaB','pixellox.firebaseapp.com','lineTo','rgb(0,\x200,\x200)','innerText','fillRect','textContent','set','px)\x20scale(','result','onload','src','altKey','getElementById'];_0x442c=function(){return _0x4bf757;};return _0x442c();}upBtn[_0x3ef637(0x1d6)](_0x3ef637(0x195),()=>moveCamera(0x0,-moveSpeed)),downBtn[_0x3ef637(0x1d6)](_0x3ef637(0x195),()=>moveCamera(0x0,moveSpeed)),leftBtn[_0x3ef637(0x1d6)](_0x3ef637(0x195),()=>moveCamera(-moveSpeed,0x0)),rightBtn[_0x3ef637(0x1d6)]('click',()=>moveCamera(moveSpeed,0x0)),zoomInBtn[_0x3ef637(0x1d6)]('click',()=>{const _0xec4c59=clamp(scale*zoomFactorBtn,MIN_SCALE,MAX_SCALE);scale=_0xec4c59,renderAll();}),zoomOutBtn['addEventListener'](_0x3ef637(0x195),()=>{const _0x1166d6=clamp(scale/zoomFactorBtn,MIN_SCALE,MAX_SCALE);scale=_0x1166d6,renderAll();}),coordsInput['addEventListener']('input',parseCoords);async function adminApplyPixels(_0xed4fda){const _0x5dd016=_0x3ef637;if(!auth[_0x5dd016(0x1df)]||auth[_0x5dd016(0x1df)][_0x5dd016(0x1c9)]!==_0x5dd016(0x1fa))return alert(_0x5dd016(0x1f7));parseCoords();let _0x4ca4fb=0x0;for(const [_0x50cf3f,_0x4b509c]of markers){const _0x5aa951=doc(db,_0x5dd016(0x1d1),_0x50cf3f+'-'+_0x4b509c);_0xed4fda==='add'?(await setDoc(_0x5aa951,{'x':_0x50cf3f,'y':_0x4b509c,'color':currentColor}),_0x4ca4fb++):(await deleteDoc(_0x5aa951),_0x4ca4fb++);}alert((_0xed4fda==='add'?_0x5dd016(0x1bc):_0x5dd016(0x1d9))+'\x20пикселей:\x20'+_0x4ca4fb);}addPixelBtn[_0x3ef637(0x1d6)]('click',()=>adminApplyPixels(_0x3ef637(0x1b1))),removePixelBtn[_0x3ef637(0x1d6)](_0x3ef637(0x195),()=>adminApplyPixels(_0x3ef637(0x199))),clearAllPixelsBtn[_0x3ef637(0x1d6)](_0x3ef637(0x195),async()=>{const _0x5abe45=_0x3ef637;if(!auth[_0x5abe45(0x1df)])return alert(_0x5abe45(0x1f7));const _0x155128=await getDocs(collection(db,_0x5abe45(0x1d1)));_0x155128['forEach'](_0x1e24e6=>deleteDoc(_0x1e24e6[_0x5abe45(0x1f9)]));}),banUserBtn[_0x3ef637(0x1d6)](_0x3ef637(0x195),()=>{const _0x6cbf61=_0x3ef637;if(!auth[_0x6cbf61(0x1df)])return alert('Только\x20админ!');const _0x5aa406=prompt('Введите\x20UserID\x20для\x20бана:');if(!_0x5aa406)return;const _0x1877e2=ref(rtdb,_0x6cbf61(0x1cd)+_0x5aa406);remove(_0x1877e2)['then'](()=>alert(_0x6cbf61(0x18c)))[_0x6cbf61(0x1c2)](_0x2c8aec=>console['error'](_0x2c8aec));});import{onDisconnect,set}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js';function trackOnlinePlayer(){const _0x3cd5d0=_0x3ef637;if(!auth['currentUser'])return;const _0x50c5e8=auth[_0x3cd5d0(0x1df)][_0x3cd5d0(0x16f)],_0x193356=ref(rtdb,_0x3cd5d0(0x1cd)+_0x50c5e8);set(_0x193356,{'email':auth['currentUser'][_0x3cd5d0(0x1c9)],'lastSeen':Date[_0x3cd5d0(0x190)]()}),onDisconnect(_0x193356)[_0x3cd5d0(0x199)]();}onAuthStateChanged(auth,_0xb7b7ef=>{_0xb7b7ef&&trackOnlinePlayer();});function updateOnlinePlayers(){const _0x2e7f50=_0x3ef637,_0x4cda75=ref(rtdb,_0x2e7f50(0x1cd));onValue(_0x4cda75,_0x408886=>{const _0x714f6a=_0x2e7f50,_0x19e11e=_0x408886['val'](),_0x3955ac=_0x19e11e?Object['keys'](_0x19e11e)[_0x714f6a(0x1bd)]:0x0;onlinePlayersEl[_0x714f6a(0x1a6)]='Online\x20players:\x20'+_0x3955ac;});}updateOnlinePlayers();const overlay=document['getElementById'](_0x3ef637(0x1ef)),fileInput=document['getElementById']('templateFile'),opacityRange=document[_0x3ef637(0x1af)]('opacityRange'),coordX=document[_0x3ef637(0x1af)](_0x3ef637(0x1de)),coordY=document[_0x3ef637(0x1af)](_0x3ef637(0x186)),applyCoordsBtn=document[_0x3ef637(0x1af)](_0x3ef637(0x191)),toggleBtn=document[_0x3ef637(0x1af)](_0x3ef637(0x16d));let templateX=0x0,templateY=0x0,templateOpacity=0.5,templateVisible=!![];function _0x3081(_0x212207,_0x460825){const _0x442c22=_0x442c();return _0x3081=function(_0x3081fd,_0x145166){_0x3081fd=_0x3081fd-0x160;let _0x1b093d=_0x442c22[_0x3081fd];return _0x1b093d;},_0x3081(_0x212207,_0x460825);}fileInput[_0x3ef637(0x1d6)](_0x3ef637(0x193),_0x30b333=>{const _0x2292ac=_0x3ef637,_0x1b60d1=_0x30b333['target'][_0x2292ac(0x1eb)][0x0];if(!_0x1b60d1)return;const _0x327729=new FileReader();_0x327729[_0x2292ac(0x1ac)]=_0x2a3e7c=>{const _0x27dfcf=_0x2292ac;overlay[_0x27dfcf(0x1ad)]=_0x2a3e7c[_0x27dfcf(0x1c0)][_0x27dfcf(0x1ab)],overlay[_0x27dfcf(0x176)][_0x27dfcf(0x1ed)]=_0x27dfcf(0x1b5);},_0x327729[_0x2292ac(0x18b)](_0x1b60d1);}),opacityRange['addEventListener']('input',()=>{const _0x5c97af=_0x3ef637;templateOpacity=opacityRange[_0x5c97af(0x188)],overlay[_0x5c97af(0x176)]['opacity']=templateOpacity;}),applyCoordsBtn[_0x3ef637(0x1d6)](_0x3ef637(0x195),()=>{const _0x10be4f=_0x3ef637;templateX=parseInt(coordX[_0x10be4f(0x188)])||0x0,templateY=parseInt(coordY[_0x10be4f(0x188)])||0x0,updateTemplatePosition();}),toggleBtn[_0x3ef637(0x1d6)](_0x3ef637(0x195),()=>{const _0x4f660a=_0x3ef637;templateVisible=!templateVisible,overlay['style']['display']=templateVisible?_0x4f660a(0x1b5):_0x4f660a(0x1ba);});function updateTemplatePosition(){const _0x14c10e=_0x3ef637;overlay[_0x14c10e(0x176)][_0x14c10e(0x1c7)]=_0x14c10e(0x180)+(-camX*scale+templateX)+_0x14c10e(0x177)+(-camY*scale+templateY)+_0x14c10e(0x1aa)+scale+')',overlay['style'][_0x14c10e(0x16b)]=_0x14c10e(0x19b);}const oldRenderAll=renderAll;renderAll=function(){oldRenderAll();if(overlay['src'])updateTemplatePosition();};
