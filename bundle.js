const _0x26a2a1=_0x1304;(function(_0x6d897c,_0x4ff05d){const _0x598bcd=_0x1304,_0x28fa22=_0x6d897c();while(!![]){try{const _0x588ad9=parseInt(_0x598bcd(0xf9))/0x1*(parseInt(_0x598bcd(0xff))/0x2)+parseInt(_0x598bcd(0xf0))/0x3*(parseInt(_0x598bcd(0x11b))/0x4)+-parseInt(_0x598bcd(0x15a))/0x5*(parseInt(_0x598bcd(0x133))/0x6)+-parseInt(_0x598bcd(0x102))/0x7+-parseInt(_0x598bcd(0xce))/0x8*(-parseInt(_0x598bcd(0xd1))/0x9)+-parseInt(_0x598bcd(0xde))/0xa*(parseInt(_0x598bcd(0x144))/0xb)+-parseInt(_0x598bcd(0xd3))/0xc;if(_0x588ad9===_0x4ff05d)break;else _0x28fa22['push'](_0x28fa22['shift']());}catch(_0x3ff6d9){_0x28fa22['push'](_0x28fa22['shift']());}}}(_0x1743,0xe4559));import{initializeApp}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js';import{getFirestore,collection,doc,setDoc,onSnapshot,deleteDoc,getDocs}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js';import{getDatabase,ref,remove}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js';function _0x1743(){const _0x25a285=['1329444DSWpsX','Reload:\x20','readAsDataURL','value','coordX','teleportBtn','naturalHeight','keys','#FFFFFF','style','rgb(228,\x20228,\x20228)','923630BncJQA','lineTo','click','div','moveTo','floor','src','metaKey','rgb(202,\x20227,\x20255)','rgb(255,\x20248,\x20137)','clientX','adminPanel','clear','Log\x20In','textContent','email','uid','error','3ElBtbZ','selected','contextmenu','height','rgb(254,\x20164,\x2096)','pixels','rgb(255,\x20167,\x20209)','rgb(2,\x20190,\x201)','altKey','51096EqSwfO','block','stroke','rgb(0,\x20101,\x2019)','colorsChoice','rgb(160,\x20106,\x2066)','44MWhofY','Ready!','rgb(136,\x20136,\x20136)','2815911GRcXeb','canvas','Email:','touchend','Login\x20to\x20draw!','setTransform','paletteToggle','rgb(229,\x20217,\x200)','innerHTML','leftBtn','naturalWidth','ref','overlayTemplate','reloadTimer','display','#colorsChoice\x20div','trim','strokeStyle','teleportInput','img','rgb(130,\x200,\x20128)','logo100153@gmail.com','image/png','X:\x20','complete','5334172DbNEEs','remove','length','Come\x20in!','rgb(0,\x200,\x20234)','width','px,\x20','1:461991610382:web:2a5ae293dde4a754c2d45f','addEventListener','Password:','files','removePixelBtn','button','templateFile','then','deltaY','opacity','isNaN','getContext','rgb(104,\x20131,\x2056)','Введите\x20корректные\x20координаты\x20X\x20Y','clientY','rgb(0,\x200,\x200)','clearRect','436098OXMBJP','push','change','#000000','drawImage','rgb(196,\x20196,\x20196)','px)\x20scale(','currentUser','translate(','rgb(255,\x20255,\x20255)','users/','downBtn','\x20\x20Y:\x20','onload','zoomInBtn','ctrlKey','backgroundColor','33RfQiuo','val','Только\x20админ!','togglePalette','touches','mousemove','pixellox.firebasestorage.app','rightBtn','data','catch','mousedown','Удалено','getElementById','max','#eef6ff','input','preventDefault','coordsDisplay','Enter\x201\x20to\x20sign\x20in,\x20or\x202\x20to\x20create\x20a\x20new\x20account:','beginPath','upBtn','fillRect','105EjaXTy','getBoundingClientRect','createElement','coordsInput','forEach','fillStyle','\x20пикселей:\x20','opacityRange','result','coordY','rgb(229,\x20149,\x200)','rgba(255,0,0,0.5)','ceil','touchstart','left','#ccc','Пользователь\x20забанен!','Добавлено','min','applyCoords','banUser','split','toggleBtn','pixellox','none','innerText','rgb(154,\x200,\x200)','rgba(0,0,0,0.12)','add','imageSmoothingEnabled','authButton','target','classList','mouseup','top','rgb(148,\x20224,\x2068)','cursor','pixellox.firebaseapp.com','4088wAHBrc','game','Введите\x20UserID\x20для\x20бана:','13986apKoQL','AIzaSyCwy4jVn9JIwXuIXVycYAv9EdPGPkgIJvA'];_0x1743=function(){return _0x25a285;};return _0x1743();}import{getAuth,onAuthStateChanged,signInWithEmailAndPassword,createUserWithEmailAndPassword,signOut}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-auth.js';const firebaseConfig={'apiKey':_0x26a2a1(0xd2),'authDomain':_0x26a2a1(0xcd),'projectId':_0x26a2a1(0xbf),'storageBucket':_0x26a2a1(0x14a),'messagingSenderId':'461991610382','appId':_0x26a2a1(0x122)},app=initializeApp(firebaseConfig),db=getFirestore(app),rtdb=getDatabase(app),auth=getAuth(app),coordsDisplayEl=document[_0x26a2a1(0x150)](_0x26a2a1(0x155)),colorsChoiceEl=document[_0x26a2a1(0x150)](_0x26a2a1(0xfd)),paletteToggle=document[_0x26a2a1(0x150)](_0x26a2a1(0x108)),game=document[_0x26a2a1(0x150)](_0x26a2a1(0xcf)),ctx=game['getContext']('2d'),cursor=document[_0x26a2a1(0x150)](_0x26a2a1(0xcc)),reloadTimerEl=document[_0x26a2a1(0x150)](_0x26a2a1(0x10f)),adminPanel=document[_0x26a2a1(0x150)](_0x26a2a1(0xe9)),clearAllPixelsBtn=document[_0x26a2a1(0x150)]('clearAllPixels'),banUserBtn=document[_0x26a2a1(0x150)](_0x26a2a1(0xbc)),authButton=document[_0x26a2a1(0x150)](_0x26a2a1(0xc6)),coordsInput=document[_0x26a2a1(0x150)](_0x26a2a1(0x15d)),addPixelBtn=document[_0x26a2a1(0x150)]('addPixelBtn'),removePixelBtn=document[_0x26a2a1(0x150)](_0x26a2a1(0x126)),teleportInput=document[_0x26a2a1(0x150)](_0x26a2a1(0x114)),teleportBtn=document[_0x26a2a1(0x150)](_0x26a2a1(0xd8));teleportBtn[_0x26a2a1(0x123)](_0x26a2a1(0xe0),()=>{const _0xc9bd11=_0x26a2a1;if(!auth[_0xc9bd11(0x13a)]||auth['currentUser']['email']!==_0xc9bd11(0x117))return alert(_0xc9bd11(0x146));const _0x1bd843=teleportInput[_0xc9bd11(0xd6)]['trim']();if(!_0x1bd843)return;const [_0x520e7a,_0x4d766a]=_0x1bd843[_0xc9bd11(0xbd)](/\s+/),_0x9bea85=parseInt(_0x520e7a),_0x5ddacc=parseInt(_0x4d766a);if(Number[_0xc9bd11(0x12c)](_0x9bea85)||Number[_0xc9bd11(0x12c)](_0x5ddacc))return alert(_0xc9bd11(0x12f));const _0x4dc45c=_0x9bea85*gridCellSize,_0x4dc902=_0x5ddacc*gridCellSize;camX=_0x4dc45c-game[_0xc9bd11(0x120)]/0x2/scale,camY=_0x4dc902-game[_0xc9bd11(0xf3)]/0x2/scale,renderAll();}),ctx[_0x26a2a1(0xc5)]=![];const gridCellSize=0xa;game[_0x26a2a1(0x120)]=0x4b0,game['height']=0x258;let currentColor=_0x26a2a1(0x136),canPlace=!![];const reloadTime=0x5,colors=[_0x26a2a1(0x13c),'rgb(96,\x2064,\x2040)',_0x26a2a1(0xdd),'rgb(245,\x20223,\x20176)',_0x26a2a1(0x138),_0x26a2a1(0xe7),_0x26a2a1(0x101),_0x26a2a1(0x109),'rgb(78,\x2078,\x2078)',_0x26a2a1(0xcb),_0x26a2a1(0x131),_0x26a2a1(0xf7),'rgb(244,\x20179,\x20174)',_0x26a2a1(0x12e),_0x26a2a1(0xf6),_0x26a2a1(0xfc),'rgb(255,\x2084,\x20178)',_0x26a2a1(0xe6),'rgb(255,\x20101,\x20101)','rgb(0,\x20211,\x20221)','rgb(229,\x200,\x200)','rgb(0,\x20131,\x20199)',_0x26a2a1(0xc2),_0x26a2a1(0x11f),_0x26a2a1(0xf4),'rgb(25,\x2025,\x20115)',_0x26a2a1(0xb2),'rgb(207,\x20110,\x20228)',_0x26a2a1(0xfe),_0x26a2a1(0x116)];colorsChoiceEl[_0x26a2a1(0x10a)]='',colors[_0x26a2a1(0x15e)](_0x6baf60=>{const _0x5d5baa=_0x26a2a1,_0x2ac74a=document[_0x5d5baa(0x15c)](_0x5d5baa(0xe1));_0x2ac74a[_0x5d5baa(0xdc)][_0x5d5baa(0x143)]=_0x6baf60,_0x2ac74a[_0x5d5baa(0x123)](_0x5d5baa(0xe0),()=>{const _0x4b5347=_0x5d5baa;currentColor=_0x6baf60,document['querySelectorAll'](_0x4b5347(0x111))[_0x4b5347(0x15e)](_0x6c12c8=>_0x6c12c8['classList'][_0x4b5347(0x11c)](_0x4b5347(0xf1))),_0x2ac74a[_0x4b5347(0xc8)][_0x4b5347(0xc4)](_0x4b5347(0xf1));}),colorsChoiceEl['appendChild'](_0x2ac74a);});const colorsChoice=document['getElementById'](_0x26a2a1(0xfd)),togglePalette=document['getElementById'](_0x26a2a1(0x147));togglePalette['addEventListener'](_0x26a2a1(0xe0),()=>{const _0x2df189=_0x26a2a1;colorsChoice[_0x2df189(0xdc)][_0x2df189(0x110)]===_0x2df189(0xc0)?colorsChoice['style']['display']='grid':colorsChoice[_0x2df189(0xdc)]['display']=_0x2df189(0xc0);});const worldMap=new Image();worldMap['src']='world.png';function _0x1304(_0x3978,_0x2e1fdc){const _0x174383=_0x1743();return _0x1304=function(_0x13044d,_0x5a42c2){_0x13044d=_0x13044d-0xad;let _0x59690d=_0x174383[_0x13044d];return _0x59690d;},_0x1304(_0x3978,_0x2e1fdc);}const SCALE_TILE=0x32;let WORLD_W=0x4e20*SCALE_TILE,WORLD_H=0x4e20*SCALE_TILE,camX=0x0,camY=0x0,scale=0x1;const MIN_SCALE=0.005,MAX_SCALE=0x6;let isPanning=![],lastMouseX=0x0,lastMouseY=0x0;function clamp(_0x4c56f2,_0x493b07,_0xd07c19){const _0x37bf66=_0x26a2a1;return Math[_0x37bf66(0x151)](_0x493b07,Math['min'](_0xd07c19,_0x4c56f2));}function screenToWorld(_0x230ae3,_0x485126){const _0x5f42ef=_0x26a2a1,_0x2a1aeb=game['getBoundingClientRect'](),_0x2dec25=(_0x230ae3-_0x2a1aeb['left'])/scale+camX,_0x285052=(_0x485126-_0x2a1aeb[_0x5f42ef(0xca)])/scale+camY;return[_0x2dec25,_0x285052];}function snapToGrid(_0x23fc1f,_0x28ae28){const _0x48ca7a=_0x26a2a1;return[Math['floor'](_0x23fc1f/gridCellSize)*gridCellSize,Math[_0x48ca7a(0xe3)](_0x28ae28/gridCellSize)*gridCellSize];}let hoverCellX=0x0,hoverCellY=0x0;const pixelsCache=new Map();let markers=[];function updateCoordsDisplay(){const _0x457fcf=_0x26a2a1;if(!coordsDisplayEl)return;const _0x1200d9=Math[_0x457fcf(0xe3)](hoverCellX/gridCellSize),_0x5774d5=Math['floor'](hoverCellY/gridCellSize);coordsDisplayEl['textContent']=_0x457fcf(0x119)+_0x1200d9+_0x457fcf(0x13f)+_0x5774d5;}const TILE_SIZE=0x3e8;let tiles=[];const offscreenCanvas=document[_0x26a2a1(0x15c)](_0x26a2a1(0x103));offscreenCanvas[_0x26a2a1(0x120)]=TILE_SIZE,offscreenCanvas[_0x26a2a1(0xf3)]=TILE_SIZE;const offCtx=offscreenCanvas[_0x26a2a1(0x12d)]('2d',{'willReadFrequently':!![]});offCtx[_0x26a2a1(0xc5)]=![],worldMap[_0x26a2a1(0x140)]=()=>{const _0x585b35=_0x26a2a1,_0x2d87c1=worldMap[_0x585b35(0x10c)]||0x4e20,_0x2334a3=worldMap[_0x585b35(0xd9)]||0x4e20;WORLD_W=_0x2d87c1*SCALE_TILE,WORLD_H=_0x2334a3*SCALE_TILE;const _0x4c89ae=Math['ceil'](_0x2d87c1/TILE_SIZE),_0x360e83=Math[_0x585b35(0xb4)](_0x2334a3/TILE_SIZE);tiles=[];for(let _0x39c7a9=0x0;_0x39c7a9<_0x4c89ae;_0x39c7a9++){for(let _0xefb250=0x0;_0xefb250<_0x360e83;_0xefb250++){const _0x243da7=_0x39c7a9*TILE_SIZE,_0x311db4=_0xefb250*TILE_SIZE,_0xe1dfed=Math[_0x585b35(0xba)](TILE_SIZE,_0x2d87c1-_0x243da7),_0x252bc8=Math['min'](TILE_SIZE,_0x2334a3-_0x311db4);offCtx[_0x585b35(0x132)](0x0,0x0,TILE_SIZE,TILE_SIZE),offCtx['drawImage'](worldMap,_0x243da7,_0x311db4,_0xe1dfed,_0x252bc8,0x0,0x0,_0xe1dfed,_0x252bc8);const _0x57a284=new Image();_0x57a284[_0x585b35(0xe4)]=offscreenCanvas['toDataURL'](_0x585b35(0x118));const _0x4f0783=_0x243da7*SCALE_TILE,_0x4f094b=_0x311db4*SCALE_TILE,_0x2e6dca=_0xe1dfed*SCALE_TILE,_0x2bc245=_0x252bc8*SCALE_TILE;tiles[_0x585b35(0x134)]({'img':_0x57a284,'dx':_0x4f0783,'dy':_0x4f094b,'dw':_0x2e6dca,'dh':_0x2bc245});}}renderAll();};function renderAll(){const _0x2f8a76=_0x26a2a1;ctx[_0x2f8a76(0xc5)]=![],ctx[_0x2f8a76(0x107)](0x1,0x0,0x0,0x1,0x0,0x0),ctx[_0x2f8a76(0x132)](0x0,0x0,game['width'],game['height']),ctx[_0x2f8a76(0x107)](scale,0x0,0x0,scale,-camX*scale,-camY*scale);const _0x4bf3cd=camX,_0x46eb56=camY,_0x4f1b25=camX+game['width']/scale,_0x5dab8f=camY+game[_0x2f8a76(0xf3)]/scale;for(const _0x57bbef of tiles){if(_0x57bbef['dx']+_0x57bbef['dw']<_0x4bf3cd||_0x57bbef['dx']>_0x4f1b25||_0x57bbef['dy']+_0x57bbef['dh']<_0x46eb56||_0x57bbef['dy']>_0x5dab8f)continue;_0x57bbef['img'][_0x2f8a76(0x11a)]&&_0x57bbef[_0x2f8a76(0x115)][_0x2f8a76(0x10c)]?ctx[_0x2f8a76(0x137)](_0x57bbef['img'],_0x57bbef['dx'],_0x57bbef['dy'],_0x57bbef['dw'],_0x57bbef['dh']):(ctx['fillStyle']=_0x2f8a76(0x152),ctx[_0x2f8a76(0x159)](_0x57bbef['dx'],_0x57bbef['dy'],_0x57bbef['dw'],_0x57bbef['dh']));}ctx[_0x2f8a76(0x157)](),ctx[_0x2f8a76(0x113)]=_0x2f8a76(0xb7);let _0x140277=Math[_0x2f8a76(0xe3)](_0x4bf3cd/gridCellSize)*gridCellSize;for(let _0x1ff4ba=_0x140277;_0x1ff4ba<=_0x4f1b25;_0x1ff4ba+=gridCellSize){ctx[_0x2f8a76(0xe2)](_0x1ff4ba,_0x46eb56),ctx[_0x2f8a76(0xdf)](_0x1ff4ba,_0x5dab8f);}let _0x5f20de=Math[_0x2f8a76(0xe3)](_0x46eb56/gridCellSize)*gridCellSize;for(let _0x496c05=_0x5f20de;_0x496c05<=_0x5dab8f;_0x496c05+=gridCellSize){ctx[_0x2f8a76(0xe2)](_0x4bf3cd,_0x496c05),ctx['lineTo'](_0x4f1b25,_0x496c05);}ctx[_0x2f8a76(0xfb)](),pixelsCache[_0x2f8a76(0x15e)](_0x4461be=>{const _0x17c695=_0x2f8a76;_0x4461be['color']!==_0x17c695(0xdb)&&(ctx[_0x17c695(0xad)]=_0x4461be['color'],ctx[_0x17c695(0x159)](_0x4461be['x'],_0x4461be['y'],gridCellSize,gridCellSize));}),ctx[_0x2f8a76(0xad)]=_0x2f8a76(0xb3);for(const [_0x38e375,_0x59ae0f]of markers){ctx[_0x2f8a76(0x159)](_0x38e375,_0x59ae0f,gridCellSize,gridCellSize);}ctx[_0x2f8a76(0xad)]=_0x2f8a76(0xc3),ctx[_0x2f8a76(0x159)](hoverCellX,hoverCellY,gridCellSize,gridCellSize),ctx[_0x2f8a76(0x107)](0x1,0x0,0x0,0x1,0x0,0x0);}onSnapshot(collection(db,_0x26a2a1(0xf5)),_0x2c0d2e=>{const _0x1d2474=_0x26a2a1;pixelsCache[_0x1d2474(0xea)](),_0x2c0d2e[_0x1d2474(0x15e)](_0x4091ee=>{const _0x24ff3e=_0x1d2474,_0x21f527=_0x4091ee[_0x24ff3e(0x14c)]();pixelsCache['set'](_0x21f527['x']+'-'+_0x21f527['y'],_0x21f527);}),renderAll();}),game[_0x26a2a1(0x123)](_0x26a2a1(0x14e),_0x2b7321=>{const _0x8520f4=_0x26a2a1;(_0x2b7321['button']===0x1||_0x2b7321['button']===0x2||_0x2b7321['shiftKey']||_0x2b7321[_0x8520f4(0x142)]||_0x2b7321[_0x8520f4(0xe5)]||_0x2b7321[_0x8520f4(0xf8)])&&(isPanning=!![],lastMouseX=_0x2b7321['clientX'],lastMouseY=_0x2b7321[_0x8520f4(0x130)],_0x2b7321[_0x8520f4(0x154)]());}),window['addEventListener'](_0x26a2a1(0xc9),()=>{isPanning=![];}),game[_0x26a2a1(0x123)](_0x26a2a1(0xf2),_0xbb6e6d=>_0xbb6e6d[_0x26a2a1(0x154)]()),game['addEventListener'](_0x26a2a1(0x149),_0x56dec3=>{const _0x422d33=_0x26a2a1;if(isPanning){const _0x28d51d=_0x56dec3[_0x422d33(0xe8)]-lastMouseX,_0x241b25=_0x56dec3['clientY']-lastMouseY;camX-=_0x28d51d/scale,camY-=_0x241b25/scale,lastMouseX=_0x56dec3[_0x422d33(0xe8)],lastMouseY=_0x56dec3[_0x422d33(0x130)],renderAll();}const [_0x37a800,_0x156fde]=screenToWorld(_0x56dec3[_0x422d33(0xe8)],_0x56dec3[_0x422d33(0x130)]);[hoverCellX,hoverCellY]=snapToGrid(_0x37a800,_0x156fde),updateCoordsDisplay(),renderAll();}),game['addEventListener']('wheel',_0x527402=>{const _0x1151ee=_0x26a2a1;_0x527402[_0x1151ee(0x154)]();const _0x21bbd4=1.1,[_0xd28dae,_0x492c13]=screenToWorld(_0x527402[_0x1151ee(0xe8)],_0x527402[_0x1151ee(0x130)]),_0x2f0cd3=_0x527402[_0x1151ee(0x12a)]<0x0?0x1:-0x1,_0x2b9006=clamp(scale*(_0x2f0cd3>0x0?_0x21bbd4:0x1/_0x21bbd4),MIN_SCALE,MAX_SCALE);if(_0x2b9006===scale)return;scale=_0x2b9006;const _0x5c94ea=game[_0x1151ee(0x15b)]();camX=_0xd28dae-(_0x527402[_0x1151ee(0xe8)]-_0x5c94ea['left'])/scale,camY=_0x492c13-(_0x527402[_0x1151ee(0x130)]-_0x5c94ea['top'])/scale;const [_0x53ef19,_0x537bbf]=screenToWorld(_0x527402[_0x1151ee(0xe8)],_0x527402[_0x1151ee(0x130)]);[hoverCellX,hoverCellY]=snapToGrid(_0x53ef19,_0x537bbf),updateCoordsDisplay(),renderAll();},{'passive':![]});async function placePixelWithHover(){const _0x35ca91=_0x26a2a1;if(!auth[_0x35ca91(0x13a)])return alert(_0x35ca91(0x106));if(!canPlace)return;canPlace=![];const _0x218fb7=hoverCellX,_0x474131=hoverCellY,_0x50ed31=doc(db,'pixels',_0x218fb7+'-'+_0x474131);try{if(currentColor===_0x35ca91(0xdb))await deleteDoc(_0x50ed31);else await setDoc(_0x50ed31,{'x':_0x218fb7,'y':_0x474131,'color':currentColor});}catch(_0x1eeb74){console[_0x35ca91(0xef)](_0x1eeb74);}startReload();}game[_0x26a2a1(0x123)](_0x26a2a1(0xe0),_0x41bf54=>{const _0x39a2b8=_0x26a2a1;if(isPanning||_0x41bf54[_0x39a2b8(0x127)]!==0x0)return;placePixelWithHover();});if(cursor)cursor['style']['display']=_0x26a2a1(0xc0);function startReload(){const _0x144b3b=_0x26a2a1;let _0x34e4c8=reloadTime;reloadTimerEl[_0x144b3b(0xc1)]=_0x144b3b(0xd4)+_0x34e4c8+'\x20sec';const _0x2e3733=setInterval(()=>{const _0x1eedca=_0x144b3b;_0x34e4c8--;if(_0x34e4c8<=0x0)clearInterval(_0x2e3733),canPlace=!![],reloadTimerEl[_0x1eedca(0xc1)]=_0x1eedca(0x100);else reloadTimerEl['innerText']=_0x1eedca(0xd4)+_0x34e4c8+'\x20sec';},0x3e8);}authButton[_0x26a2a1(0x123)]('click',async()=>{const _0xcd31ef=_0x26a2a1;if(auth[_0xcd31ef(0x13a)]){await signOut(auth);return;}const _0x2ad479=prompt(_0xcd31ef(0x156));if(!_0x2ad479||_0x2ad479!=='1'&&_0x2ad479!=='2')return;const _0x79752d=prompt(_0xcd31ef(0x104)),_0x3c7fc0=prompt(_0xcd31ef(0x124));if(!_0x79752d||!_0x3c7fc0)return;try{_0x2ad479==='1'?(await signInWithEmailAndPassword(auth,_0x79752d,_0x3c7fc0),alert(_0xcd31ef(0x11e))):(await createUserWithEmailAndPassword(auth,_0x79752d,_0x3c7fc0),alert('Account\x20created!'));}catch(_0x4d7c30){alert(_0x4d7c30['message']);}}),onAuthStateChanged(auth,_0x180ec8=>{const _0x16ed00=_0x26a2a1;_0x180ec8?(authButton[_0x16ed00(0xec)]='Log\x20Out',_0x180ec8[_0x16ed00(0xed)]===_0x16ed00(0x117)?adminPanel[_0x16ed00(0xdc)][_0x16ed00(0x110)]='block':adminPanel[_0x16ed00(0xdc)]['display']=_0x16ed00(0xc0)):(authButton[_0x16ed00(0xec)]=_0x16ed00(0xeb),adminPanel[_0x16ed00(0xdc)][_0x16ed00(0x110)]=_0x16ed00(0xc0));});function parseCoords(){const _0x370ef1=_0x26a2a1;markers=[];const _0x2e5615=coordsInput['value'][_0x370ef1(0x112)]();if(!_0x2e5615){renderAll();return;}_0x2e5615[_0x370ef1(0xbd)](',')['forEach'](_0x1108c4=>{const _0x385ba7=_0x370ef1,[_0x559fb1,_0x419a0a,_0x56fd6e,_0xec94c2]=_0x1108c4[_0x385ba7(0x112)]()[_0x385ba7(0xbd)](/\s+/),_0xf7f6b2=parseInt(_0x559fb1),_0x1ab645=parseInt(_0x419a0a),_0x5830c9=parseInt(_0x56fd6e||'1'),_0x328ee5=parseInt(_0xec94c2||'1');if(Number[_0x385ba7(0x12c)](_0xf7f6b2)||Number['isNaN'](_0x1ab645)||Number[_0x385ba7(0x12c)](_0x5830c9)||Number[_0x385ba7(0x12c)](_0x328ee5))return;const _0x438978=_0xf7f6b2*gridCellSize,_0x5f0f25=_0x1ab645*gridCellSize;for(let _0x22cff6=0x0;_0x22cff6<_0x5830c9;_0x22cff6++){for(let _0x589cb2=0x0;_0x589cb2<_0x328ee5;_0x589cb2++){const _0x325d9f=_0x438978+_0x22cff6*gridCellSize,_0x5da02e=_0x5f0f25+_0x589cb2*gridCellSize;_0x325d9f>=0x0&&_0x5da02e>=0x0&&_0x325d9f<=WORLD_W-gridCellSize&&_0x5da02e<=WORLD_H-gridCellSize&&markers['push']([_0x325d9f,_0x5da02e]);}}}),renderAll();}const upBtn=document[_0x26a2a1(0x150)](_0x26a2a1(0x158)),downBtn=document[_0x26a2a1(0x150)](_0x26a2a1(0x13e)),leftBtn=document[_0x26a2a1(0x150)](_0x26a2a1(0x10b)),rightBtn=document[_0x26a2a1(0x150)](_0x26a2a1(0x14b)),zoomInBtn=document[_0x26a2a1(0x150)](_0x26a2a1(0x141)),zoomOutBtn=document['getElementById']('zoomOutBtn'),moveSpeed=0x32,zoomFactorBtn=1.2;function moveCamera(_0x3396e6,_0xa3cacf){camX+=_0x3396e6/scale,camY+=_0xa3cacf/scale,renderAll();}upBtn[_0x26a2a1(0x123)]('click',()=>moveCamera(0x0,-moveSpeed)),downBtn[_0x26a2a1(0x123)]('click',()=>moveCamera(0x0,moveSpeed)),leftBtn['addEventListener'](_0x26a2a1(0xe0),()=>moveCamera(-moveSpeed,0x0)),rightBtn[_0x26a2a1(0x123)]('click',()=>moveCamera(moveSpeed,0x0)),zoomInBtn[_0x26a2a1(0x123)](_0x26a2a1(0xe0),()=>{const _0x6b78fb=clamp(scale*zoomFactorBtn,MIN_SCALE,MAX_SCALE);scale=_0x6b78fb,renderAll();}),zoomOutBtn[_0x26a2a1(0x123)](_0x26a2a1(0xe0),()=>{const _0xbb6736=clamp(scale/zoomFactorBtn,MIN_SCALE,MAX_SCALE);scale=_0xbb6736,renderAll();}),coordsInput['addEventListener'](_0x26a2a1(0x153),parseCoords);async function adminApplyPixels(_0xdc02f9){const _0x2bfabb=_0x26a2a1;if(!auth[_0x2bfabb(0x13a)]||auth['currentUser'][_0x2bfabb(0xed)]!==_0x2bfabb(0x117))return alert(_0x2bfabb(0x146));parseCoords();let _0x1fc671=0x0;for(const [_0x1a7a7d,_0x5c6708]of markers){const _0x14f5a4=doc(db,_0x2bfabb(0xf5),_0x1a7a7d+'-'+_0x5c6708);_0xdc02f9===_0x2bfabb(0xc4)?(await setDoc(_0x14f5a4,{'x':_0x1a7a7d,'y':_0x5c6708,'color':currentColor}),_0x1fc671++):(await deleteDoc(_0x14f5a4),_0x1fc671++);}alert((_0xdc02f9==='add'?_0x2bfabb(0xb9):_0x2bfabb(0x14f))+_0x2bfabb(0xae)+_0x1fc671);}addPixelBtn[_0x26a2a1(0x123)](_0x26a2a1(0xe0),()=>adminApplyPixels('add')),removePixelBtn[_0x26a2a1(0x123)](_0x26a2a1(0xe0),()=>adminApplyPixels(_0x26a2a1(0x11c))),clearAllPixelsBtn['addEventListener'](_0x26a2a1(0xe0),async()=>{const _0x47784b=_0x26a2a1;if(!auth[_0x47784b(0x13a)])return alert(_0x47784b(0x146));const _0x4a3681=await getDocs(collection(db,'pixels'));_0x4a3681[_0x47784b(0x15e)](_0x497020=>deleteDoc(_0x497020[_0x47784b(0x10d)]));}),banUserBtn['addEventListener']('click',()=>{const _0x28a7fa=_0x26a2a1;if(!auth['currentUser'])return alert(_0x28a7fa(0x146));const _0x56665d=prompt(_0x28a7fa(0xd0));if(!_0x56665d)return;const _0x80d273=ref(rtdb,_0x28a7fa(0x13d)+_0x56665d);remove(_0x80d273)[_0x28a7fa(0x129)](()=>alert(_0x28a7fa(0xb8)))[_0x28a7fa(0x14d)](_0x3edfa0=>console['error'](_0x3edfa0));});import{onDisconnect,set}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js';function trackOnlinePlayer(){const _0xa17f5d=_0x26a2a1;if(!auth[_0xa17f5d(0x13a)])return;const _0x5ded9f=auth['currentUser'][_0xa17f5d(0xee)],_0x2c7deb=ref(rtdb,_0xa17f5d(0x13d)+_0x5ded9f);set(_0x2c7deb,{'email':auth['currentUser']['email'],'lastSeen':Date['now']()}),onDisconnect(_0x2c7deb)[_0xa17f5d(0x11c)]();}onAuthStateChanged(auth,_0x4ecdd4=>{_0x4ecdd4&&trackOnlinePlayer();});function updateOnlinePlayers(){const _0x6a5282=_0x26a2a1,_0x22c4d5=ref(rtdb,_0x6a5282(0x13d));onValue(_0x22c4d5,_0x3611b6=>{const _0x2fe490=_0x6a5282,_0x40dfcc=_0x3611b6[_0x2fe490(0x145)](),_0x506c6c=_0x40dfcc?Object[_0x2fe490(0xda)](_0x40dfcc)[_0x2fe490(0x11d)]:0x0;onlinePlayersEl[_0x2fe490(0xc1)]='Online\x20players:\x20'+_0x506c6c;});}updateOnlinePlayers();let lastDist=0x0;function getDistance(_0x14f6ff,_0x547240){const _0x25f71b=_0x26a2a1,_0x4240e1=_0x14f6ff['clientX']-_0x547240[_0x25f71b(0xe8)],_0x218d21=_0x14f6ff[_0x25f71b(0x130)]-_0x547240[_0x25f71b(0x130)];return Math['sqrt'](_0x4240e1*_0x4240e1+_0x218d21*_0x218d21);}game[_0x26a2a1(0x123)](_0x26a2a1(0xb5),_0x4b9774=>{const _0x12ee3b=_0x26a2a1;_0x4b9774[_0x12ee3b(0x148)][_0x12ee3b(0x11d)]===0x2&&(lastDist=getDistance(_0x4b9774['touches'][0x0],_0x4b9774[_0x12ee3b(0x148)][0x1]));},{'passive':![]}),game[_0x26a2a1(0x123)]('touchmove',_0x1cd178=>{const _0xd1b94c=_0x26a2a1;if(_0x1cd178[_0xd1b94c(0x148)][_0xd1b94c(0x11d)]===0x2){const _0x3813c0=getDistance(_0x1cd178['touches'][0x0],_0x1cd178[_0xd1b94c(0x148)][0x1]);if(lastDist>0x0){const _0x4414b9=_0x3813c0/lastDist,_0x28ab88=(_0x1cd178[_0xd1b94c(0x148)][0x0][_0xd1b94c(0xe8)]+_0x1cd178[_0xd1b94c(0x148)][0x1][_0xd1b94c(0xe8)])/0x2,_0x31496c=(_0x1cd178[_0xd1b94c(0x148)][0x0][_0xd1b94c(0x130)]+_0x1cd178[_0xd1b94c(0x148)][0x1]['clientY'])/0x2,[_0x24e667,_0x214b1e]=screenToWorld(_0x28ab88,_0x31496c);scale=clamp(scale*_0x4414b9,MIN_SCALE,MAX_SCALE);const _0x59c8bd=game[_0xd1b94c(0x15b)]();camX=_0x24e667-(_0x28ab88-_0x59c8bd[_0xd1b94c(0xb6)])/scale,camY=_0x214b1e-(_0x31496c-_0x59c8bd[_0xd1b94c(0xca)])/scale,renderAll();}lastDist=_0x3813c0,_0x1cd178[_0xd1b94c(0x154)]();}},{'passive':![]}),game[_0x26a2a1(0x123)](_0x26a2a1(0x105),_0x30e18b=>{const _0x5b9878=_0x26a2a1;_0x30e18b[_0x5b9878(0x148)][_0x5b9878(0x11d)]<0x2&&(lastDist=0x0);},{'passive':![]});const overlay=document[_0x26a2a1(0x150)](_0x26a2a1(0x10e)),fileInput=document[_0x26a2a1(0x150)](_0x26a2a1(0x128)),opacityRange=document[_0x26a2a1(0x150)](_0x26a2a1(0xaf)),coordX=document[_0x26a2a1(0x150)](_0x26a2a1(0xd7)),coordY=document[_0x26a2a1(0x150)](_0x26a2a1(0xb1)),applyCoordsBtn=document[_0x26a2a1(0x150)](_0x26a2a1(0xbb)),toggleBtn=document['getElementById'](_0x26a2a1(0xbe));let templateX=0x0,templateY=0x0,templateOpacity=0.5,templateVisible=!![];fileInput[_0x26a2a1(0x123)](_0x26a2a1(0x135),_0x2cbba7=>{const _0x112a64=_0x26a2a1,_0x1ad07c=_0x2cbba7[_0x112a64(0xc7)][_0x112a64(0x125)][0x0];if(!_0x1ad07c)return;const _0x2819db=new FileReader();_0x2819db[_0x112a64(0x140)]=_0xd84181=>{const _0x4cb314=_0x112a64;overlay['src']=_0xd84181[_0x4cb314(0xc7)][_0x4cb314(0xb0)],overlay[_0x4cb314(0xdc)][_0x4cb314(0x110)]=_0x4cb314(0xfa);},_0x2819db[_0x112a64(0xd5)](_0x1ad07c);}),opacityRange[_0x26a2a1(0x123)](_0x26a2a1(0x153),()=>{const _0x2d80ab=_0x26a2a1;templateOpacity=opacityRange['value'],overlay['style'][_0x2d80ab(0x12b)]=templateOpacity;}),applyCoordsBtn[_0x26a2a1(0x123)](_0x26a2a1(0xe0),()=>{const _0xd337f8=_0x26a2a1;templateX=parseInt(coordX[_0xd337f8(0xd6)])||0x0,templateY=parseInt(coordY['value'])||0x0,updateTemplatePosition();}),toggleBtn['addEventListener'](_0x26a2a1(0xe0),()=>{const _0x3f9b74=_0x26a2a1;templateVisible=!templateVisible,overlay[_0x3f9b74(0xdc)][_0x3f9b74(0x110)]=templateVisible?_0x3f9b74(0xfa):'none';});function updateTemplatePosition(){const _0x100590=_0x26a2a1;overlay[_0x100590(0xdc)]['transform']=_0x100590(0x13b)+(-camX*scale+templateX)+_0x100590(0x121)+(-camY*scale+templateY)+_0x100590(0x139)+scale+')',overlay[_0x100590(0xdc)]['transformOrigin']='top\x20left';}const oldRenderAll=renderAll;renderAll=function(){oldRenderAll();if(overlay['src'])updateTemplatePosition();};
