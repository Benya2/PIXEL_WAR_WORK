const _0x27455e=_0x4b83;(function(_0x4aca1e,_0xfe8f0c){const _0x5d7f82=_0x4b83,_0x5c2769=_0x4aca1e();while(!![]){try{const _0x37f7c3=parseInt(_0x5d7f82(0x108))/0x1+-parseInt(_0x5d7f82(0xc5))/0x2+parseInt(_0x5d7f82(0xea))/0x3*(-parseInt(_0x5d7f82(0xd8))/0x4)+parseInt(_0x5d7f82(0xdf))/0x5+parseInt(_0x5d7f82(0xd4))/0x6*(-parseInt(_0x5d7f82(0x12b))/0x7)+-parseInt(_0x5d7f82(0x11b))/0x8+parseInt(_0x5d7f82(0xe6))/0x9*(parseInt(_0x5d7f82(0x114))/0xa);if(_0x37f7c3===_0xfe8f0c)break;else _0x5c2769['push'](_0x5c2769['shift']());}catch(_0x314f67){_0x5c2769['push'](_0x5c2769['shift']());}}}(_0x5dc7,0x24939));import{initializeApp}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js';import{getFirestore,collection,doc,setDoc,onSnapshot,deleteDoc,getDocs}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js';import{getDatabase,ref,remove}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js';import{getAuth,onAuthStateChanged,signInWithEmailAndPassword,createUserWithEmailAndPassword,signOut}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-auth.js';const firebaseConfig={'apiKey':_0x27455e(0xeb),'authDomain':'pixellox.firebaseapp.com','projectId':'pixellox','storageBucket':'pixellox.firebasestorage.app','messagingSenderId':_0x27455e(0xf5),'appId':_0x27455e(0x9c)},app=initializeApp(firebaseConfig),db=getFirestore(app),rtdb=getDatabase(app),auth=getAuth(app),coordsDisplayEl=document[_0x27455e(0xa0)](_0x27455e(0x116)),colorsChoiceEl=document['getElementById'](_0x27455e(0xec)),paletteToggle=document[_0x27455e(0xa0)]('paletteToggle'),game=document[_0x27455e(0xa0)](_0x27455e(0xdc)),ctx=game[_0x27455e(0xd9)]('2d'),cursor=document[_0x27455e(0xa0)](_0x27455e(0xfa)),reloadTimerEl=document[_0x27455e(0xa0)](_0x27455e(0xbc)),adminPanel=document[_0x27455e(0xa0)](_0x27455e(0xe3)),clearAllPixelsBtn=document['getElementById'](_0x27455e(0x127)),banUserBtn=document[_0x27455e(0xa0)](_0x27455e(0xb9)),authButton=document[_0x27455e(0xa0)]('authButton'),coordsInput=document[_0x27455e(0xa0)](_0x27455e(0xbe)),addPixelBtn=document['getElementById'](_0x27455e(0xcc)),removePixelBtn=document[_0x27455e(0xa0)](_0x27455e(0xce)),teleportInput=document[_0x27455e(0xa0)](_0x27455e(0xc3)),teleportBtn=document[_0x27455e(0xa0)]('teleportBtn');teleportBtn[_0x27455e(0xf2)]('click',()=>{const _0x102477=_0x27455e;if(!auth[_0x102477(0x119)]||auth[_0x102477(0x119)]['email']!=='logo100153@gmail.com')return alert(_0x102477(0xbf));const _0x27b589=teleportInput[_0x102477(0x120)]['trim']();if(!_0x27b589)return;const [_0x5cddcd,_0x2cbb8e]=_0x27b589['split'](/\s+/),_0x1e261f=parseInt(_0x5cddcd),_0x56b9dd=parseInt(_0x2cbb8e);if(Number[_0x102477(0xb2)](_0x1e261f)||Number['isNaN'](_0x56b9dd))return alert(_0x102477(0xa9));const _0x14a233=_0x1e261f*gridCellSize,_0x4c3962=_0x56b9dd*gridCellSize;camX=_0x14a233-game[_0x102477(0xf9)]/0x2/scale,camY=_0x4c3962-game[_0x102477(0xbd)]/0x2/scale,renderAll();}),ctx[_0x27455e(0x9f)]=![];const gridCellSize=0xa;game[_0x27455e(0xf9)]=0x4b0,game[_0x27455e(0xbd)]=0x258;let currentColor=_0x27455e(0x10c),canPlace=!![];const reloadTime=0x5,colors=[_0x27455e(0x12c),_0x27455e(0xda),_0x27455e(0x115),_0x27455e(0xcd),_0x27455e(0xc1),_0x27455e(0xff),'rgb(136,\x20136,\x20136)','rgb(229,\x20217,\x200)',_0x27455e(0xd1),_0x27455e(0xbb),'rgb(0,\x200,\x200)',_0x27455e(0xb3),_0x27455e(0xb4),_0x27455e(0x106),'rgb(255,\x20167,\x20209)',_0x27455e(0xb7),_0x27455e(0xf6),'rgb(202,\x20227,\x20255)','rgb(255,\x20101,\x20101)','rgb(0,\x20211,\x20221)','rgb(229,\x200,\x200)',_0x27455e(0xe5),_0x27455e(0x105),_0x27455e(0x10d),'rgb(254,\x20164,\x2096)',_0x27455e(0xfd),_0x27455e(0xde),_0x27455e(0xdb),_0x27455e(0xd2),_0x27455e(0x129)];colorsChoiceEl['innerHTML']='',colors['forEach'](_0x31664d=>{const _0x20c424=_0x27455e,_0x33b067=document[_0x20c424(0x99)](_0x20c424(0xad));_0x33b067[_0x20c424(0xb5)][_0x20c424(0x122)]=_0x31664d,_0x33b067[_0x20c424(0xf2)](_0x20c424(0x97),()=>{const _0x355edf=_0x20c424;currentColor=_0x31664d,document[_0x355edf(0x12a)](_0x355edf(0x113))[_0x355edf(0xaa)](_0x3130b6=>_0x3130b6[_0x355edf(0xfb)][_0x355edf(0xd6)](_0x355edf(0xf8))),_0x33b067['classList'][_0x355edf(0x11f)](_0x355edf(0xf8));}),colorsChoiceEl[_0x20c424(0x117)](_0x33b067);});const colorsChoice=document[_0x27455e(0xa0)]('colorsChoice'),togglePalette=document[_0x27455e(0xa0)]('togglePalette');togglePalette['addEventListener'](_0x27455e(0x97),()=>{const _0x1e13cf=_0x27455e;colorsChoice[_0x1e13cf(0xb5)][_0x1e13cf(0xd7)]===_0x1e13cf(0x12f)?colorsChoice[_0x1e13cf(0xb5)]['display']=_0x1e13cf(0x10f):colorsChoice[_0x1e13cf(0xb5)][_0x1e13cf(0xd7)]=_0x1e13cf(0x12f);});const worldMap=new Image();worldMap[_0x27455e(0x9e)]='world.png';const SCALE_TILE=0x28;let WORLD_W=0x4e20*SCALE_TILE,WORLD_H=0x4e20*SCALE_TILE,camX=0x0,camY=0x0,scale=0x1;const MIN_SCALE=0.005,MAX_SCALE=0x6;let isPanning=![],lastMouseX=0x0,lastMouseY=0x0;function clamp(_0x13e00a,_0x35d996,_0x37c5d1){const _0x3d7383=_0x27455e;return Math['max'](_0x35d996,Math[_0x3d7383(0x11a)](_0x37c5d1,_0x13e00a));}function screenToWorld(_0x3046ae,_0x44e438){const _0x423f38=_0x27455e,_0x2ea7ba=game[_0x423f38(0xe7)](),_0x1227be=(_0x3046ae-_0x2ea7ba[_0x423f38(0xd5)])/scale+camX,_0x4d776b=(_0x44e438-_0x2ea7ba[_0x423f38(0x111)])/scale+camY;return[_0x1227be,_0x4d776b];}function _0x5dc7(){const _0x54ba96=['createElement','clearRect','toDataURL','1:461991610382:web:2a5ae293dde4a754c2d45f','\x20пикселей:\x20','src','imageSmoothingEnabled','getElementById','button','setTransform','naturalWidth','uid','metaKey','\x20sec','data','mousemove','Введите\x20корректные\x20координаты\x20X\x20Y','forEach','message','wheel','div','touches','beginPath','Введите\x20UserID\x20для\x20бана:','touchstart','isNaN','rgb(2,\x20190,\x201)','rgb(244,\x20179,\x20174)','style','Пользователь\x20забанен!','rgb(0,\x20101,\x2019)','deltaY','banUser','users/','rgb(148,\x20224,\x2068)','reloadTimer','height','coordsInput','Только\x20админ!','lineTo','rgb(196,\x20196,\x20196)','block','teleportInput','set','406124KuEvqI','Login\x20to\x20draw!','Online\x20players:\x20','push','#eef6ff','moveTo','Enter\x201\x20to\x20sign\x20in,\x20or\x202\x20to\x20create\x20a\x20new\x20account:','addPixelBtn','rgb(245,\x20223,\x20176)','removePixelBtn','stroke','then','rgb(78,\x2078,\x2078)','rgb(160,\x20106,\x2066)','clientY','848898JBMLAi','left','remove','display','12WIsYcc','getContext','rgb(96,\x2064,\x2040)','rgb(207,\x20110,\x20228)','game','color','rgb(229,\x20149,\x200)','411840lLLtJV','split','Email:','textContent','adminPanel','pixels','rgb(0,\x20131,\x20199)','9ELVKbF','getBoundingClientRect','Password:','keys','232098JpMViV','AIzaSyCwy4jVn9JIwXuIXVycYAv9EdPGPkgIJvA','colorsChoice','fillRect','error','#FFFFFF','floor','sqrt','addEventListener','onload','complete','461991610382','rgb(255,\x2084,\x20178)','altKey','selected','width','cursor','classList','naturalHeight','rgb(25,\x2025,\x20115)','Account\x20created!','rgb(255,\x20248,\x20137)','canvas','\x20\x20Y:\x20','img','contextmenu','trim','rgb(154,\x200,\x200)','rgb(104,\x20131,\x2056)','Удалено','287521vBjeNp','fillStyle','innerText','ceil','#000000','rgb(0,\x200,\x20234)','email','grid','drawImage','top','shiftKey','#colorsChoice\x20div','5210220qzSwjP','rgb(228,\x20228,\x20228)','coordsDisplay','appendChild','length','currentUser','min','1315608cBSEYW','Reload:\x20','clientX','#ccc','add','value','preventDefault','backgroundColor','ref','now','mousedown','Log\x20In','clearAllPixels','Добавлено','rgb(130,\x200,\x20128)','querySelectorAll','7yHTale','rgb(255,\x20255,\x20255)','logo100153@gmail.com','clear','none','click','image/png'];_0x5dc7=function(){return _0x54ba96;};return _0x5dc7();}function snapToGrid(_0xc6210c,_0x8396f5){return[Math['floor'](_0xc6210c/gridCellSize)*gridCellSize,Math['floor'](_0x8396f5/gridCellSize)*gridCellSize];}let hoverCellX=0x0,hoverCellY=0x0;const pixelsCache=new Map();let markers=[];function updateCoordsDisplay(){const _0x33d62a=_0x27455e;if(!coordsDisplayEl)return;const _0x477043=Math[_0x33d62a(0xf0)](hoverCellX/gridCellSize),_0x5393c6=Math[_0x33d62a(0xf0)](hoverCellY/gridCellSize);coordsDisplayEl[_0x33d62a(0xe2)]='X:\x20'+_0x477043+_0x33d62a(0x101)+_0x5393c6;}const TILE_SIZE=0x3e8;let tiles=[];const offscreenCanvas=document[_0x27455e(0x99)](_0x27455e(0x100));offscreenCanvas['width']=TILE_SIZE,offscreenCanvas[_0x27455e(0xbd)]=TILE_SIZE;const offCtx=offscreenCanvas['getContext']('2d',{'willReadFrequently':!![]});offCtx[_0x27455e(0x9f)]=![],worldMap[_0x27455e(0xf3)]=()=>{const _0x129e04=_0x27455e,_0x1b4905=worldMap['naturalWidth']||0x4e20,_0x1aef15=worldMap[_0x129e04(0xfc)]||0x4e20;WORLD_W=_0x1b4905*SCALE_TILE,WORLD_H=_0x1aef15*SCALE_TILE;const _0x3d7b4=Math['ceil'](_0x1b4905/TILE_SIZE),_0x4aea42=Math[_0x129e04(0x10b)](_0x1aef15/TILE_SIZE);tiles=[];for(let _0x9d3b60=0x0;_0x9d3b60<_0x3d7b4;_0x9d3b60++){for(let _0x2cef12=0x0;_0x2cef12<_0x4aea42;_0x2cef12++){const _0x45882c=_0x9d3b60*TILE_SIZE,_0x6f251b=_0x2cef12*TILE_SIZE,_0x4456ca=Math[_0x129e04(0x11a)](TILE_SIZE,_0x1b4905-_0x45882c),_0x2e9ebc=Math[_0x129e04(0x11a)](TILE_SIZE,_0x1aef15-_0x6f251b);offCtx[_0x129e04(0x9a)](0x0,0x0,TILE_SIZE,TILE_SIZE),offCtx['drawImage'](worldMap,_0x45882c,_0x6f251b,_0x4456ca,_0x2e9ebc,0x0,0x0,_0x4456ca,_0x2e9ebc);const _0x104a77=new Image();_0x104a77[_0x129e04(0x9e)]=offscreenCanvas[_0x129e04(0x9b)](_0x129e04(0x98));const _0x527cb7=_0x45882c*SCALE_TILE,_0x3e7f15=_0x6f251b*SCALE_TILE,_0x6b7a6d=_0x4456ca*SCALE_TILE,_0x91c73f=_0x2e9ebc*SCALE_TILE;tiles[_0x129e04(0xc8)]({'img':_0x104a77,'dx':_0x527cb7,'dy':_0x3e7f15,'dw':_0x6b7a6d,'dh':_0x91c73f});}}renderAll();};function renderAll(){const _0x2b39f5=_0x27455e;ctx[_0x2b39f5(0x9f)]=![],ctx[_0x2b39f5(0xa2)](0x1,0x0,0x0,0x1,0x0,0x0),ctx[_0x2b39f5(0x9a)](0x0,0x0,game[_0x2b39f5(0xf9)],game[_0x2b39f5(0xbd)]),ctx['setTransform'](scale,0x0,0x0,scale,-camX*scale,-camY*scale);const _0x30776e=camX,_0xbf42ab=camY,_0x839e=camX+game[_0x2b39f5(0xf9)]/scale,_0x1542e1=camY+game[_0x2b39f5(0xbd)]/scale;for(const _0x15d931 of tiles){if(_0x15d931['dx']+_0x15d931['dw']<_0x30776e||_0x15d931['dx']>_0x839e||_0x15d931['dy']+_0x15d931['dh']<_0xbf42ab||_0x15d931['dy']>_0x1542e1)continue;_0x15d931['img'][_0x2b39f5(0xf4)]&&_0x15d931[_0x2b39f5(0x102)][_0x2b39f5(0xa3)]?ctx[_0x2b39f5(0x110)](_0x15d931[_0x2b39f5(0x102)],_0x15d931['dx'],_0x15d931['dy'],_0x15d931['dw'],_0x15d931['dh']):(ctx['fillStyle']=_0x2b39f5(0xc9),ctx[_0x2b39f5(0xed)](_0x15d931['dx'],_0x15d931['dy'],_0x15d931['dw'],_0x15d931['dh']));}ctx[_0x2b39f5(0xaf)](),ctx['strokeStyle']=_0x2b39f5(0x11e);let _0x1a411e=Math[_0x2b39f5(0xf0)](_0x30776e/gridCellSize)*gridCellSize;for(let _0x4b0643=_0x1a411e;_0x4b0643<=_0x839e;_0x4b0643+=gridCellSize){ctx['moveTo'](_0x4b0643,_0xbf42ab),ctx[_0x2b39f5(0xc0)](_0x4b0643,_0x1542e1);}let _0x6ec295=Math[_0x2b39f5(0xf0)](_0xbf42ab/gridCellSize)*gridCellSize;for(let _0x2fdfbc=_0x6ec295;_0x2fdfbc<=_0x1542e1;_0x2fdfbc+=gridCellSize){ctx[_0x2b39f5(0xca)](_0x30776e,_0x2fdfbc),ctx[_0x2b39f5(0xc0)](_0x839e,_0x2fdfbc);}ctx[_0x2b39f5(0xcf)](),pixelsCache[_0x2b39f5(0xaa)](_0x367818=>{const _0x411c85=_0x2b39f5;_0x367818[_0x411c85(0xdd)]!==_0x411c85(0xef)&&(ctx[_0x411c85(0x109)]=_0x367818[_0x411c85(0xdd)],ctx[_0x411c85(0xed)](_0x367818['x'],_0x367818['y'],gridCellSize,gridCellSize));}),ctx[_0x2b39f5(0x109)]='rgba(255,0,0,0.5)';for(const [_0x2927d6,_0x4fa529]of markers){ctx[_0x2b39f5(0xed)](_0x2927d6,_0x4fa529,gridCellSize,gridCellSize);}ctx['fillStyle']='rgba(0,0,0,0.12)',ctx[_0x2b39f5(0xed)](hoverCellX,hoverCellY,gridCellSize,gridCellSize),ctx['setTransform'](0x1,0x0,0x0,0x1,0x0,0x0);}onSnapshot(collection(db,_0x27455e(0xe4)),_0x4fbfbc=>{const _0x98a59d=_0x27455e;pixelsCache[_0x98a59d(0x12e)](),_0x4fbfbc[_0x98a59d(0xaa)](_0x3a264e=>{const _0x97cce0=_0x98a59d,_0x419c79=_0x3a264e[_0x97cce0(0xa7)]();pixelsCache[_0x97cce0(0xc4)](_0x419c79['x']+'-'+_0x419c79['y'],_0x419c79);}),renderAll();}),game['addEventListener'](_0x27455e(0x125),_0x3dd4f0=>{const _0x78c63=_0x27455e;(_0x3dd4f0[_0x78c63(0xa1)]===0x1||_0x3dd4f0[_0x78c63(0xa1)]===0x2||_0x3dd4f0[_0x78c63(0x112)]||_0x3dd4f0['ctrlKey']||_0x3dd4f0[_0x78c63(0xa5)]||_0x3dd4f0[_0x78c63(0xf7)])&&(isPanning=!![],lastMouseX=_0x3dd4f0['clientX'],lastMouseY=_0x3dd4f0[_0x78c63(0xd3)],_0x3dd4f0[_0x78c63(0x121)]());}),window['addEventListener']('mouseup',()=>{isPanning=![];}),game[_0x27455e(0xf2)](_0x27455e(0x103),_0x2b8987=>_0x2b8987[_0x27455e(0x121)]()),game[_0x27455e(0xf2)](_0x27455e(0xa8),_0x53da57=>{const _0xa339f3=_0x27455e;if(isPanning){const _0x372d28=_0x53da57[_0xa339f3(0x11d)]-lastMouseX,_0x9c3ead=_0x53da57[_0xa339f3(0xd3)]-lastMouseY;camX-=_0x372d28/scale,camY-=_0x9c3ead/scale,lastMouseX=_0x53da57[_0xa339f3(0x11d)],lastMouseY=_0x53da57[_0xa339f3(0xd3)],renderAll();}const [_0x547ca5,_0x37d78b]=screenToWorld(_0x53da57[_0xa339f3(0x11d)],_0x53da57[_0xa339f3(0xd3)]);[hoverCellX,hoverCellY]=snapToGrid(_0x547ca5,_0x37d78b),updateCoordsDisplay(),renderAll();}),game[_0x27455e(0xf2)](_0x27455e(0xac),_0x53b11a=>{const _0x3e805f=_0x27455e;_0x53b11a[_0x3e805f(0x121)]();const _0xdf6965=1.1,[_0x563392,_0x51f91a]=screenToWorld(_0x53b11a['clientX'],_0x53b11a[_0x3e805f(0xd3)]),_0x16d211=_0x53b11a[_0x3e805f(0xb8)]<0x0?0x1:-0x1,_0x57e50e=clamp(scale*(_0x16d211>0x0?_0xdf6965:0x1/_0xdf6965),MIN_SCALE,MAX_SCALE);if(_0x57e50e===scale)return;scale=_0x57e50e;const _0x3b10e7=game[_0x3e805f(0xe7)]();camX=_0x563392-(_0x53b11a[_0x3e805f(0x11d)]-_0x3b10e7[_0x3e805f(0xd5)])/scale,camY=_0x51f91a-(_0x53b11a[_0x3e805f(0xd3)]-_0x3b10e7[_0x3e805f(0x111)])/scale;const [_0x5a4518,_0x207403]=screenToWorld(_0x53b11a[_0x3e805f(0x11d)],_0x53b11a[_0x3e805f(0xd3)]);[hoverCellX,hoverCellY]=snapToGrid(_0x5a4518,_0x207403),updateCoordsDisplay(),renderAll();},{'passive':![]});function _0x4b83(_0x30bad0,_0x1d9d51){const _0x5dc742=_0x5dc7();return _0x4b83=function(_0x4b8347,_0x3881fe){_0x4b8347=_0x4b8347-0x97;let _0xedbcb8=_0x5dc742[_0x4b8347];return _0xedbcb8;},_0x4b83(_0x30bad0,_0x1d9d51);}async function placePixelWithHover(){const _0x154f5a=_0x27455e;if(!auth[_0x154f5a(0x119)])return alert(_0x154f5a(0xc6));if(!canPlace)return;canPlace=![];const _0x192361=hoverCellX,_0x3ee4b4=hoverCellY,_0x4818de=doc(db,_0x154f5a(0xe4),_0x192361+'-'+_0x3ee4b4);try{if(currentColor===_0x154f5a(0xef))await deleteDoc(_0x4818de);else await setDoc(_0x4818de,{'x':_0x192361,'y':_0x3ee4b4,'color':currentColor});}catch(_0x9c6a5e){console[_0x154f5a(0xee)](_0x9c6a5e);}startReload();}game[_0x27455e(0xf2)](_0x27455e(0x97),_0x293225=>{if(isPanning||_0x293225['button']!==0x0)return;placePixelWithHover();});if(cursor)cursor[_0x27455e(0xb5)][_0x27455e(0xd7)]='none';function startReload(){const _0x3321a7=_0x27455e;let _0x287f10=reloadTime;reloadTimerEl[_0x3321a7(0x10a)]='Reload:\x20'+_0x287f10+_0x3321a7(0xa6);const _0x269b1b=setInterval(()=>{const _0x3ef518=_0x3321a7;_0x287f10--;if(_0x287f10<=0x0)clearInterval(_0x269b1b),canPlace=!![],reloadTimerEl[_0x3ef518(0x10a)]='Ready!';else reloadTimerEl[_0x3ef518(0x10a)]=_0x3ef518(0x11c)+_0x287f10+_0x3ef518(0xa6);},0x3e8);}authButton['addEventListener']('click',async()=>{const _0x3ec88c=_0x27455e;if(auth[_0x3ec88c(0x119)]){await signOut(auth);return;}const _0x543a28=prompt(_0x3ec88c(0xcb));if(!_0x543a28||_0x543a28!=='1'&&_0x543a28!=='2')return;const _0xabb978=prompt(_0x3ec88c(0xe1)),_0x4c571e=prompt(_0x3ec88c(0xe8));if(!_0xabb978||!_0x4c571e)return;try{_0x543a28==='1'?(await signInWithEmailAndPassword(auth,_0xabb978,_0x4c571e),alert('Come\x20in!')):(await createUserWithEmailAndPassword(auth,_0xabb978,_0x4c571e),alert(_0x3ec88c(0xfe)));}catch(_0x4e8efb){alert(_0x4e8efb[_0x3ec88c(0xab)]);}}),onAuthStateChanged(auth,_0x3434bc=>{const _0x2dbb38=_0x27455e;_0x3434bc?(authButton[_0x2dbb38(0xe2)]='Log\x20Out',_0x3434bc['email']==='logo100153@gmail.com'?adminPanel[_0x2dbb38(0xb5)][_0x2dbb38(0xd7)]=_0x2dbb38(0xc2):adminPanel[_0x2dbb38(0xb5)][_0x2dbb38(0xd7)]='none'):(authButton[_0x2dbb38(0xe2)]=_0x2dbb38(0x126),adminPanel[_0x2dbb38(0xb5)][_0x2dbb38(0xd7)]=_0x2dbb38(0x12f));});function parseCoords(){const _0xdee539=_0x27455e;markers=[];const _0x5875d9=coordsInput[_0xdee539(0x120)]['trim']();if(!_0x5875d9){renderAll();return;}_0x5875d9[_0xdee539(0xe0)](',')[_0xdee539(0xaa)](_0x1ff23b=>{const _0x24c937=_0xdee539,[_0x54e1c9,_0x525286,_0x26f1a3,_0x4e368c]=_0x1ff23b[_0x24c937(0x104)]()[_0x24c937(0xe0)](/\s+/),_0x7e9dfe=parseInt(_0x54e1c9),_0x3c4280=parseInt(_0x525286),_0x54996f=parseInt(_0x26f1a3||'1'),_0x5ca316=parseInt(_0x4e368c||'1');if(Number['isNaN'](_0x7e9dfe)||Number[_0x24c937(0xb2)](_0x3c4280)||Number[_0x24c937(0xb2)](_0x54996f)||Number['isNaN'](_0x5ca316))return;const _0x31da2a=_0x7e9dfe*gridCellSize,_0x27cffd=_0x3c4280*gridCellSize;for(let _0x234ac3=0x0;_0x234ac3<_0x54996f;_0x234ac3++){for(let _0x58c2ee=0x0;_0x58c2ee<_0x5ca316;_0x58c2ee++){const _0x3b2dfe=_0x31da2a+_0x234ac3*gridCellSize,_0x2db8cf=_0x27cffd+_0x58c2ee*gridCellSize;_0x3b2dfe>=0x0&&_0x2db8cf>=0x0&&_0x3b2dfe<=WORLD_W-gridCellSize&&_0x2db8cf<=WORLD_H-gridCellSize&&markers[_0x24c937(0xc8)]([_0x3b2dfe,_0x2db8cf]);}}}),renderAll();}coordsInput['addEventListener']('input',parseCoords);async function adminApplyPixels(_0x5ddb66){const _0x476a85=_0x27455e;if(!auth[_0x476a85(0x119)]||auth[_0x476a85(0x119)][_0x476a85(0x10e)]!==_0x476a85(0x12d))return alert(_0x476a85(0xbf));parseCoords();let _0x14d804=0x0;for(const [_0x344e3a,_0x47bd5e]of markers){const _0x16f86a=doc(db,'pixels',_0x344e3a+'-'+_0x47bd5e);_0x5ddb66===_0x476a85(0x11f)?(await setDoc(_0x16f86a,{'x':_0x344e3a,'y':_0x47bd5e,'color':currentColor}),_0x14d804++):(await deleteDoc(_0x16f86a),_0x14d804++);}alert((_0x5ddb66===_0x476a85(0x11f)?_0x476a85(0x128):_0x476a85(0x107))+_0x476a85(0x9d)+_0x14d804);}addPixelBtn[_0x27455e(0xf2)](_0x27455e(0x97),()=>adminApplyPixels(_0x27455e(0x11f))),removePixelBtn[_0x27455e(0xf2)](_0x27455e(0x97),()=>adminApplyPixels(_0x27455e(0xd6))),clearAllPixelsBtn['addEventListener']('click',async()=>{const _0x372d93=_0x27455e;if(!auth[_0x372d93(0x119)])return alert(_0x372d93(0xbf));const _0x789680=await getDocs(collection(db,_0x372d93(0xe4)));_0x789680[_0x372d93(0xaa)](_0x3e08a3=>deleteDoc(_0x3e08a3[_0x372d93(0x123)]));}),banUserBtn[_0x27455e(0xf2)](_0x27455e(0x97),()=>{const _0x463057=_0x27455e;if(!auth['currentUser'])return alert(_0x463057(0xbf));const _0x4e887b=prompt(_0x463057(0xb0));if(!_0x4e887b)return;const _0x503ff0=ref(rtdb,_0x463057(0xba)+_0x4e887b);remove(_0x503ff0)[_0x463057(0xd0)](()=>alert(_0x463057(0xb6)))['catch'](_0x3ce224=>console['error'](_0x3ce224));});import{onDisconnect,set}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js';function trackOnlinePlayer(){const _0x36774d=_0x27455e;if(!auth[_0x36774d(0x119)])return;const _0x9e3807=auth[_0x36774d(0x119)][_0x36774d(0xa4)],_0x5f2964=ref(rtdb,_0x36774d(0xba)+_0x9e3807);set(_0x5f2964,{'email':auth[_0x36774d(0x119)][_0x36774d(0x10e)],'lastSeen':Date[_0x36774d(0x124)]()}),onDisconnect(_0x5f2964)[_0x36774d(0xd6)]();}onAuthStateChanged(auth,_0xf5facc=>{_0xf5facc&&trackOnlinePlayer();});function updateOnlinePlayers(){const _0x57fdb6=ref(rtdb,'users/');onValue(_0x57fdb6,_0x2dba89=>{const _0x2c70c4=_0x4b83,_0x143f58=_0x2dba89['val'](),_0x214e94=_0x143f58?Object[_0x2c70c4(0xe9)](_0x143f58)['length']:0x0;onlinePlayersEl[_0x2c70c4(0x10a)]=_0x2c70c4(0xc7)+_0x214e94;});}updateOnlinePlayers();let lastTouchX=0x0,lastTouchY=0x0,isTouchPanning=![],lastTouchDist=0x0;function getTouchDist(_0x3e70bc){const _0x388ba8=_0x27455e;if(_0x3e70bc['length']<0x2)return 0x0;const _0x14dd0b=_0x3e70bc[0x0][_0x388ba8(0x11d)]-_0x3e70bc[0x1][_0x388ba8(0x11d)],_0x465aca=_0x3e70bc[0x0][_0x388ba8(0xd3)]-_0x3e70bc[0x1][_0x388ba8(0xd3)];return Math[_0x388ba8(0xf1)](_0x14dd0b*_0x14dd0b+_0x465aca*_0x465aca);}game['addEventListener'](_0x27455e(0xb1),_0x264e0a=>{const _0x20906d=_0x27455e;if(_0x264e0a['touches'][_0x20906d(0x118)]===0x1)isTouchPanning=!![],lastTouchX=_0x264e0a[_0x20906d(0xae)][0x0][_0x20906d(0x11d)],lastTouchY=_0x264e0a[_0x20906d(0xae)][0x0]['clientY'];else _0x264e0a[_0x20906d(0xae)][_0x20906d(0x118)]===0x2&&(lastTouchDist=getTouchDist(_0x264e0a[_0x20906d(0xae)]));}),game['addEventListener']('touchmove',_0x55d2a2=>{const _0x370df8=_0x27455e;if(_0x55d2a2[_0x370df8(0xae)]['length']===0x1&&isTouchPanning){const _0x3afae1=_0x55d2a2[_0x370df8(0xae)][0x0],_0x47878e=_0x3afae1[_0x370df8(0x11d)]-lastTouchX,_0x37f74f=_0x3afae1[_0x370df8(0xd3)]-lastTouchY;camX-=_0x47878e/scale,camY-=_0x37f74f/scale,lastTouchX=_0x3afae1[_0x370df8(0x11d)],lastTouchY=_0x3afae1[_0x370df8(0xd3)],renderAll(),_0x55d2a2[_0x370df8(0x121)]();}else{if(_0x55d2a2[_0x370df8(0xae)]['length']===0x2){const _0x5f3b88=getTouchDist(_0x55d2a2[_0x370df8(0xae)]);if(lastTouchDist>0x0){const _0x34b5e7=_0x5f3b88/lastTouchDist,_0xbfd700=game[_0x370df8(0xe7)](),_0x405b84=(_0x55d2a2[_0x370df8(0xae)][0x0][_0x370df8(0x11d)]+_0x55d2a2[_0x370df8(0xae)][0x1][_0x370df8(0x11d)])/0x2,_0x288f18=(_0x55d2a2['touches'][0x0][_0x370df8(0xd3)]+_0x55d2a2[_0x370df8(0xae)][0x1][_0x370df8(0xd3)])/0x2,[_0x31fbed,_0x851865]=screenToWorld(_0x405b84,_0x288f18);scale=clamp(scale*_0x34b5e7,MIN_SCALE,MAX_SCALE),camX=_0x31fbed-(_0x405b84-_0xbfd700[_0x370df8(0xd5)])/scale,camY=_0x851865-(_0x288f18-_0xbfd700[_0x370df8(0x111)])/scale;const [_0x24d5e5,_0x2ae8c3]=screenToWorld(_0x405b84,_0x288f18);[hoverCellX,hoverCellY]=snapToGrid(_0x24d5e5,_0x2ae8c3),updateCoordsDisplay(),renderAll();}lastTouchDist=_0x5f3b88,_0x55d2a2['preventDefault']();}}},{'passive':![]}),game[_0x27455e(0xf2)]('touchend',_0x32f1f1=>{const _0xa1f085=_0x27455e;_0x32f1f1[_0xa1f085(0xae)][_0xa1f085(0x118)]===0x0&&(isTouchPanning=![],lastTouchDist=0x0);});
