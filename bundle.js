const _0x3c6166=_0x53b0;(function(_0x44be66,_0x4e004b){const _0x213540=_0x53b0,_0x108a87=_0x44be66();while(!![]){try{const _0x3c3ad2=-parseInt(_0x213540(0xfa))/0x1+-parseInt(_0x213540(0xc6))/0x2*(-parseInt(_0x213540(0xd0))/0x3)+-parseInt(_0x213540(0x73))/0x4+parseInt(_0x213540(0x9f))/0x5+parseInt(_0x213540(0xa0))/0x6+-parseInt(_0x213540(0x72))/0x7*(-parseInt(_0x213540(0xf8))/0x8)+parseInt(_0x213540(0xb6))/0x9;if(_0x3c3ad2===_0x4e004b)break;else _0x108a87['push'](_0x108a87['shift']());}catch(_0x35450e){_0x108a87['push'](_0x108a87['shift']());}}}(_0x3360,0xca6a1));import{initializeApp}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js';import{getFirestore,collection,doc,setDoc,onSnapshot,deleteDoc,getDocs}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js';import{getDatabase,ref,remove}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js';import{getAuth,onAuthStateChanged,signInWithEmailAndPassword,createUserWithEmailAndPassword,signOut}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-auth.js';const firebaseConfig={'apiKey':'AIzaSyCwy4jVn9JIwXuIXVycYAv9EdPGPkgIJvA','authDomain':'pixellox.firebaseapp.com','projectId':_0x3c6166(0xb0),'storageBucket':_0x3c6166(0xac),'messagingSenderId':_0x3c6166(0xab),'appId':_0x3c6166(0xb9)},app=initializeApp(firebaseConfig),db=getFirestore(app),rtdb=getDatabase(app),auth=getAuth(app),coordsDisplayEl=document['getElementById'](_0x3c6166(0x9c)),colorsChoiceEl=document[_0x3c6166(0x7b)]('colorsChoice'),paletteToggle=document['getElementById'](_0x3c6166(0xae)),game=document[_0x3c6166(0x7b)]('game'),ctx=game[_0x3c6166(0xd2)]('2d'),cursor=document['getElementById'](_0x3c6166(0xb8)),reloadTimerEl=document[_0x3c6166(0x7b)](_0x3c6166(0xfb)),adminPanel=document[_0x3c6166(0x7b)]('adminPanel'),clearAllPixelsBtn=document['getElementById'](_0x3c6166(0x71)),banUserBtn=document['getElementById'](_0x3c6166(0xa4)),authButton=document[_0x3c6166(0x7b)](_0x3c6166(0xd4)),coordsInput=document[_0x3c6166(0x7b)](_0x3c6166(0xa3)),addPixelBtn=document[_0x3c6166(0x7b)]('addPixelBtn'),removePixelBtn=document[_0x3c6166(0x7b)]('removePixelBtn'),teleportInput=document['getElementById'](_0x3c6166(0xa9)),teleportBtn=document[_0x3c6166(0x7b)](_0x3c6166(0x6b));teleportBtn[_0x3c6166(0x95)](_0x3c6166(0x82),()=>{const _0x31675a=_0x3c6166;if(!auth[_0x31675a(0xd3)]||auth[_0x31675a(0xd3)]['email']!=='logo100153@gmail.com')return alert('Только\x20админ!');const _0x2bcaa4=teleportInput[_0x31675a(0x7c)][_0x31675a(0xc5)]();if(!_0x2bcaa4)return;const [_0x409469,_0x38b286]=_0x2bcaa4[_0x31675a(0xe4)](/\s+/),_0x300c3d=parseInt(_0x409469),_0x293291=parseInt(_0x38b286);if(Number[_0x31675a(0xed)](_0x300c3d)||Number[_0x31675a(0xed)](_0x293291))return alert(_0x31675a(0xd8));const _0x1b1959=_0x300c3d*gridCellSize,_0x4b5d5d=_0x293291*gridCellSize;camX=_0x1b1959-game[_0x31675a(0xc8)]/0x2/scale,camY=_0x4b5d5d-game[_0x31675a(0xc7)]/0x2/scale,renderAll();}),ctx['imageSmoothingEnabled']=![];const gridCellSize=0xa;game[_0x3c6166(0xc8)]=0x4b0,game[_0x3c6166(0xc7)]=0x258;let currentColor='#000000',canPlace=!![];const reloadTime=0x5,colors=[_0x3c6166(0x9d),_0x3c6166(0x8e),_0x3c6166(0xe5),_0x3c6166(0xd7),_0x3c6166(0xc4),'rgb(255,\x20248,\x20137)',_0x3c6166(0xf9),'rgb(229,\x20217,\x200)','rgb(78,\x2078,\x2078)',_0x3c6166(0xe1),_0x3c6166(0xfd),_0x3c6166(0xbe),'rgb(244,\x20179,\x20174)','rgb(104,\x20131,\x2056)','rgb(255,\x20167,\x20209)',_0x3c6166(0xa2),'rgb(255,\x2084,\x20178)',_0x3c6166(0x99),_0x3c6166(0xb7),_0x3c6166(0xf6),_0x3c6166(0xd1),_0x3c6166(0x88),_0x3c6166(0xbb),_0x3c6166(0x97),_0x3c6166(0xe3),_0x3c6166(0x70),_0x3c6166(0xe0),_0x3c6166(0x9a),_0x3c6166(0xea),'rgb(130,\x200,\x20128)'];function _0x3360(){const _0x21483c=['floor','rgb(245,\x20223,\x20176)','Введите\x20корректные\x20координаты\x20X\x20Y','keys','naturalWidth','#colorsChoice\x20div','naturalHeight','moveTo','color','setTransform','rgb(229,\x20149,\x200)','rgb(148,\x20224,\x2068)','createElement','rgb(254,\x20164,\x2096)','split','rgb(228,\x20228,\x20228)','touches','style','toDataURL','clearRect','rgb(160,\x20106,\x2066)','imageSmoothingEnabled','world.png','isNaN','metaKey','ceil','top','onload','users/','selected','ctrlKey','data','rgb(0,\x20211,\x20221)','error','88WDqdCU','rgb(136,\x20136,\x20136)','1555291SkIEKF','reloadTimer','#ccc','rgb(0,\x200,\x200)','contextmenu','Password:','teleportBtn','mousemove','classList','none','\x20sec','rgb(25,\x2025,\x20115)','clearAllPixels','10927xLgqOz','2847636SshnkM','add','complete','email','Email:','wheel','Reload:\x20','then','getElementById','value','Только\x20админ!','Добавлено','clientY','img','Ready!','click','Online\x20players:\x20','getBoundingClientRect','touchend','backgroundColor','Account\x20created!','rgb(0,\x20131,\x20199)','length','pixels','Enter\x201\x20to\x20sign\x20in,\x20or\x202\x20to\x20create\x20a\x20new\x20account:','rgba(0,0,0,0.12)','fillStyle','rgb(96,\x2064,\x2040)','textContent','touchstart','Come\x20in!','image/png','push','logo100153@gmail.com','addEventListener','set','rgb(0,\x200,\x20234)','min','rgb(202,\x20227,\x20255)','rgb(207,\x20110,\x20228)','forEach','coordsDisplay','rgb(255,\x20255,\x20255)','Login\x20to\x20draw!','1118530ayQYKi','3556716xgVLjP','val','rgb(0,\x20101,\x2019)','coordsInput','banUser','Log\x20Out','\x20пикселей:\x20','querySelectorAll','display','teleportInput','now','461991610382','pixellox.firebasestorage.app','preventDefault','paletteToggle','#eef6ff','pixellox','fillRect','uid','button','Пользователь\x20забанен!','#FFFFFF','16612497SDqpVi','rgb(255,\x20101,\x20101)','cursor','1:461991610382:web:2a5ae293dde4a754c2d45f','innerText','rgb(154,\x200,\x200)','appendChild','src','rgb(2,\x20190,\x201)','lineTo','clientX','grid','remove','drawImage','rgb(196,\x20196,\x20196)','trim','26ALsENS','height','width','beginPath','Введите\x20UserID\x20для\x20бана:','max','mouseup','mousedown','div','canvas','96183lhiTRO','rgb(229,\x200,\x200)','getContext','currentUser','authButton','left'];_0x3360=function(){return _0x21483c;};return _0x3360();}colorsChoiceEl['innerHTML']='',colors[_0x3c6166(0x9b)](_0x38b835=>{const _0x1f8c6c=_0x3c6166,_0x29c596=document[_0x1f8c6c(0xe2)](_0x1f8c6c(0xce));_0x29c596[_0x1f8c6c(0xe7)][_0x1f8c6c(0x86)]=_0x38b835,_0x29c596[_0x1f8c6c(0x95)](_0x1f8c6c(0x82),()=>{const _0x5b07dc=_0x1f8c6c;currentColor=_0x38b835,document[_0x5b07dc(0xa7)](_0x5b07dc(0xdb))['forEach'](_0x2f19ba=>_0x2f19ba[_0x5b07dc(0x6d)][_0x5b07dc(0xc2)](_0x5b07dc(0xf3))),_0x29c596['classList'][_0x5b07dc(0x74)](_0x5b07dc(0xf3));}),colorsChoiceEl[_0x1f8c6c(0xbc)](_0x29c596);});const colorsChoice=document[_0x3c6166(0x7b)]('colorsChoice'),togglePalette=document[_0x3c6166(0x7b)]('togglePalette');togglePalette[_0x3c6166(0x95)](_0x3c6166(0x82),()=>{const _0xcfbc83=_0x3c6166;colorsChoice[_0xcfbc83(0xe7)][_0xcfbc83(0xa8)]==='none'?colorsChoice[_0xcfbc83(0xe7)][_0xcfbc83(0xa8)]=_0xcfbc83(0xc1):colorsChoice[_0xcfbc83(0xe7)][_0xcfbc83(0xa8)]=_0xcfbc83(0x6e);});const worldMap=new Image();worldMap['src']=_0x3c6166(0xec);const SCALE_TILE=0x28;function _0x53b0(_0x3e7aa4,_0x2df936){const _0x336088=_0x3360();return _0x53b0=function(_0x53b043,_0x45a17c){_0x53b043=_0x53b043-0x6b;let _0x430f2a=_0x336088[_0x53b043];return _0x430f2a;},_0x53b0(_0x3e7aa4,_0x2df936);}let WORLD_W=0x4e20*SCALE_TILE,WORLD_H=0x4e20*SCALE_TILE,camX=0x0,camY=0x0,scale=0x1;const MIN_SCALE=0.005,MAX_SCALE=0x6;let isPanning=![],lastMouseX=0x0,lastMouseY=0x0;function clamp(_0x344277,_0x4d68cb,_0x23cd13){const _0x28b146=_0x3c6166;return Math[_0x28b146(0xcb)](_0x4d68cb,Math[_0x28b146(0x98)](_0x23cd13,_0x344277));}function screenToWorld(_0x5a1678,_0xf3ec1a){const _0xa13fd=_0x3c6166,_0x28caf0=game[_0xa13fd(0x84)](),_0x3270b6=(_0x5a1678-_0x28caf0['left'])/scale+camX,_0x2fad55=(_0xf3ec1a-_0x28caf0[_0xa13fd(0xf0)])/scale+camY;return[_0x3270b6,_0x2fad55];}function snapToGrid(_0x5260db,_0x176035){const _0x4e101c=_0x3c6166;return[Math['floor'](_0x5260db/gridCellSize)*gridCellSize,Math[_0x4e101c(0xd6)](_0x176035/gridCellSize)*gridCellSize];}let hoverCellX=0x0,hoverCellY=0x0;const pixelsCache=new Map();let markers=[];function updateCoordsDisplay(){if(!coordsDisplayEl)return;const _0x2a1f27=Math['floor'](hoverCellX/gridCellSize),_0x12c986=Math['floor'](hoverCellY/gridCellSize);coordsDisplayEl['textContent']='X:\x20'+_0x2a1f27+'\x20\x20Y:\x20'+_0x12c986;}const TILE_SIZE=0x3e8;let tiles=[];const offscreenCanvas=document[_0x3c6166(0xe2)](_0x3c6166(0xcf));offscreenCanvas[_0x3c6166(0xc8)]=TILE_SIZE,offscreenCanvas[_0x3c6166(0xc7)]=TILE_SIZE;const offCtx=offscreenCanvas[_0x3c6166(0xd2)]('2d',{'willReadFrequently':!![]});offCtx['imageSmoothingEnabled']=![],worldMap[_0x3c6166(0xf1)]=()=>{const _0x4cd6af=_0x3c6166,_0x3308b9=worldMap[_0x4cd6af(0xda)]||0x4e20,_0x371075=worldMap[_0x4cd6af(0xdc)]||0x4e20;WORLD_W=_0x3308b9*SCALE_TILE,WORLD_H=_0x371075*SCALE_TILE;const _0x576487=Math[_0x4cd6af(0xef)](_0x3308b9/TILE_SIZE),_0x8e49bf=Math['ceil'](_0x371075/TILE_SIZE);tiles=[];for(let _0x1d915f=0x0;_0x1d915f<_0x576487;_0x1d915f++){for(let _0x29cdc3=0x0;_0x29cdc3<_0x8e49bf;_0x29cdc3++){const _0x6f5cab=_0x1d915f*TILE_SIZE,_0x9b4951=_0x29cdc3*TILE_SIZE,_0x10ded6=Math['min'](TILE_SIZE,_0x3308b9-_0x6f5cab),_0x26e905=Math[_0x4cd6af(0x98)](TILE_SIZE,_0x371075-_0x9b4951);offCtx[_0x4cd6af(0xe9)](0x0,0x0,TILE_SIZE,TILE_SIZE),offCtx['drawImage'](worldMap,_0x6f5cab,_0x9b4951,_0x10ded6,_0x26e905,0x0,0x0,_0x10ded6,_0x26e905);const _0x15794f=new Image();_0x15794f[_0x4cd6af(0xbd)]=offscreenCanvas[_0x4cd6af(0xe8)](_0x4cd6af(0x92));const _0x3df595=_0x6f5cab*SCALE_TILE,_0x35e953=_0x9b4951*SCALE_TILE,_0x160c30=_0x10ded6*SCALE_TILE,_0x4b90de=_0x26e905*SCALE_TILE;tiles[_0x4cd6af(0x93)]({'img':_0x15794f,'dx':_0x3df595,'dy':_0x35e953,'dw':_0x160c30,'dh':_0x4b90de});}}renderAll();};function renderAll(){const _0x4188d9=_0x3c6166;ctx[_0x4188d9(0xeb)]=![],ctx[_0x4188d9(0xdf)](0x1,0x0,0x0,0x1,0x0,0x0),ctx[_0x4188d9(0xe9)](0x0,0x0,game[_0x4188d9(0xc8)],game[_0x4188d9(0xc7)]),ctx['setTransform'](scale,0x0,0x0,scale,-camX*scale,-camY*scale);const _0x416e18=camX,_0x1f9b01=camY,_0x13ae6f=camX+game[_0x4188d9(0xc8)]/scale,_0x32c320=camY+game[_0x4188d9(0xc7)]/scale;for(const _0x1fe92c of tiles){if(_0x1fe92c['dx']+_0x1fe92c['dw']<_0x416e18||_0x1fe92c['dx']>_0x13ae6f||_0x1fe92c['dy']+_0x1fe92c['dh']<_0x1f9b01||_0x1fe92c['dy']>_0x32c320)continue;_0x1fe92c[_0x4188d9(0x80)][_0x4188d9(0x75)]&&_0x1fe92c[_0x4188d9(0x80)]['naturalWidth']?ctx[_0x4188d9(0xc3)](_0x1fe92c[_0x4188d9(0x80)],_0x1fe92c['dx'],_0x1fe92c['dy'],_0x1fe92c['dw'],_0x1fe92c['dh']):(ctx['fillStyle']=_0x4188d9(0xaf),ctx[_0x4188d9(0xb1)](_0x1fe92c['dx'],_0x1fe92c['dy'],_0x1fe92c['dw'],_0x1fe92c['dh']));}ctx[_0x4188d9(0xc9)](),ctx['strokeStyle']=_0x4188d9(0xfc);let _0x13480a=Math['floor'](_0x416e18/gridCellSize)*gridCellSize;for(let _0xe87f35=_0x13480a;_0xe87f35<=_0x13ae6f;_0xe87f35+=gridCellSize){ctx[_0x4188d9(0xdd)](_0xe87f35,_0x1f9b01),ctx[_0x4188d9(0xbf)](_0xe87f35,_0x32c320);}let _0x24d4ee=Math[_0x4188d9(0xd6)](_0x1f9b01/gridCellSize)*gridCellSize;for(let _0x3d96bf=_0x24d4ee;_0x3d96bf<=_0x32c320;_0x3d96bf+=gridCellSize){ctx[_0x4188d9(0xdd)](_0x416e18,_0x3d96bf),ctx['lineTo'](_0x13ae6f,_0x3d96bf);}ctx['stroke'](),pixelsCache['forEach'](_0x3ab046=>{const _0x455c08=_0x4188d9;_0x3ab046[_0x455c08(0xde)]!==_0x455c08(0xb5)&&(ctx[_0x455c08(0x8d)]=_0x3ab046[_0x455c08(0xde)],ctx['fillRect'](_0x3ab046['x'],_0x3ab046['y'],gridCellSize,gridCellSize));}),ctx['fillStyle']='rgba(255,0,0,0.5)';for(const [_0x15ec15,_0x5003be]of markers){ctx['fillRect'](_0x15ec15,_0x5003be,gridCellSize,gridCellSize);}ctx[_0x4188d9(0x8d)]=_0x4188d9(0x8c),ctx[_0x4188d9(0xb1)](hoverCellX,hoverCellY,gridCellSize,gridCellSize),ctx[_0x4188d9(0xdf)](0x1,0x0,0x0,0x1,0x0,0x0);}onSnapshot(collection(db,_0x3c6166(0x8a)),_0x5d6d55=>{pixelsCache['clear'](),_0x5d6d55['forEach'](_0x52c1e5=>{const _0x5e09b4=_0x53b0,_0x39820d=_0x52c1e5[_0x5e09b4(0xf5)]();pixelsCache[_0x5e09b4(0x96)](_0x39820d['x']+'-'+_0x39820d['y'],_0x39820d);}),renderAll();}),game[_0x3c6166(0x95)](_0x3c6166(0xcd),_0x760e63=>{const _0x32e190=_0x3c6166;(_0x760e63[_0x32e190(0xb3)]===0x1||_0x760e63[_0x32e190(0xb3)]===0x2||_0x760e63['shiftKey']||_0x760e63[_0x32e190(0xf4)]||_0x760e63[_0x32e190(0xee)]||_0x760e63['altKey'])&&(isPanning=!![],lastMouseX=_0x760e63[_0x32e190(0xc0)],lastMouseY=_0x760e63[_0x32e190(0x7f)],_0x760e63[_0x32e190(0xad)]());}),window[_0x3c6166(0x95)](_0x3c6166(0xcc),()=>{isPanning=![];}),game[_0x3c6166(0x95)](_0x3c6166(0xfe),_0x2dd045=>_0x2dd045[_0x3c6166(0xad)]()),game['addEventListener'](_0x3c6166(0x6c),_0x145d53=>{const _0x4a9009=_0x3c6166;if(isPanning){const _0x596e06=_0x145d53[_0x4a9009(0xc0)]-lastMouseX,_0x27938b=_0x145d53[_0x4a9009(0x7f)]-lastMouseY;camX-=_0x596e06/scale,camY-=_0x27938b/scale,lastMouseX=_0x145d53[_0x4a9009(0xc0)],lastMouseY=_0x145d53[_0x4a9009(0x7f)],renderAll();}const [_0x24179e,_0x36a192]=screenToWorld(_0x145d53[_0x4a9009(0xc0)],_0x145d53['clientY']);[hoverCellX,hoverCellY]=snapToGrid(_0x24179e,_0x36a192),updateCoordsDisplay(),renderAll();}),game['addEventListener'](_0x3c6166(0x78),_0x5469d2=>{const _0x63098a=_0x3c6166;_0x5469d2[_0x63098a(0xad)]();const _0x5f3f71=1.1,[_0x113cfb,_0xc52244]=screenToWorld(_0x5469d2[_0x63098a(0xc0)],_0x5469d2[_0x63098a(0x7f)]),_0x4346a1=_0x5469d2['deltaY']<0x0?0x1:-0x1,_0x3f2bf4=clamp(scale*(_0x4346a1>0x0?_0x5f3f71:0x1/_0x5f3f71),MIN_SCALE,MAX_SCALE);if(_0x3f2bf4===scale)return;scale=_0x3f2bf4;const _0x16ad58=game['getBoundingClientRect']();camX=_0x113cfb-(_0x5469d2['clientX']-_0x16ad58[_0x63098a(0xd5)])/scale,camY=_0xc52244-(_0x5469d2['clientY']-_0x16ad58['top'])/scale;const [_0x47f0e0,_0x29707f]=screenToWorld(_0x5469d2[_0x63098a(0xc0)],_0x5469d2[_0x63098a(0x7f)]);[hoverCellX,hoverCellY]=snapToGrid(_0x47f0e0,_0x29707f),updateCoordsDisplay(),renderAll();},{'passive':![]});async function placePixelWithHover(){const _0x49c1a4=_0x3c6166;if(!auth[_0x49c1a4(0xd3)])return alert(_0x49c1a4(0x9e));if(!canPlace)return;canPlace=![];const _0xe35838=hoverCellX,_0x236dd7=hoverCellY,_0x1b3134=doc(db,_0x49c1a4(0x8a),_0xe35838+'-'+_0x236dd7);try{if(currentColor===_0x49c1a4(0xb5))await deleteDoc(_0x1b3134);else await setDoc(_0x1b3134,{'x':_0xe35838,'y':_0x236dd7,'color':currentColor});}catch(_0x17a8b6){console['error'](_0x17a8b6);}startReload();}game['addEventListener']('click',_0x4a17ce=>{const _0x25473b=_0x3c6166;if(isPanning||_0x4a17ce[_0x25473b(0xb3)]!==0x0)return;placePixelWithHover();});if(cursor)cursor[_0x3c6166(0xe7)]['display']=_0x3c6166(0x6e);function startReload(){const _0x34ba8e=_0x3c6166;let _0x5bd0e8=reloadTime;reloadTimerEl[_0x34ba8e(0xba)]=_0x34ba8e(0x79)+_0x5bd0e8+_0x34ba8e(0x6f);const _0x139c52=setInterval(()=>{const _0x362650=_0x34ba8e;_0x5bd0e8--;if(_0x5bd0e8<=0x0)clearInterval(_0x139c52),canPlace=!![],reloadTimerEl[_0x362650(0xba)]=_0x362650(0x81);else reloadTimerEl[_0x362650(0xba)]=_0x362650(0x79)+_0x5bd0e8+_0x362650(0x6f);},0x3e8);}authButton[_0x3c6166(0x95)](_0x3c6166(0x82),async()=>{const _0x25df5b=_0x3c6166;if(auth[_0x25df5b(0xd3)]){await signOut(auth);return;}const _0x30c7c3=prompt(_0x25df5b(0x8b));if(!_0x30c7c3||_0x30c7c3!=='1'&&_0x30c7c3!=='2')return;const _0x559eb8=prompt(_0x25df5b(0x77)),_0x582a4c=prompt(_0x25df5b(0xff));if(!_0x559eb8||!_0x582a4c)return;try{_0x30c7c3==='1'?(await signInWithEmailAndPassword(auth,_0x559eb8,_0x582a4c),alert(_0x25df5b(0x91))):(await createUserWithEmailAndPassword(auth,_0x559eb8,_0x582a4c),alert(_0x25df5b(0x87)));}catch(_0x3a3bfd){alert(_0x3a3bfd['message']);}}),onAuthStateChanged(auth,_0x1a09e2=>{const _0x311ada=_0x3c6166;_0x1a09e2?(authButton[_0x311ada(0x8f)]=_0x311ada(0xa5),_0x1a09e2['email']===_0x311ada(0x94)?adminPanel[_0x311ada(0xe7)][_0x311ada(0xa8)]='block':adminPanel[_0x311ada(0xe7)][_0x311ada(0xa8)]=_0x311ada(0x6e)):(authButton[_0x311ada(0x8f)]='Log\x20In',adminPanel[_0x311ada(0xe7)][_0x311ada(0xa8)]=_0x311ada(0x6e));});function parseCoords(){const _0x3a36d5=_0x3c6166;markers=[];const _0x2b3ddd=coordsInput[_0x3a36d5(0x7c)][_0x3a36d5(0xc5)]();if(!_0x2b3ddd){renderAll();return;}_0x2b3ddd['split'](',')['forEach'](_0xd2b141=>{const _0x7f5f50=_0x3a36d5,[_0x4d9169,_0x2ea14f,_0x2a7919,_0x321174]=_0xd2b141[_0x7f5f50(0xc5)]()[_0x7f5f50(0xe4)](/\s+/),_0x4543b1=parseInt(_0x4d9169),_0xcac27e=parseInt(_0x2ea14f),_0x5ca33e=parseInt(_0x2a7919||'1'),_0x46536a=parseInt(_0x321174||'1');if(Number['isNaN'](_0x4543b1)||Number[_0x7f5f50(0xed)](_0xcac27e)||Number[_0x7f5f50(0xed)](_0x5ca33e)||Number['isNaN'](_0x46536a))return;const _0x5230ef=_0x4543b1*gridCellSize,_0x4d70ad=_0xcac27e*gridCellSize;for(let _0x41b574=0x0;_0x41b574<_0x5ca33e;_0x41b574++){for(let _0x7440c9=0x0;_0x7440c9<_0x46536a;_0x7440c9++){const _0x3414ac=_0x5230ef+_0x41b574*gridCellSize,_0x28a5f8=_0x4d70ad+_0x7440c9*gridCellSize;_0x3414ac>=0x0&&_0x28a5f8>=0x0&&_0x3414ac<=WORLD_W-gridCellSize&&_0x28a5f8<=WORLD_H-gridCellSize&&markers['push']([_0x3414ac,_0x28a5f8]);}}}),renderAll();}coordsInput[_0x3c6166(0x95)]('input',parseCoords);async function adminApplyPixels(_0x5b4106){const _0x2d7ac8=_0x3c6166;if(!auth[_0x2d7ac8(0xd3)]||auth[_0x2d7ac8(0xd3)][_0x2d7ac8(0x76)]!=='logo100153@gmail.com')return alert('Только\x20админ!');parseCoords();let _0x5764f1=0x0;for(const [_0x3a420b,_0x2ed9ec]of markers){const _0x28d1ab=doc(db,_0x2d7ac8(0x8a),_0x3a420b+'-'+_0x2ed9ec);_0x5b4106===_0x2d7ac8(0x74)?(await setDoc(_0x28d1ab,{'x':_0x3a420b,'y':_0x2ed9ec,'color':currentColor}),_0x5764f1++):(await deleteDoc(_0x28d1ab),_0x5764f1++);}alert((_0x5b4106===_0x2d7ac8(0x74)?_0x2d7ac8(0x7e):'Удалено')+_0x2d7ac8(0xa6)+_0x5764f1);}addPixelBtn[_0x3c6166(0x95)](_0x3c6166(0x82),()=>adminApplyPixels(_0x3c6166(0x74))),removePixelBtn['addEventListener'](_0x3c6166(0x82),()=>adminApplyPixels(_0x3c6166(0xc2))),clearAllPixelsBtn[_0x3c6166(0x95)](_0x3c6166(0x82),async()=>{const _0x58323a=_0x3c6166;if(!auth[_0x58323a(0xd3)])return alert(_0x58323a(0x7d));const _0x344891=await getDocs(collection(db,_0x58323a(0x8a)));_0x344891[_0x58323a(0x9b)](_0x55b8f6=>deleteDoc(_0x55b8f6['ref']));}),banUserBtn[_0x3c6166(0x95)](_0x3c6166(0x82),()=>{const _0x4dc1b2=_0x3c6166;if(!auth[_0x4dc1b2(0xd3)])return alert(_0x4dc1b2(0x7d));const _0x22c419=prompt(_0x4dc1b2(0xca));if(!_0x22c419)return;const _0x4c1a4f=ref(rtdb,_0x4dc1b2(0xf2)+_0x22c419);remove(_0x4c1a4f)[_0x4dc1b2(0x7a)](()=>alert(_0x4dc1b2(0xb4)))['catch'](_0x329701=>console[_0x4dc1b2(0xf7)](_0x329701));});import{onDisconnect,set}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js';function trackOnlinePlayer(){const _0x1a37e8=_0x3c6166;if(!auth[_0x1a37e8(0xd3)])return;const _0x36df0c=auth[_0x1a37e8(0xd3)][_0x1a37e8(0xb2)],_0x280a1a=ref(rtdb,_0x1a37e8(0xf2)+_0x36df0c);set(_0x280a1a,{'email':auth[_0x1a37e8(0xd3)][_0x1a37e8(0x76)],'lastSeen':Date[_0x1a37e8(0xaa)]()}),onDisconnect(_0x280a1a)['remove']();}onAuthStateChanged(auth,_0xc75235=>{_0xc75235&&trackOnlinePlayer();});function updateOnlinePlayers(){const _0x25c185=_0x3c6166,_0x8ae4b3=ref(rtdb,_0x25c185(0xf2));onValue(_0x8ae4b3,_0x2fdcdf=>{const _0x25a193=_0x25c185,_0x4fe0b6=_0x2fdcdf[_0x25a193(0xa1)](),_0x4ad397=_0x4fe0b6?Object[_0x25a193(0xd9)](_0x4fe0b6)['length']:0x0;onlinePlayersEl[_0x25a193(0xba)]=_0x25a193(0x83)+_0x4ad397;});}updateOnlinePlayers();let lastTouchX=0x0,lastTouchY=0x0,isTouchPanning=![],lastTouchDist=0x0;function getTouchDist(_0x28914a){const _0x2f4015=_0x3c6166;if(_0x28914a[_0x2f4015(0x89)]<0x2)return 0x0;const _0x4bf999=_0x28914a[0x0][_0x2f4015(0xc0)]-_0x28914a[0x1]['clientX'],_0x481134=_0x28914a[0x0][_0x2f4015(0x7f)]-_0x28914a[0x1][_0x2f4015(0x7f)];return Math['sqrt'](_0x4bf999*_0x4bf999+_0x481134*_0x481134);}game[_0x3c6166(0x95)](_0x3c6166(0x90),_0x46f71d=>{const _0x344339=_0x3c6166;if(_0x46f71d[_0x344339(0xe6)][_0x344339(0x89)]===0x1)isTouchPanning=!![],lastTouchX=_0x46f71d['touches'][0x0]['clientX'],lastTouchY=_0x46f71d[_0x344339(0xe6)][0x0][_0x344339(0x7f)];else _0x46f71d[_0x344339(0xe6)][_0x344339(0x89)]===0x2&&(lastTouchDist=getTouchDist(_0x46f71d[_0x344339(0xe6)]));}),game[_0x3c6166(0x95)]('touchmove',_0x2acba8=>{const _0x159c77=_0x3c6166;_0x2acba8['preventDefault']();if(_0x2acba8[_0x159c77(0xe6)]['length']===0x1&&isTouchPanning){const _0x79e5b4=_0x2acba8[_0x159c77(0xe6)][0x0],_0x426451=_0x79e5b4['clientX']-lastTouchX,_0x54f284=_0x79e5b4['clientY']-lastTouchY;camX-=_0x426451/scale,camY-=_0x54f284/scale,lastTouchX=_0x79e5b4[_0x159c77(0xc0)],lastTouchY=_0x79e5b4['clientY'],renderAll();}else{if(_0x2acba8[_0x159c77(0xe6)]['length']===0x2){const _0x225376=getTouchDist(_0x2acba8[_0x159c77(0xe6)]);if(lastTouchDist>0x0){const _0x5eade6=_0x225376/lastTouchDist,_0x427e1c=game[_0x159c77(0x84)](),_0x470079=(_0x2acba8[_0x159c77(0xe6)][0x0][_0x159c77(0xc0)]+_0x2acba8[_0x159c77(0xe6)][0x1][_0x159c77(0xc0)])/0x2,_0x4e7ec1=(_0x2acba8[_0x159c77(0xe6)][0x0][_0x159c77(0x7f)]+_0x2acba8[_0x159c77(0xe6)][0x1][_0x159c77(0x7f)])/0x2,[_0x2cc66d,_0x511fcc]=screenToWorld(_0x470079,_0x4e7ec1);scale=clamp(scale*_0x5eade6,MIN_SCALE,MAX_SCALE),camX=_0x2cc66d-(_0x470079-_0x427e1c[_0x159c77(0xd5)])/scale,camY=_0x511fcc-(_0x4e7ec1-_0x427e1c['top'])/scale;const [_0x5b63d6,_0x3a7836]=screenToWorld(_0x470079,_0x4e7ec1);[hoverCellX,hoverCellY]=snapToGrid(_0x5b63d6,_0x3a7836),updateCoordsDisplay(),renderAll();}lastTouchDist=_0x225376;}}},{'passive':![]}),game[_0x3c6166(0x95)](_0x3c6166(0x85),_0x337cf1=>{const _0x4b0fc6=_0x3c6166;_0x337cf1[_0x4b0fc6(0xe6)]['length']===0x0&&(isTouchPanning=![],lastTouchDist=0x0);});
