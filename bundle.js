const _0x45451c=_0x74b5;(function(_0x535bf3,_0x240e74){const _0xcb9da4=_0x74b5,_0x586148=_0x535bf3();while(!![]){try{const _0x54210e=parseInt(_0xcb9da4(0x1da))/0x1+parseInt(_0xcb9da4(0x224))/0x2+-parseInt(_0xcb9da4(0x219))/0x3+-parseInt(_0xcb9da4(0x1e4))/0x4*(-parseInt(_0xcb9da4(0x1f4))/0x5)+parseInt(_0xcb9da4(0x1fc))/0x6*(parseInt(_0xcb9da4(0x21a))/0x7)+-parseInt(_0xcb9da4(0x1f7))/0x8*(parseInt(_0xcb9da4(0x23a))/0x9)+-parseInt(_0xcb9da4(0x242))/0xa;if(_0x54210e===_0x240e74)break;else _0x586148['push'](_0x586148['shift']());}catch(_0x2a43a6){_0x586148['push'](_0x586148['shift']());}}}(_0x4f83,0x22c05));import{initializeApp}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js';import{getFirestore,collection,doc,setDoc,onSnapshot,deleteDoc,getDocs}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js';import{getDatabase,ref,remove}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js';import{getAuth,onAuthStateChanged,signInWithEmailAndPassword,createUserWithEmailAndPassword,signOut}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-auth.js';const firebaseConfig={'apiKey':_0x45451c(0x243),'authDomain':_0x45451c(0x203),'projectId':_0x45451c(0x1f6),'storageBucket':_0x45451c(0x1b6),'messagingSenderId':'461991610382','appId':_0x45451c(0x1d4)},app=initializeApp(firebaseConfig),db=getFirestore(app),rtdb=getDatabase(app),auth=getAuth(app),coordsDisplayEl=document['getElementById'](_0x45451c(0x1cf)),colorsChoiceEl=document[_0x45451c(0x1f3)]('colorsChoice'),paletteToggle=document[_0x45451c(0x1f3)](_0x45451c(0x24d)),game=document[_0x45451c(0x1f3)](_0x45451c(0x22b)),ctx=game[_0x45451c(0x212)]('2d'),cursor=document[_0x45451c(0x1f3)]('cursor'),reloadTimerEl=document[_0x45451c(0x1f3)](_0x45451c(0x22c)),adminPanel=document[_0x45451c(0x1f3)]('adminPanel'),clearAllPixelsBtn=document['getElementById'](_0x45451c(0x1dc)),banUserBtn=document[_0x45451c(0x1f3)]('banUser'),authButton=document[_0x45451c(0x1f3)](_0x45451c(0x24b)),coordsInput=document[_0x45451c(0x1f3)](_0x45451c(0x25a)),addPixelBtn=document[_0x45451c(0x1f3)](_0x45451c(0x21d)),removePixelBtn=document[_0x45451c(0x1f3)](_0x45451c(0x1f8)),teleportInput=document[_0x45451c(0x1f3)](_0x45451c(0x258)),teleportBtn=document['getElementById'](_0x45451c(0x1e0));teleportBtn[_0x45451c(0x1e8)](_0x45451c(0x213),()=>{const _0x3109c2=_0x45451c;if(!auth[_0x3109c2(0x23d)]||auth[_0x3109c2(0x23d)][_0x3109c2(0x1bf)]!==_0x3109c2(0x201))return alert('Только\x20админ!');const _0x22b494=teleportInput['value'][_0x3109c2(0x1d5)]();if(!_0x22b494)return;const [_0x53381d,_0x108c5b]=_0x22b494[_0x3109c2(0x210)](/\s+/),_0x1d5bf9=parseInt(_0x53381d),_0x557998=parseInt(_0x108c5b);if(Number[_0x3109c2(0x200)](_0x1d5bf9)||Number[_0x3109c2(0x200)](_0x557998))return alert(_0x3109c2(0x1ee));const _0x375862=_0x1d5bf9*gridCellSize,_0xaa9e9a=_0x557998*gridCellSize;camX=_0x375862-game[_0x3109c2(0x1d6)]/0x2/scale,camY=_0xaa9e9a-game['height']/0x2/scale,renderAll();}),ctx[_0x45451c(0x1fd)]=![];const gridCellSize=0xa;game[_0x45451c(0x1d6)]=0x4b0,game[_0x45451c(0x1c1)]=0x258;let currentColor=_0x45451c(0x238),canPlace=!![];const reloadTime=0x5,colors=['rgb(255,\x20255,\x20255)','rgb(96,\x2064,\x2040)','rgb(228,\x20228,\x20228)',_0x45451c(0x22d),'rgb(196,\x20196,\x20196)',_0x45451c(0x23b),_0x45451c(0x232),'rgb(229,\x20217,\x200)','rgb(78,\x2078,\x2078)','rgb(148,\x20224,\x2068)',_0x45451c(0x1b7),_0x45451c(0x1fa),_0x45451c(0x21c),_0x45451c(0x1f2),_0x45451c(0x244),_0x45451c(0x22a),_0x45451c(0x1dd),_0x45451c(0x1b4),_0x45451c(0x240),_0x45451c(0x20c),_0x45451c(0x1f1),_0x45451c(0x215),'rgb(154,\x200,\x200)',_0x45451c(0x23c),'rgb(254,\x20164,\x2096)',_0x45451c(0x1d3),'rgb(229,\x20149,\x200)',_0x45451c(0x1d9),_0x45451c(0x211),_0x45451c(0x227)];colorsChoiceEl[_0x45451c(0x1db)]='',colors['forEach'](_0x45e9cf=>{const _0x12ddae=_0x45451c,_0x4c645a=document['createElement'](_0x12ddae(0x204));_0x4c645a[_0x12ddae(0x250)][_0x12ddae(0x1bb)]=_0x45e9cf,_0x4c645a['addEventListener']('click',()=>{const _0x4b7f9d=_0x12ddae;currentColor=_0x45e9cf,document['querySelectorAll'](_0x4b7f9d(0x1ae))[_0x4b7f9d(0x20b)](_0x3e4d3a=>_0x3e4d3a[_0x4b7f9d(0x1c3)]['remove'](_0x4b7f9d(0x24f))),_0x4c645a[_0x4b7f9d(0x1c3)]['add'](_0x4b7f9d(0x24f));}),colorsChoiceEl[_0x12ddae(0x1c5)](_0x4c645a);});const colorsChoice=document[_0x45451c(0x1f3)](_0x45451c(0x1fb)),togglePalette=document[_0x45451c(0x1f3)]('togglePalette');togglePalette[_0x45451c(0x1e8)](_0x45451c(0x213),()=>{const _0x3f739b=_0x45451c;colorsChoice['style'][_0x3f739b(0x24c)]===_0x3f739b(0x1cc)?colorsChoice[_0x3f739b(0x250)][_0x3f739b(0x24c)]=_0x3f739b(0x247):colorsChoice['style']['display']='none';});const worldMap=new Image();worldMap[_0x45451c(0x1c7)]=_0x45451c(0x239);const SCALE_TILE=0x28;let WORLD_W=0x4e20*SCALE_TILE,WORLD_H=0x4e20*SCALE_TILE,camX=0x0,camY=0x0,scale=0x1;const MIN_SCALE=0.005,MAX_SCALE=0x6;let isPanning=![],lastMouseX=0x0,lastMouseY=0x0;function clamp(_0x57168e,_0x2027cb,_0x1d7edd){const _0x142f5f=_0x45451c;return Math[_0x142f5f(0x256)](_0x2027cb,Math[_0x142f5f(0x241)](_0x1d7edd,_0x57168e));}function screenToWorld(_0x576205,_0x46ebfb){const _0x249ace=_0x45451c,_0x4a385b=game[_0x249ace(0x229)](),_0x17c10a=(_0x576205-_0x4a385b[_0x249ace(0x222)])/scale+camX,_0x7db233=(_0x46ebfb-_0x4a385b['top'])/scale+camY;return[_0x17c10a,_0x7db233];}function snapToGrid(_0x4f54f5,_0x3b5369){const _0x3ae671=_0x45451c;return[Math[_0x3ae671(0x20d)](_0x4f54f5/gridCellSize)*gridCellSize,Math[_0x3ae671(0x20d)](_0x3b5369/gridCellSize)*gridCellSize];}let hoverCellX=0x0,hoverCellY=0x0;const pixelsCache=new Map();let markers=[];function updateCoordsDisplay(){const _0x21e0f2=_0x45451c;if(!coordsDisplayEl)return;const _0xd1c889=Math[_0x21e0f2(0x20d)](hoverCellX/gridCellSize),_0x35cd8c=Math[_0x21e0f2(0x20d)](hoverCellY/gridCellSize);coordsDisplayEl[_0x21e0f2(0x231)]=_0x21e0f2(0x230)+_0xd1c889+_0x21e0f2(0x1cb)+_0x35cd8c;}const TILE_SIZE=0x3e8;let tiles=[];const offscreenCanvas=document[_0x45451c(0x1ed)]('canvas');offscreenCanvas['width']=TILE_SIZE,offscreenCanvas[_0x45451c(0x1c1)]=TILE_SIZE;const offCtx=offscreenCanvas[_0x45451c(0x212)]('2d',{'willReadFrequently':!![]});offCtx['imageSmoothingEnabled']=![],worldMap[_0x45451c(0x214)]=()=>{const _0x1177d7=_0x45451c,_0xba5ab9=worldMap['naturalWidth']||0x4e20,_0xf6a867=worldMap[_0x1177d7(0x1b9)]||0x4e20;WORLD_W=_0xba5ab9*SCALE_TILE,WORLD_H=_0xf6a867*SCALE_TILE;const _0x2150df=Math[_0x1177d7(0x1e6)](_0xba5ab9/TILE_SIZE),_0x534a0a=Math[_0x1177d7(0x1e6)](_0xf6a867/TILE_SIZE);tiles=[];for(let _0xcae544=0x0;_0xcae544<_0x2150df;_0xcae544++){for(let _0x301da6=0x0;_0x301da6<_0x534a0a;_0x301da6++){const _0x7b9251=_0xcae544*TILE_SIZE,_0x3baba5=_0x301da6*TILE_SIZE,_0x5a3826=Math['min'](TILE_SIZE,_0xba5ab9-_0x7b9251),_0x58e116=Math[_0x1177d7(0x241)](TILE_SIZE,_0xf6a867-_0x3baba5);offCtx[_0x1177d7(0x220)](0x0,0x0,TILE_SIZE,TILE_SIZE),offCtx['drawImage'](worldMap,_0x7b9251,_0x3baba5,_0x5a3826,_0x58e116,0x0,0x0,_0x5a3826,_0x58e116);const _0x564f5e=new Image();_0x564f5e[_0x1177d7(0x1c7)]=offscreenCanvas[_0x1177d7(0x1ff)](_0x1177d7(0x1f0));const _0x1e6898=_0x7b9251*SCALE_TILE,_0x575b43=_0x3baba5*SCALE_TILE,_0x3e9c87=_0x5a3826*SCALE_TILE,_0x519598=_0x58e116*SCALE_TILE;tiles['push']({'img':_0x564f5e,'dx':_0x1e6898,'dy':_0x575b43,'dw':_0x3e9c87,'dh':_0x519598});}}renderAll();};function renderAll(){const _0x4226c0=_0x45451c;ctx[_0x4226c0(0x1fd)]=![],ctx['setTransform'](0x1,0x0,0x0,0x1,0x0,0x0),ctx[_0x4226c0(0x220)](0x0,0x0,game[_0x4226c0(0x1d6)],game[_0x4226c0(0x1c1)]),ctx[_0x4226c0(0x225)](scale,0x0,0x0,scale,-camX*scale,-camY*scale);const _0x583604=camX,_0x18c354=camY,_0xbf30b9=camX+game['width']/scale,_0x33f8c6=camY+game[_0x4226c0(0x1c1)]/scale;for(const _0x1e738f of tiles){if(_0x1e738f['dx']+_0x1e738f['dw']<_0x583604||_0x1e738f['dx']>_0xbf30b9||_0x1e738f['dy']+_0x1e738f['dh']<_0x18c354||_0x1e738f['dy']>_0x33f8c6)continue;_0x1e738f[_0x4226c0(0x245)][_0x4226c0(0x1e7)]&&_0x1e738f[_0x4226c0(0x245)]['naturalWidth']?ctx[_0x4226c0(0x235)](_0x1e738f[_0x4226c0(0x245)],_0x1e738f['dx'],_0x1e738f['dy'],_0x1e738f['dw'],_0x1e738f['dh']):(ctx['fillStyle']=_0x4226c0(0x1eb),ctx['fillRect'](_0x1e738f['dx'],_0x1e738f['dy'],_0x1e738f['dw'],_0x1e738f['dh']));}ctx['beginPath'](),ctx[_0x4226c0(0x1c0)]=_0x4226c0(0x20e);let _0x160168=Math[_0x4226c0(0x20d)](_0x583604/gridCellSize)*gridCellSize;for(let _0x3b428f=_0x160168;_0x3b428f<=_0xbf30b9;_0x3b428f+=gridCellSize){ctx[_0x4226c0(0x228)](_0x3b428f,_0x18c354),ctx['lineTo'](_0x3b428f,_0x33f8c6);}let _0x2dd58f=Math[_0x4226c0(0x20d)](_0x18c354/gridCellSize)*gridCellSize;for(let _0x2abf6e=_0x2dd58f;_0x2abf6e<=_0x33f8c6;_0x2abf6e+=gridCellSize){ctx['moveTo'](_0x583604,_0x2abf6e),ctx[_0x4226c0(0x25c)](_0xbf30b9,_0x2abf6e);}ctx[_0x4226c0(0x1d0)](),pixelsCache[_0x4226c0(0x20b)](_0x4a2949=>{const _0x272976=_0x4226c0;_0x4a2949[_0x272976(0x1f5)]!==_0x272976(0x207)&&(ctx[_0x272976(0x1b0)]=_0x4a2949[_0x272976(0x1f5)],ctx[_0x272976(0x1f9)](_0x4a2949['x'],_0x4a2949['y'],gridCellSize,gridCellSize));}),ctx[_0x4226c0(0x1b0)]=_0x4226c0(0x206);for(const [_0x4a1f12,_0x2b8d40]of markers){ctx[_0x4226c0(0x1f9)](_0x4a1f12,_0x2b8d40,gridCellSize,gridCellSize);}ctx[_0x4226c0(0x1b0)]=_0x4226c0(0x24e),ctx[_0x4226c0(0x1f9)](hoverCellX,hoverCellY,gridCellSize,gridCellSize),ctx[_0x4226c0(0x225)](0x1,0x0,0x0,0x1,0x0,0x0);}onSnapshot(collection(db,_0x45451c(0x259)),_0x9d8257=>{const _0x16715f=_0x45451c;pixelsCache[_0x16715f(0x217)](),_0x9d8257[_0x16715f(0x20b)](_0x3f6e86=>{const _0x2ae985=_0x16715f,_0xa4b2d3=_0x3f6e86[_0x2ae985(0x22e)]();pixelsCache['set'](_0xa4b2d3['x']+'-'+_0xa4b2d3['y'],_0xa4b2d3);}),renderAll();}),game['addEventListener'](_0x45451c(0x254),_0x329352=>{const _0x58f8a7=_0x45451c;(_0x329352['button']===0x1||_0x329352[_0x58f8a7(0x1df)]===0x2||_0x329352[_0x58f8a7(0x236)]||_0x329352[_0x58f8a7(0x1c6)]||_0x329352[_0x58f8a7(0x1ef)]||_0x329352['altKey'])&&(isPanning=!![],lastMouseX=_0x329352[_0x58f8a7(0x237)],lastMouseY=_0x329352[_0x58f8a7(0x1c4)],_0x329352[_0x58f8a7(0x1c8)]());}),window['addEventListener'](_0x45451c(0x1d7),()=>{isPanning=![];}),game[_0x45451c(0x1e8)](_0x45451c(0x1b3),_0x270719=>_0x270719['preventDefault']()),game['addEventListener'](_0x45451c(0x1ea),_0x5dae3b=>{const _0x3c0af5=_0x45451c;if(isPanning){const _0x1cd387=_0x5dae3b[_0x3c0af5(0x237)]-lastMouseX,_0x89a4fb=_0x5dae3b['clientY']-lastMouseY;camX-=_0x1cd387/scale,camY-=_0x89a4fb/scale,lastMouseX=_0x5dae3b[_0x3c0af5(0x237)],lastMouseY=_0x5dae3b[_0x3c0af5(0x1c4)],renderAll();}const [_0x11453d,_0xf26e0d]=screenToWorld(_0x5dae3b[_0x3c0af5(0x237)],_0x5dae3b[_0x3c0af5(0x1c4)]);[hoverCellX,hoverCellY]=snapToGrid(_0x11453d,_0xf26e0d),updateCoordsDisplay(),renderAll();}),game['addEventListener'](_0x45451c(0x1ec),_0x1386fc=>{const _0x499041=_0x45451c;_0x1386fc[_0x499041(0x1c8)]();const _0x36e881=1.1,[_0x4b81e1,_0x97e551]=screenToWorld(_0x1386fc[_0x499041(0x237)],_0x1386fc['clientY']),_0x2c12eb=_0x1386fc['deltaY']<0x0?0x1:-0x1,_0x547616=clamp(scale*(_0x2c12eb>0x0?_0x36e881:0x1/_0x36e881),MIN_SCALE,MAX_SCALE);if(_0x547616===scale)return;scale=_0x547616;const _0xf07a49=game[_0x499041(0x229)]();camX=_0x4b81e1-(_0x1386fc[_0x499041(0x237)]-_0xf07a49['left'])/scale,camY=_0x97e551-(_0x1386fc[_0x499041(0x1c4)]-_0xf07a49[_0x499041(0x226)])/scale;const [_0x42e982,_0x281b76]=screenToWorld(_0x1386fc[_0x499041(0x237)],_0x1386fc['clientY']);[hoverCellX,hoverCellY]=snapToGrid(_0x42e982,_0x281b76),updateCoordsDisplay(),renderAll();},{'passive':![]});async function placePixelWithHover(){const _0x23f719=_0x45451c;if(!auth[_0x23f719(0x23d)])return alert(_0x23f719(0x23e));if(!canPlace)return;canPlace=![];const _0x492a4e=hoverCellX,_0x235fb3=hoverCellY,_0xc3f3e4=doc(db,'pixels',_0x492a4e+'-'+_0x235fb3);try{if(currentColor===_0x23f719(0x207))await deleteDoc(_0xc3f3e4);else await setDoc(_0xc3f3e4,{'x':_0x492a4e,'y':_0x235fb3,'color':currentColor});}catch(_0x4690d4){console[_0x23f719(0x20f)](_0x4690d4);}startReload();}game[_0x45451c(0x1e8)](_0x45451c(0x213),_0x486794=>{const _0x24715c=_0x45451c;if(isPanning||_0x486794[_0x24715c(0x1df)]!==0x0)return;placePixelWithHover();});if(cursor)cursor['style'][_0x45451c(0x24c)]='none';function startReload(){const _0x24e8a3=_0x45451c;let _0x24655e=reloadTime;reloadTimerEl[_0x24e8a3(0x218)]=_0x24e8a3(0x1be)+_0x24655e+_0x24e8a3(0x246);const _0xad4104=setInterval(()=>{const _0x24d170=_0x24e8a3;_0x24655e--;if(_0x24655e<=0x0)clearInterval(_0xad4104),canPlace=!![],reloadTimerEl['innerText']=_0x24d170(0x1bc);else reloadTimerEl[_0x24d170(0x218)]=_0x24d170(0x1be)+_0x24655e+'\x20sec';},0x3e8);}authButton[_0x45451c(0x1e8)](_0x45451c(0x213),async()=>{const _0x2461bc=_0x45451c;if(auth[_0x2461bc(0x23d)]){await signOut(auth);return;}const _0x5bfb92=prompt('Enter\x201\x20to\x20sign\x20in,\x20or\x202\x20to\x20create\x20a\x20new\x20account:');if(!_0x5bfb92||_0x5bfb92!=='1'&&_0x5bfb92!=='2')return;const _0xca3f2e=prompt('Email:'),_0x355be1=prompt(_0x2461bc(0x251));if(!_0xca3f2e||!_0x355be1)return;try{_0x5bfb92==='1'?(await signInWithEmailAndPassword(auth,_0xca3f2e,_0x355be1),alert(_0x2461bc(0x253))):(await createUserWithEmailAndPassword(auth,_0xca3f2e,_0x355be1),alert(_0x2461bc(0x209)));}catch(_0x329b9c){alert(_0x329b9c[_0x2461bc(0x1d1)]);}}),onAuthStateChanged(auth,_0x94c9a6=>{const _0x1aa0c3=_0x45451c;_0x94c9a6?(authButton['textContent']=_0x1aa0c3(0x257),_0x94c9a6['email']===_0x1aa0c3(0x201)?adminPanel[_0x1aa0c3(0x250)][_0x1aa0c3(0x24c)]=_0x1aa0c3(0x21b):adminPanel['style']['display']=_0x1aa0c3(0x1cc)):(authButton[_0x1aa0c3(0x231)]=_0x1aa0c3(0x24a),adminPanel[_0x1aa0c3(0x250)][_0x1aa0c3(0x24c)]=_0x1aa0c3(0x1cc));});function _0x74b5(_0x224e77,_0x86c03b){const _0x4f83ed=_0x4f83();return _0x74b5=function(_0x74b577,_0x47d490){_0x74b577=_0x74b577-0x1ae;let _0x4c4cea=_0x4f83ed[_0x74b577];return _0x4c4cea;},_0x74b5(_0x224e77,_0x86c03b);}function parseCoords(){const _0x43bd80=_0x45451c;markers=[];const _0x2928e0=coordsInput[_0x43bd80(0x1e3)]['trim']();if(!_0x2928e0){renderAll();return;}_0x2928e0[_0x43bd80(0x210)](',')[_0x43bd80(0x20b)](_0x320e2a=>{const _0x21ca3a=_0x43bd80,[_0x2bb48e,_0x475500,_0x2d7849,_0x5202b2]=_0x320e2a[_0x21ca3a(0x1d5)]()['split'](/\s+/),_0x9495a0=parseInt(_0x2bb48e),_0x56c1c2=parseInt(_0x475500),_0x166730=parseInt(_0x2d7849||'1'),_0x1e4488=parseInt(_0x5202b2||'1');if(Number[_0x21ca3a(0x200)](_0x9495a0)||Number[_0x21ca3a(0x200)](_0x56c1c2)||Number['isNaN'](_0x166730)||Number[_0x21ca3a(0x200)](_0x1e4488))return;const _0x2c9254=_0x9495a0*gridCellSize,_0x18badf=_0x56c1c2*gridCellSize;for(let _0x16b9ad=0x0;_0x16b9ad<_0x166730;_0x16b9ad++){for(let _0x867df5=0x0;_0x867df5<_0x1e4488;_0x867df5++){const _0x434a0c=_0x2c9254+_0x16b9ad*gridCellSize,_0x37b1d6=_0x18badf+_0x867df5*gridCellSize;_0x434a0c>=0x0&&_0x37b1d6>=0x0&&_0x434a0c<=WORLD_W-gridCellSize&&_0x37b1d6<=WORLD_H-gridCellSize&&markers[_0x21ca3a(0x1af)]([_0x434a0c,_0x37b1d6]);}}}),renderAll();}const upBtn=document[_0x45451c(0x1f3)]('upBtn'),downBtn=document[_0x45451c(0x1f3)](_0x45451c(0x1b1)),leftBtn=document['getElementById'](_0x45451c(0x1d8)),rightBtn=document[_0x45451c(0x1f3)]('rightBtn'),zoomInBtn=document[_0x45451c(0x1f3)](_0x45451c(0x1fe)),zoomOutBtn=document[_0x45451c(0x1f3)](_0x45451c(0x1ce)),moveSpeed=0x32,zoomFactorBtn=1.2;function moveCamera(_0x1f7970,_0x127881){camX+=_0x1f7970/scale,camY+=_0x127881/scale,renderAll();}upBtn[_0x45451c(0x1e8)](_0x45451c(0x213),()=>moveCamera(0x0,-moveSpeed)),downBtn[_0x45451c(0x1e8)](_0x45451c(0x213),()=>moveCamera(0x0,moveSpeed)),leftBtn[_0x45451c(0x1e8)]('click',()=>moveCamera(-moveSpeed,0x0)),rightBtn['addEventListener'](_0x45451c(0x213),()=>moveCamera(moveSpeed,0x0)),zoomInBtn['addEventListener'](_0x45451c(0x213),()=>{const _0x2f5ee5=clamp(scale*zoomFactorBtn,MIN_SCALE,MAX_SCALE);scale=_0x2f5ee5,renderAll();}),zoomOutBtn[_0x45451c(0x1e8)](_0x45451c(0x213),()=>{const _0x3f7356=clamp(scale/zoomFactorBtn,MIN_SCALE,MAX_SCALE);scale=_0x3f7356,renderAll();}),coordsInput['addEventListener'](_0x45451c(0x234),parseCoords);async function adminApplyPixels(_0x8d6e7f){const _0x5008fb=_0x45451c;if(!auth[_0x5008fb(0x23d)]||auth[_0x5008fb(0x23d)][_0x5008fb(0x1bf)]!==_0x5008fb(0x201))return alert('Только\x20админ!');parseCoords();let _0x28f70d=0x0;for(const [_0x2bfd08,_0x4338bf]of markers){const _0x47c9d0=doc(db,'pixels',_0x2bfd08+'-'+_0x4338bf);_0x8d6e7f===_0x5008fb(0x1cd)?(await setDoc(_0x47c9d0,{'x':_0x2bfd08,'y':_0x4338bf,'color':currentColor}),_0x28f70d++):(await deleteDoc(_0x47c9d0),_0x28f70d++);}alert((_0x8d6e7f===_0x5008fb(0x1cd)?_0x5008fb(0x1e2):_0x5008fb(0x221))+_0x5008fb(0x1e5)+_0x28f70d);}addPixelBtn[_0x45451c(0x1e8)](_0x45451c(0x213),()=>adminApplyPixels(_0x45451c(0x1cd))),removePixelBtn[_0x45451c(0x1e8)](_0x45451c(0x213),()=>adminApplyPixels('remove')),clearAllPixelsBtn[_0x45451c(0x1e8)](_0x45451c(0x213),async()=>{const _0x2ae996=_0x45451c;if(!auth[_0x2ae996(0x23d)])return alert('Только\x20админ!');const _0x312263=await getDocs(collection(db,_0x2ae996(0x259)));_0x312263[_0x2ae996(0x20b)](_0x36bdd8=>deleteDoc(_0x36bdd8[_0x2ae996(0x216)]));}),banUserBtn[_0x45451c(0x1e8)](_0x45451c(0x213),()=>{const _0x88a50f=_0x45451c;if(!auth[_0x88a50f(0x23d)])return alert(_0x88a50f(0x1d2));const _0x336c19=prompt(_0x88a50f(0x249));if(!_0x336c19)return;const _0x578c7b=ref(rtdb,'users/'+_0x336c19);remove(_0x578c7b)['then'](()=>alert(_0x88a50f(0x1ca)))[_0x88a50f(0x1bd)](_0x38dfe0=>console[_0x88a50f(0x20f)](_0x38dfe0));});import{onDisconnect,set}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js';function _0x4f83(){const _0x5d9a7c=['setTransform','top','rgb(130,\x200,\x20128)','moveTo','getBoundingClientRect','rgb(0,\x20101,\x2019)','game','reloadTimer','rgb(245,\x20223,\x20176)','data','remove','X:\x20','textContent','rgb(136,\x20136,\x20136)','touchmove','input','drawImage','shiftKey','clientX','#000000','world.png','18QGOcKp','rgb(255,\x20248,\x20137)','rgb(0,\x200,\x20234)','currentUser','Login\x20to\x20draw!','users/','rgb(255,\x20101,\x20101)','min','3353760DlNuHS','AIzaSyCwy4jVn9JIwXuIXVycYAv9EdPGPkgIJvA','rgb(255,\x20167,\x20209)','img','\x20sec','grid','target','Введите\x20UserID\x20для\x20бана:','Log\x20In','authButton','display','paletteToggle','rgba(0,0,0,0.12)','selected','style','Password:','translate(','Come\x20in!','mousedown','px)\x20scale(','max','Log\x20Out','teleportInput','pixels','coordsInput','top\x20left','lineTo','#colorsChoice\x20div','push','fillStyle','downBtn','change','contextmenu','rgb(202,\x20227,\x20255)','readAsDataURL','pixellox.firebasestorage.app','rgb(0,\x200,\x200)','keys','naturalHeight','opacityRange','backgroundColor','Ready!','catch','Reload:\x20','email','strokeStyle','height','length','classList','clientY','appendChild','ctrlKey','src','preventDefault','opacity','Пользователь\x20забанен!','\x20\x20Y:\x20','none','add','zoomOutBtn','coordsDisplay','stroke','message','Только\x20админ!','rgb(25,\x2025,\x20115)','1:461991610382:web:2a5ae293dde4a754c2d45f','trim','width','mouseup','leftBtn','rgb(207,\x20110,\x20228)','200448QpDBnm','innerHTML','clearAllPixels','rgb(255,\x2084,\x20178)','px,\x20','button','teleportBtn','coordY','Добавлено','value','23048oUtjYY','\x20пикселей:\x20','ceil','complete','addEventListener','templateFile','mousemove','#eef6ff','wheel','createElement','Введите\x20корректные\x20координаты\x20X\x20Y','metaKey','image/png','rgb(229,\x200,\x200)','rgb(104,\x20131,\x2056)','getElementById','185cCYasq','color','pixellox','729032wIcxPM','removePixelBtn','fillRect','rgb(2,\x20190,\x201)','colorsChoice','1194FUDkEa','imageSmoothingEnabled','zoomInBtn','toDataURL','isNaN','logo100153@gmail.com','coordX','pixellox.firebaseapp.com','div','now','rgba(255,0,0,0.5)','#FFFFFF','Online\x20players:\x20','Account\x20created!','overlayTemplate','forEach','rgb(0,\x20211,\x20221)','floor','#ccc','error','split','rgb(160,\x20106,\x2066)','getContext','click','onload','rgb(0,\x20131,\x20199)','ref','clear','innerText','289392ojCpDk','8267nzRpoj','block','rgb(244,\x20179,\x20174)','addPixelBtn','toggleBtn','touches','clearRect','Удалено','left','files','215556yhGGqb'];_0x4f83=function(){return _0x5d9a7c;};return _0x4f83();}function trackOnlinePlayer(){const _0x251b09=_0x45451c;if(!auth[_0x251b09(0x23d)])return;const _0x251d2a=auth[_0x251b09(0x23d)]['uid'],_0x3b2a74=ref(rtdb,_0x251b09(0x23f)+_0x251d2a);set(_0x3b2a74,{'email':auth[_0x251b09(0x23d)]['email'],'lastSeen':Date[_0x251b09(0x205)]()}),onDisconnect(_0x3b2a74)[_0x251b09(0x22f)]();}onAuthStateChanged(auth,_0x47790b=>{_0x47790b&&trackOnlinePlayer();});function updateOnlinePlayers(){const _0x350b59=_0x45451c,_0x3b3841=ref(rtdb,_0x350b59(0x23f));onValue(_0x3b3841,_0x57b181=>{const _0x555f7e=_0x350b59,_0x22b7a0=_0x57b181['val'](),_0x30eeba=_0x22b7a0?Object[_0x555f7e(0x1b8)](_0x22b7a0)[_0x555f7e(0x1c2)]:0x0;onlinePlayersEl['innerText']=_0x555f7e(0x208)+_0x30eeba;});}updateOnlinePlayers();let lastTouchX=0x0,lastTouchY=0x0,isTouchPanning=![];game[_0x45451c(0x1e8)]('touchstart',_0x31c5bf=>{const _0x5586ad=_0x45451c;_0x31c5bf[_0x5586ad(0x21f)][_0x5586ad(0x1c2)]===0x1&&(isTouchPanning=!![],lastTouchX=_0x31c5bf[_0x5586ad(0x21f)][0x0][_0x5586ad(0x237)],lastTouchY=_0x31c5bf['touches'][0x0][_0x5586ad(0x1c4)]);}),game['addEventListener'](_0x45451c(0x233),_0x4b8f3d=>{const _0x3a27a4=_0x45451c;if(isTouchPanning&&_0x4b8f3d[_0x3a27a4(0x21f)][_0x3a27a4(0x1c2)]===0x1){const _0x262f0d=_0x4b8f3d[_0x3a27a4(0x21f)][0x0],_0xc158ee=_0x262f0d[_0x3a27a4(0x237)]-lastTouchX,_0x361c45=_0x262f0d[_0x3a27a4(0x1c4)]-lastTouchY;camX-=_0xc158ee/scale,camY-=_0x361c45/scale,lastTouchX=_0x262f0d[_0x3a27a4(0x237)],lastTouchY=_0x262f0d[_0x3a27a4(0x1c4)],renderAll();}_0x4b8f3d[_0x3a27a4(0x1c8)]();},{'passive':![]}),game[_0x45451c(0x1e8)]('touchend',_0x1ef862=>{isTouchPanning=![];});const overlay=document[_0x45451c(0x1f3)](_0x45451c(0x20a)),fileInput=document[_0x45451c(0x1f3)](_0x45451c(0x1e9)),opacityRange=document[_0x45451c(0x1f3)](_0x45451c(0x1ba)),coordX=document['getElementById'](_0x45451c(0x202)),coordY=document[_0x45451c(0x1f3)](_0x45451c(0x1e1)),applyCoordsBtn=document['getElementById']('applyCoords'),toggleBtn=document['getElementById'](_0x45451c(0x21e));let templateX=0x0,templateY=0x0,templateOpacity=0.5,templateVisible=!![];fileInput[_0x45451c(0x1e8)](_0x45451c(0x1b2),_0x1cbd97=>{const _0x3c9dec=_0x45451c,_0x4c2858=_0x1cbd97[_0x3c9dec(0x248)][_0x3c9dec(0x223)][0x0];if(!_0x4c2858)return;const _0x5a2db6=new FileReader();_0x5a2db6[_0x3c9dec(0x214)]=_0x29e893=>{const _0x5b46d0=_0x3c9dec;overlay[_0x5b46d0(0x1c7)]=_0x29e893[_0x5b46d0(0x248)]['result'],overlay[_0x5b46d0(0x250)][_0x5b46d0(0x24c)]=_0x5b46d0(0x21b);},_0x5a2db6[_0x3c9dec(0x1b5)](_0x4c2858);}),opacityRange[_0x45451c(0x1e8)](_0x45451c(0x234),()=>{const _0x48bacc=_0x45451c;templateOpacity=opacityRange[_0x48bacc(0x1e3)],overlay['style'][_0x48bacc(0x1c9)]=templateOpacity;}),applyCoordsBtn[_0x45451c(0x1e8)]('click',()=>{const _0x28296e=_0x45451c;templateX=parseInt(coordX[_0x28296e(0x1e3)])||0x0,templateY=parseInt(coordY['value'])||0x0,updateTemplatePosition();}),toggleBtn['addEventListener']('click',()=>{const _0x33a0a5=_0x45451c;templateVisible=!templateVisible,overlay['style'][_0x33a0a5(0x24c)]=templateVisible?'block':_0x33a0a5(0x1cc);});function updateTemplatePosition(){const _0x57eb5f=_0x45451c;overlay[_0x57eb5f(0x250)]['transform']=_0x57eb5f(0x252)+(-camX*scale+templateX)+_0x57eb5f(0x1de)+(-camY*scale+templateY)+_0x57eb5f(0x255)+scale+')',overlay[_0x57eb5f(0x250)]['transformOrigin']=_0x57eb5f(0x25b);}const oldRenderAll=renderAll;renderAll=function(){const _0x1afc5f=_0x45451c;oldRenderAll();if(overlay[_0x1afc5f(0x1c7)])updateTemplatePosition();};
