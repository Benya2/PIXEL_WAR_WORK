const _0x5cfcee=_0x34cf;(function(_0xec6a8d,_0x2ed33a){const _0x1ecdbe=_0x34cf,_0xa04626=_0xec6a8d();while(!![]){try{const _0x27f5fc=parseInt(_0x1ecdbe(0x155))/0x1+-parseInt(_0x1ecdbe(0x16a))/0x2*(parseInt(_0x1ecdbe(0x169))/0x3)+-parseInt(_0x1ecdbe(0x14d))/0x4+-parseInt(_0x1ecdbe(0x12b))/0x5+-parseInt(_0x1ecdbe(0x150))/0x6*(-parseInt(_0x1ecdbe(0x11f))/0x7)+parseInt(_0x1ecdbe(0x17d))/0x8*(-parseInt(_0x1ecdbe(0x1b1))/0x9)+parseInt(_0x1ecdbe(0x195))/0xa;if(_0x27f5fc===_0x2ed33a)break;else _0xa04626['push'](_0xa04626['shift']());}catch(_0x363495){_0xa04626['push'](_0xa04626['shift']());}}}(_0x4ba8,0x4bec4));import{initializeApp}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js';import{getFirestore,collection,doc,setDoc,onSnapshot,deleteDoc,getDocs}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js';import{getDatabase,ref,remove}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js';import{getAuth,onAuthStateChanged,signInWithEmailAndPassword,createUserWithEmailAndPassword,signOut}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-auth.js';const firebaseConfig={'apiKey':'AIzaSyCwy4jVn9JIwXuIXVycYAv9EdPGPkgIJvA','authDomain':'pixellox.firebaseapp.com','projectId':_0x5cfcee(0x125),'storageBucket':'pixellox.firebasestorage.app','messagingSenderId':_0x5cfcee(0x193),'appId':_0x5cfcee(0x164)},app=initializeApp(firebaseConfig),db=getFirestore(app),rtdb=getDatabase(app),auth=getAuth(app),coordsDisplayEl=document[_0x5cfcee(0x14a)](_0x5cfcee(0x1b3)),colorsChoiceEl=document['getElementById']('colorsChoice'),paletteToggle=document[_0x5cfcee(0x14a)](_0x5cfcee(0x18d)),game=document['getElementById'](_0x5cfcee(0x175)),ctx=game[_0x5cfcee(0x185)]('2d'),cursor=document[_0x5cfcee(0x14a)](_0x5cfcee(0x18f)),reloadTimerEl=document[_0x5cfcee(0x14a)]('reloadTimer'),adminPanel=document[_0x5cfcee(0x14a)]('adminPanel'),clearAllPixelsBtn=document[_0x5cfcee(0x14a)](_0x5cfcee(0x11a)),banUserBtn=document['getElementById'](_0x5cfcee(0x182)),authButton=document['getElementById'](_0x5cfcee(0x1b5)),coordsInput=document['getElementById']('coordsInput'),addPixelBtn=document[_0x5cfcee(0x14a)](_0x5cfcee(0x17b)),removePixelBtn=document[_0x5cfcee(0x14a)]('removePixelBtn'),teleportInput=document['getElementById'](_0x5cfcee(0x141)),teleportBtn=document['getElementById']('teleportBtn');teleportBtn['addEventListener'](_0x5cfcee(0x188),()=>{const _0xa015c8=_0x5cfcee;if(!auth[_0xa015c8(0x1b6)]||auth['currentUser']['email']!==_0xa015c8(0x198))return alert(_0xa015c8(0x14e));const _0x27ed1b=teleportInput[_0xa015c8(0x17f)][_0xa015c8(0x15d)]();if(!_0x27ed1b)return;const [_0x4192bb,_0xe4907e]=_0x27ed1b[_0xa015c8(0x146)](/\s+/),_0x46a370=parseInt(_0x4192bb),_0x3109fb=parseInt(_0xe4907e);if(Number['isNaN'](_0x46a370)||Number[_0xa015c8(0x1ab)](_0x3109fb))return alert(_0xa015c8(0x156));const _0xfcc115=_0x46a370*gridCellSize,_0x357767=_0x3109fb*gridCellSize;camX=_0xfcc115-game['width']/0x2/scale,camY=_0x357767-game[_0xa015c8(0x15f)]/0x2/scale,renderAll();}),ctx[_0x5cfcee(0x159)]=![];const gridCellSize=0xa;game['width']=0x4b0,game[_0x5cfcee(0x15f)]=0x258;let currentColor=_0x5cfcee(0x199),canPlace=!![];const reloadTime=0x1,colors=[_0x5cfcee(0x138),_0x5cfcee(0x192),_0x5cfcee(0x154),_0x5cfcee(0x11e),_0x5cfcee(0x196),'rgb(255,\x20248,\x20137)',_0x5cfcee(0x11d),_0x5cfcee(0x158),'rgb(78,\x2078,\x2078)','rgb(148,\x20224,\x2068)','rgb(0,\x200,\x200)','rgb(2,\x20190,\x201)','rgb(244,\x20179,\x20174)','rgb(104,\x20131,\x2056)',_0x5cfcee(0x132),_0x5cfcee(0x167),_0x5cfcee(0x12e),_0x5cfcee(0x122),'rgb(255,\x20101,\x20101)',_0x5cfcee(0x131),_0x5cfcee(0x130),'rgb(0,\x20131,\x20199)',_0x5cfcee(0x189),_0x5cfcee(0x143),_0x5cfcee(0x126),'rgb(25,\x2025,\x20115)',_0x5cfcee(0x19a),'rgb(207,\x20110,\x20228)',_0x5cfcee(0x12c),_0x5cfcee(0x135)];colorsChoiceEl['innerHTML']='',colors[_0x5cfcee(0x1a3)](_0x47fd4b=>{const _0x35ab56=_0x5cfcee,_0x42df21=document[_0x35ab56(0x165)](_0x35ab56(0x18e));_0x42df21[_0x35ab56(0x173)][_0x35ab56(0x157)]=_0x47fd4b,_0x42df21['addEventListener'](_0x35ab56(0x188),()=>{const _0x31b4c4=_0x35ab56;currentColor=_0x47fd4b,document[_0x31b4c4(0x116)]('#colorsChoice\x20div')[_0x31b4c4(0x1a3)](_0x3b3623=>_0x3b3623[_0x31b4c4(0x161)]['remove'](_0x31b4c4(0x176))),_0x42df21['classList'][_0x31b4c4(0x1a2)]('selected');}),colorsChoiceEl[_0x35ab56(0x13c)](_0x42df21);});const colorsChoice=document[_0x5cfcee(0x14a)](_0x5cfcee(0x145)),togglePalette=document[_0x5cfcee(0x14a)](_0x5cfcee(0x117));togglePalette['addEventListener'](_0x5cfcee(0x188),()=>{const _0x16a05c=_0x5cfcee;colorsChoice['style'][_0x16a05c(0x1b0)]===_0x16a05c(0x180)?colorsChoice[_0x16a05c(0x173)][_0x16a05c(0x1b0)]=_0x16a05c(0x124):colorsChoice['style']['display']=_0x16a05c(0x180);});const worldMap=new Image();worldMap[_0x5cfcee(0x1ac)]=_0x5cfcee(0x194);const SCALE_TILE=0x64;let WORLD_W=0x4e20*SCALE_TILE,WORLD_H=0x4e20*SCALE_TILE,camX=0x0,camY=0x0,scale=0x1;const MIN_SCALE=0.005,MAX_SCALE=0x6;let isPanning=![],lastMouseX=0x0,lastMouseY=0x0;function clamp(_0x517f6d,_0x41abe7,_0x1732c8){const _0x5c556e=_0x5cfcee;return Math['max'](_0x41abe7,Math[_0x5c556e(0x16f)](_0x1732c8,_0x517f6d));}function screenToWorld(_0x24cf47,_0x53eb3b){const _0x4e1521=_0x5cfcee,_0x317cba=game[_0x4e1521(0x151)](),_0x117cd1=(_0x24cf47-_0x317cba['left'])/scale+camX,_0x2f53ed=(_0x53eb3b-_0x317cba[_0x4e1521(0x14f)])/scale+camY;return[_0x117cd1,_0x2f53ed];}function snapToGrid(_0x486a28,_0x135674){const _0x62f3e6=_0x5cfcee;return[Math[_0x62f3e6(0x1aa)](_0x486a28/gridCellSize)*gridCellSize,Math['floor'](_0x135674/gridCellSize)*gridCellSize];}function _0x4ba8(){const _0x429add=['color','zoomInBtn','rgb(228,\x20228,\x20228)','375958MNXqXb','Введите\x20корректные\x20координаты\x20X\x20Y','backgroundColor','rgb(229,\x20217,\x200)','imageSmoothingEnabled','strokeStyle','canvas','error','trim','zoomOutBtn','height','Email:','classList','px,\x20','clientX','1:461991610382:web:2a5ae293dde4a754c2d45f','createElement','overlayTemplate','rgb(0,\x20101,\x2019)','files','51qryFlX','51698pUYpgv','Account\x20created!','leftBtn','Reload:\x20','clientY','min','drawImage','ref','translate(','style','#ccc','game','selected','val','X:\x20','email','deltaY','addPixelBtn','Log\x20Out','8HookUC','\x20пикселей:\x20','value','none','shiftKey','banUser','moveTo','onload','getContext','applyCoords','innerText','click','rgb(154,\x200,\x200)','\x20sec','coordX','button','paletteToggle','div','cursor','naturalWidth','opacityRange','rgb(96,\x2064,\x2040)','461991610382','world.png','3321240iRrdLx','rgb(196,\x20196,\x20196)','now','logo100153@gmail.com','#000000','rgb(229,\x20149,\x200)','Online\x20players:\x20','pixels','clear','preventDefault','addEventListener','lineTo','setTransform','add','forEach','target','contextmenu','message','block','Log\x20In','input','floor','isNaN','src','rightBtn','ceil','naturalHeight','display','508104PxJPEY','Удалено','coordsDisplay','Password:','authButton','currentUser','querySelectorAll','togglePalette','rgba(0,0,0,0.12)','upBtn','clearAllPixels','length','Come\x20in!','rgb(136,\x20136,\x20136)','rgb(245,\x20223,\x20176)','14BTyoKm','Login\x20to\x20draw!','mousedown','rgb(202,\x20227,\x20255)','img','grid','pixellox','rgb(254,\x20164,\x2096)','Добавлено','opacity','Пользователь\x20забанен!','transformOrigin','895105EafPHU','rgb(160,\x20106,\x2066)','#eef6ff','rgb(255,\x2084,\x20178)','catch','rgb(229,\x200,\x200)','rgb(0,\x20211,\x20221)','rgb(255,\x20167,\x20209)','px)\x20scale(','Ready!','rgb(130,\x200,\x20128)','metaKey','then','rgb(255,\x20255,\x20255)','fillRect','stroke','push','appendChild','change','rgba(255,0,0,0.5)','\x20\x20Y:\x20','fillStyle','teleportInput','remove','rgb(0,\x200,\x20234)','width','colorsChoice','split','mouseup','textContent','coordY','getElementById','readAsDataURL','users/','1111720WFDdeg','Только\x20админ!','top','1667214wsvIaR','getBoundingClientRect'];_0x4ba8=function(){return _0x429add;};return _0x4ba8();}let hoverCellX=0x0,hoverCellY=0x0;const pixelsCache=new Map();let markers=[];function updateCoordsDisplay(){const _0x56ba8e=_0x5cfcee;if(!coordsDisplayEl)return;const _0x14f3af=Math['floor'](hoverCellX/gridCellSize),_0x58b661=Math[_0x56ba8e(0x1aa)](hoverCellY/gridCellSize);coordsDisplayEl['textContent']=_0x56ba8e(0x178)+_0x14f3af+_0x56ba8e(0x13f)+_0x58b661;}const TILE_SIZE=0x3e8;let tiles=[];const offscreenCanvas=document[_0x5cfcee(0x165)](_0x5cfcee(0x15b));offscreenCanvas[_0x5cfcee(0x144)]=TILE_SIZE,offscreenCanvas[_0x5cfcee(0x15f)]=TILE_SIZE;const offCtx=offscreenCanvas['getContext']('2d',{'willReadFrequently':!![]});offCtx['imageSmoothingEnabled']=![],worldMap[_0x5cfcee(0x184)]=()=>{const _0x4fdf31=_0x5cfcee,_0x3244dc=worldMap['naturalWidth']||0x4e20,_0x1ad4e4=worldMap[_0x4fdf31(0x1af)]||0x4e20;WORLD_W=_0x3244dc*SCALE_TILE,WORLD_H=_0x1ad4e4*SCALE_TILE;const _0x5a750b=Math[_0x4fdf31(0x1ae)](_0x3244dc/TILE_SIZE),_0x258abd=Math[_0x4fdf31(0x1ae)](_0x1ad4e4/TILE_SIZE);tiles=[];for(let _0x56eb7d=0x0;_0x56eb7d<_0x5a750b;_0x56eb7d++){for(let _0x1d5ac9=0x0;_0x1d5ac9<_0x258abd;_0x1d5ac9++){const _0x5968e9=_0x56eb7d*TILE_SIZE,_0x4ef1a7=_0x1d5ac9*TILE_SIZE,_0x4a8c30=Math[_0x4fdf31(0x16f)](TILE_SIZE,_0x3244dc-_0x5968e9),_0x2a053a=Math[_0x4fdf31(0x16f)](TILE_SIZE,_0x1ad4e4-_0x4ef1a7);offCtx['clearRect'](0x0,0x0,TILE_SIZE,TILE_SIZE),offCtx[_0x4fdf31(0x170)](worldMap,_0x5968e9,_0x4ef1a7,_0x4a8c30,_0x2a053a,0x0,0x0,_0x4a8c30,_0x2a053a);const _0xf727e2=new Image();_0xf727e2[_0x4fdf31(0x1ac)]=offscreenCanvas['toDataURL']('image/png');const _0x462be4=_0x5968e9*SCALE_TILE,_0x402c2b=_0x4ef1a7*SCALE_TILE,_0x2e8448=_0x4a8c30*SCALE_TILE,_0x362503=_0x2a053a*SCALE_TILE;tiles[_0x4fdf31(0x13b)]({'img':_0xf727e2,'dx':_0x462be4,'dy':_0x402c2b,'dw':_0x2e8448,'dh':_0x362503});}}renderAll();};function renderAll(){const _0x20a941=_0x5cfcee;ctx[_0x20a941(0x159)]=![],ctx[_0x20a941(0x1a1)](0x1,0x0,0x0,0x1,0x0,0x0),ctx['clearRect'](0x0,0x0,game[_0x20a941(0x144)],game[_0x20a941(0x15f)]),ctx[_0x20a941(0x1a1)](scale,0x0,0x0,scale,-camX*scale,-camY*scale);const _0x292420=camX,_0x267ec3=camY,_0x4edde6=camX+game[_0x20a941(0x144)]/scale,_0x546689=camY+game[_0x20a941(0x15f)]/scale;for(const _0x37260e of tiles){if(_0x37260e['dx']+_0x37260e['dw']<_0x292420||_0x37260e['dx']>_0x4edde6||_0x37260e['dy']+_0x37260e['dh']<_0x267ec3||_0x37260e['dy']>_0x546689)continue;_0x37260e[_0x20a941(0x123)]['complete']&&_0x37260e['img'][_0x20a941(0x190)]?ctx[_0x20a941(0x170)](_0x37260e['img'],_0x37260e['dx'],_0x37260e['dy'],_0x37260e['dw'],_0x37260e['dh']):(ctx[_0x20a941(0x140)]=_0x20a941(0x12d),ctx[_0x20a941(0x139)](_0x37260e['dx'],_0x37260e['dy'],_0x37260e['dw'],_0x37260e['dh']));}ctx['beginPath'](),ctx[_0x20a941(0x15a)]=_0x20a941(0x174);let _0x2f0756=Math[_0x20a941(0x1aa)](_0x292420/gridCellSize)*gridCellSize;for(let _0x446c78=_0x2f0756;_0x446c78<=_0x4edde6;_0x446c78+=gridCellSize){ctx[_0x20a941(0x183)](_0x446c78,_0x267ec3),ctx[_0x20a941(0x1a0)](_0x446c78,_0x546689);}let _0x315f82=Math[_0x20a941(0x1aa)](_0x267ec3/gridCellSize)*gridCellSize;for(let _0x285fb4=_0x315f82;_0x285fb4<=_0x546689;_0x285fb4+=gridCellSize){ctx[_0x20a941(0x183)](_0x292420,_0x285fb4),ctx[_0x20a941(0x1a0)](_0x4edde6,_0x285fb4);}ctx[_0x20a941(0x13a)](),pixelsCache['forEach'](_0x3f1700=>{const _0x4905e3=_0x20a941;_0x3f1700[_0x4905e3(0x152)]!=='#FFFFFF'&&(ctx[_0x4905e3(0x140)]=_0x3f1700[_0x4905e3(0x152)],ctx[_0x4905e3(0x139)](_0x3f1700['x'],_0x3f1700['y'],gridCellSize,gridCellSize));}),ctx['fillStyle']=_0x20a941(0x13e);for(const [_0x129ed7,_0x243072]of markers){ctx[_0x20a941(0x139)](_0x129ed7,_0x243072,gridCellSize,gridCellSize);}ctx[_0x20a941(0x140)]=_0x20a941(0x118),ctx[_0x20a941(0x139)](hoverCellX,hoverCellY,gridCellSize,gridCellSize),ctx[_0x20a941(0x1a1)](0x1,0x0,0x0,0x1,0x0,0x0);}onSnapshot(collection(db,_0x5cfcee(0x19c)),_0x5c0a4e=>{const _0x259053=_0x5cfcee;pixelsCache[_0x259053(0x19d)](),_0x5c0a4e['forEach'](_0x2c9cc3=>{const _0xbfe6f2=_0x2c9cc3['data']();pixelsCache['set'](_0xbfe6f2['x']+'-'+_0xbfe6f2['y'],_0xbfe6f2);}),renderAll();}),game[_0x5cfcee(0x19f)](_0x5cfcee(0x121),_0x1e26d5=>{const _0x2a0b70=_0x5cfcee;(_0x1e26d5[_0x2a0b70(0x18c)]===0x1||_0x1e26d5[_0x2a0b70(0x18c)]===0x2||_0x1e26d5[_0x2a0b70(0x181)]||_0x1e26d5['ctrlKey']||_0x1e26d5[_0x2a0b70(0x136)]||_0x1e26d5['altKey'])&&(isPanning=!![],lastMouseX=_0x1e26d5[_0x2a0b70(0x163)],lastMouseY=_0x1e26d5[_0x2a0b70(0x16e)],_0x1e26d5[_0x2a0b70(0x19e)]());}),window[_0x5cfcee(0x19f)](_0x5cfcee(0x147),()=>{isPanning=![];}),game[_0x5cfcee(0x19f)](_0x5cfcee(0x1a5),_0x23f8ca=>_0x23f8ca[_0x5cfcee(0x19e)]()),game[_0x5cfcee(0x19f)]('mousemove',_0x10a9f1=>{const _0x12ea89=_0x5cfcee;if(isPanning){const _0x11fef6=_0x10a9f1[_0x12ea89(0x163)]-lastMouseX,_0x2845b8=_0x10a9f1[_0x12ea89(0x16e)]-lastMouseY;camX-=_0x11fef6/scale,camY-=_0x2845b8/scale,lastMouseX=_0x10a9f1['clientX'],lastMouseY=_0x10a9f1[_0x12ea89(0x16e)],renderAll();}const [_0x5b7bf7,_0x2d1e25]=screenToWorld(_0x10a9f1[_0x12ea89(0x163)],_0x10a9f1[_0x12ea89(0x16e)]);[hoverCellX,hoverCellY]=snapToGrid(_0x5b7bf7,_0x2d1e25),updateCoordsDisplay(),renderAll();}),game[_0x5cfcee(0x19f)]('wheel',_0x542272=>{const _0x336d12=_0x5cfcee;_0x542272[_0x336d12(0x19e)]();const _0x171a84=1.1,[_0x50e018,_0x410f47]=screenToWorld(_0x542272[_0x336d12(0x163)],_0x542272[_0x336d12(0x16e)]),_0x1dcbff=_0x542272[_0x336d12(0x17a)]<0x0?0x1:-0x1,_0x5d62af=clamp(scale*(_0x1dcbff>0x0?_0x171a84:0x1/_0x171a84),MIN_SCALE,MAX_SCALE);if(_0x5d62af===scale)return;scale=_0x5d62af;const _0x1b4b68=game['getBoundingClientRect']();camX=_0x50e018-(_0x542272['clientX']-_0x1b4b68['left'])/scale,camY=_0x410f47-(_0x542272[_0x336d12(0x16e)]-_0x1b4b68[_0x336d12(0x14f)])/scale;const [_0x5b9af1,_0x205698]=screenToWorld(_0x542272['clientX'],_0x542272[_0x336d12(0x16e)]);[hoverCellX,hoverCellY]=snapToGrid(_0x5b9af1,_0x205698),updateCoordsDisplay(),renderAll();},{'passive':![]});async function placePixelWithHover(){const _0x4b9453=_0x5cfcee;if(!auth[_0x4b9453(0x1b6)])return alert(_0x4b9453(0x120));if(!canPlace)return;canPlace=![];const _0x1fefd5=hoverCellX,_0x466456=hoverCellY,_0x377a93=doc(db,_0x4b9453(0x19c),_0x1fefd5+'-'+_0x466456);try{if(currentColor==='#FFFFFF')await deleteDoc(_0x377a93);else await setDoc(_0x377a93,{'x':_0x1fefd5,'y':_0x466456,'color':currentColor});}catch(_0x431011){console[_0x4b9453(0x15c)](_0x431011);}startReload();}game['addEventListener'](_0x5cfcee(0x188),_0x5cce5d=>{const _0x316f68=_0x5cfcee;if(isPanning||_0x5cce5d[_0x316f68(0x18c)]!==0x0)return;placePixelWithHover();});if(cursor)cursor[_0x5cfcee(0x173)][_0x5cfcee(0x1b0)]=_0x5cfcee(0x180);function startReload(){const _0xd1e494=_0x5cfcee;let _0x1e1e6d=reloadTime;reloadTimerEl[_0xd1e494(0x187)]='Reload:\x20'+_0x1e1e6d+_0xd1e494(0x18a);const _0x39dd0d=setInterval(()=>{const _0x4edf81=_0xd1e494;_0x1e1e6d--;if(_0x1e1e6d<=0x0)clearInterval(_0x39dd0d),canPlace=!![],reloadTimerEl['innerText']=_0x4edf81(0x134);else reloadTimerEl[_0x4edf81(0x187)]=_0x4edf81(0x16d)+_0x1e1e6d+'\x20sec';},0x3e8);}authButton[_0x5cfcee(0x19f)]('click',async()=>{const _0x2e203c=_0x5cfcee;if(auth['currentUser']){await signOut(auth);return;}const _0x84a600=prompt('Enter\x201\x20to\x20sign\x20in,\x20or\x202\x20to\x20create\x20a\x20new\x20account:');if(!_0x84a600||_0x84a600!=='1'&&_0x84a600!=='2')return;const _0x582dfc=prompt(_0x2e203c(0x160)),_0x1a889f=prompt(_0x2e203c(0x1b4));if(!_0x582dfc||!_0x1a889f)return;try{_0x84a600==='1'?(await signInWithEmailAndPassword(auth,_0x582dfc,_0x1a889f),alert(_0x2e203c(0x11c))):(await createUserWithEmailAndPassword(auth,_0x582dfc,_0x1a889f),alert(_0x2e203c(0x16b)));}catch(_0x35bd93){alert(_0x35bd93[_0x2e203c(0x1a6)]);}}),onAuthStateChanged(auth,_0xb2b082=>{const _0xddc8c6=_0x5cfcee;_0xb2b082?(authButton[_0xddc8c6(0x148)]=_0xddc8c6(0x17c),_0xb2b082[_0xddc8c6(0x179)]===_0xddc8c6(0x198)?adminPanel[_0xddc8c6(0x173)][_0xddc8c6(0x1b0)]='block':adminPanel['style'][_0xddc8c6(0x1b0)]='none'):(authButton[_0xddc8c6(0x148)]=_0xddc8c6(0x1a8),adminPanel[_0xddc8c6(0x173)]['display']='none');});function parseCoords(){const _0x801498=_0x5cfcee;markers=[];const _0x1e142f=coordsInput[_0x801498(0x17f)][_0x801498(0x15d)]();if(!_0x1e142f){renderAll();return;}_0x1e142f['split'](',')[_0x801498(0x1a3)](_0x1e26a1=>{const _0x1401bd=_0x801498,[_0x4ca425,_0x1c7ce7,_0x4938a2,_0x3b68c0]=_0x1e26a1[_0x1401bd(0x15d)]()[_0x1401bd(0x146)](/\s+/),_0x4beda6=parseInt(_0x4ca425),_0x4d62f3=parseInt(_0x1c7ce7),_0x11a068=parseInt(_0x4938a2||'1'),_0x27e34e=parseInt(_0x3b68c0||'1');if(Number['isNaN'](_0x4beda6)||Number['isNaN'](_0x4d62f3)||Number['isNaN'](_0x11a068)||Number[_0x1401bd(0x1ab)](_0x27e34e))return;const _0x24f016=_0x4beda6*gridCellSize,_0x1a7ed0=_0x4d62f3*gridCellSize;for(let _0x4aa3c0=0x0;_0x4aa3c0<_0x11a068;_0x4aa3c0++){for(let _0xa85e4a=0x0;_0xa85e4a<_0x27e34e;_0xa85e4a++){const _0x482ec5=_0x24f016+_0x4aa3c0*gridCellSize,_0x4c3c4f=_0x1a7ed0+_0xa85e4a*gridCellSize;_0x482ec5>=0x0&&_0x4c3c4f>=0x0&&_0x482ec5<=WORLD_W-gridCellSize&&_0x4c3c4f<=WORLD_H-gridCellSize&&markers[_0x1401bd(0x13b)]([_0x482ec5,_0x4c3c4f]);}}}),renderAll();}const upBtn=document[_0x5cfcee(0x14a)](_0x5cfcee(0x119)),downBtn=document[_0x5cfcee(0x14a)]('downBtn'),leftBtn=document['getElementById'](_0x5cfcee(0x16c)),rightBtn=document[_0x5cfcee(0x14a)](_0x5cfcee(0x1ad)),zoomInBtn=document[_0x5cfcee(0x14a)](_0x5cfcee(0x153)),zoomOutBtn=document[_0x5cfcee(0x14a)](_0x5cfcee(0x15e)),moveSpeed=0x32,zoomFactorBtn=1.2;function moveCamera(_0xf986a0,_0x183a7b){camX+=_0xf986a0/scale,camY+=_0x183a7b/scale,renderAll();}upBtn[_0x5cfcee(0x19f)](_0x5cfcee(0x188),()=>moveCamera(0x0,-moveSpeed)),downBtn['addEventListener']('click',()=>moveCamera(0x0,moveSpeed)),leftBtn[_0x5cfcee(0x19f)]('click',()=>moveCamera(-moveSpeed,0x0)),rightBtn[_0x5cfcee(0x19f)](_0x5cfcee(0x188),()=>moveCamera(moveSpeed,0x0)),zoomInBtn[_0x5cfcee(0x19f)]('click',()=>{const _0x4be263=clamp(scale*zoomFactorBtn,MIN_SCALE,MAX_SCALE);scale=_0x4be263,renderAll();}),zoomOutBtn[_0x5cfcee(0x19f)](_0x5cfcee(0x188),()=>{const _0x1ae46b=clamp(scale/zoomFactorBtn,MIN_SCALE,MAX_SCALE);scale=_0x1ae46b,renderAll();}),coordsInput['addEventListener'](_0x5cfcee(0x1a9),parseCoords);async function adminApplyPixels(_0x3d4fcf){const _0x5e6afc=_0x5cfcee;if(!auth[_0x5e6afc(0x1b6)]||auth[_0x5e6afc(0x1b6)][_0x5e6afc(0x179)]!==_0x5e6afc(0x198))return alert(_0x5e6afc(0x14e));parseCoords();let _0xb79a99=0x0;for(const [_0x39c75e,_0x576c43]of markers){const _0x12b2d1=doc(db,_0x5e6afc(0x19c),_0x39c75e+'-'+_0x576c43);_0x3d4fcf===_0x5e6afc(0x1a2)?(await setDoc(_0x12b2d1,{'x':_0x39c75e,'y':_0x576c43,'color':currentColor}),_0xb79a99++):(await deleteDoc(_0x12b2d1),_0xb79a99++);}alert((_0x3d4fcf===_0x5e6afc(0x1a2)?_0x5e6afc(0x127):_0x5e6afc(0x1b2))+_0x5e6afc(0x17e)+_0xb79a99);}addPixelBtn[_0x5cfcee(0x19f)](_0x5cfcee(0x188),()=>adminApplyPixels('add')),removePixelBtn[_0x5cfcee(0x19f)](_0x5cfcee(0x188),()=>adminApplyPixels('remove')),clearAllPixelsBtn['addEventListener']('click',async()=>{const _0x3a76b9=_0x5cfcee;if(!auth[_0x3a76b9(0x1b6)])return alert(_0x3a76b9(0x14e));const _0x4831bf=await getDocs(collection(db,'pixels'));_0x4831bf[_0x3a76b9(0x1a3)](_0x517bcb=>deleteDoc(_0x517bcb[_0x3a76b9(0x171)]));}),banUserBtn['addEventListener'](_0x5cfcee(0x188),()=>{const _0x157579=_0x5cfcee;if(!auth[_0x157579(0x1b6)])return alert(_0x157579(0x14e));const _0x335db2=prompt('Введите\x20UserID\x20для\x20бана:');if(!_0x335db2)return;const _0x7a77e7=ref(rtdb,_0x157579(0x14c)+_0x335db2);remove(_0x7a77e7)[_0x157579(0x137)](()=>alert(_0x157579(0x129)))[_0x157579(0x12f)](_0x412ee5=>console[_0x157579(0x15c)](_0x412ee5));});import{onDisconnect,set}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js';function _0x34cf(_0x234d55,_0x28d947){const _0x4ba854=_0x4ba8();return _0x34cf=function(_0x34cfb1,_0x3c4f73){_0x34cfb1=_0x34cfb1-0x116;let _0x4b4efb=_0x4ba854[_0x34cfb1];return _0x4b4efb;},_0x34cf(_0x234d55,_0x28d947);}function trackOnlinePlayer(){const _0x111c25=_0x5cfcee;if(!auth[_0x111c25(0x1b6)])return;const _0x3bf43d=auth[_0x111c25(0x1b6)]['uid'],_0x14d29a=ref(rtdb,_0x111c25(0x14c)+_0x3bf43d);set(_0x14d29a,{'email':auth[_0x111c25(0x1b6)][_0x111c25(0x179)],'lastSeen':Date[_0x111c25(0x197)]()}),onDisconnect(_0x14d29a)[_0x111c25(0x142)]();}onAuthStateChanged(auth,_0x424eb0=>{_0x424eb0&&trackOnlinePlayer();});function updateOnlinePlayers(){const _0x2f8959=_0x5cfcee,_0x4de311=ref(rtdb,_0x2f8959(0x14c));onValue(_0x4de311,_0x56ded4=>{const _0x18706d=_0x2f8959,_0x3aa8b1=_0x56ded4[_0x18706d(0x177)](),_0x31a433=_0x3aa8b1?Object['keys'](_0x3aa8b1)[_0x18706d(0x11b)]:0x0;onlinePlayersEl['innerText']=_0x18706d(0x19b)+_0x31a433;});}updateOnlinePlayers();const overlay=document[_0x5cfcee(0x14a)](_0x5cfcee(0x166)),fileInput=document[_0x5cfcee(0x14a)]('templateFile'),opacityRange=document[_0x5cfcee(0x14a)](_0x5cfcee(0x191)),coordX=document['getElementById'](_0x5cfcee(0x18b)),coordY=document[_0x5cfcee(0x14a)](_0x5cfcee(0x149)),applyCoordsBtn=document[_0x5cfcee(0x14a)](_0x5cfcee(0x186)),toggleBtn=document[_0x5cfcee(0x14a)]('toggleBtn');let templateX=0x0,templateY=0x0,templateOpacity=0.5,templateVisible=!![];fileInput[_0x5cfcee(0x19f)](_0x5cfcee(0x13d),_0x42543b=>{const _0x237f03=_0x5cfcee,_0x458908=_0x42543b['target'][_0x237f03(0x168)][0x0];if(!_0x458908)return;const _0xf19db6=new FileReader();_0xf19db6[_0x237f03(0x184)]=_0x25b5f5=>{const _0x85f3fe=_0x237f03;overlay[_0x85f3fe(0x1ac)]=_0x25b5f5[_0x85f3fe(0x1a4)]['result'],overlay[_0x85f3fe(0x173)][_0x85f3fe(0x1b0)]=_0x85f3fe(0x1a7);},_0xf19db6[_0x237f03(0x14b)](_0x458908);}),opacityRange[_0x5cfcee(0x19f)](_0x5cfcee(0x1a9),()=>{const _0x206394=_0x5cfcee;templateOpacity=opacityRange[_0x206394(0x17f)],overlay[_0x206394(0x173)][_0x206394(0x128)]=templateOpacity;}),applyCoordsBtn[_0x5cfcee(0x19f)](_0x5cfcee(0x188),()=>{const _0x5c6b05=_0x5cfcee;templateX=parseInt(coordX[_0x5c6b05(0x17f)])||0x0,templateY=parseInt(coordY['value'])||0x0,updateTemplatePosition();}),toggleBtn['addEventListener']('click',()=>{const _0x768cf9=_0x5cfcee;templateVisible=!templateVisible,overlay[_0x768cf9(0x173)]['display']=templateVisible?_0x768cf9(0x1a7):_0x768cf9(0x180);});function updateTemplatePosition(){const _0x33e9cb=_0x5cfcee;overlay[_0x33e9cb(0x173)]['transform']=_0x33e9cb(0x172)+(-camX*scale+templateX)+_0x33e9cb(0x162)+(-camY*scale+templateY)+_0x33e9cb(0x133)+scale+')',overlay[_0x33e9cb(0x173)][_0x33e9cb(0x12a)]='top\x20left';}const oldRenderAll=renderAll;renderAll=function(){oldRenderAll();if(overlay['src'])updateTemplatePosition();};
