const _0x54b93a=_0x388a;(function(_0x5187f6,_0x8d8361){const _0x16c9fd=_0x388a,_0x468094=_0x5187f6();while(!![]){try{const _0x4b3f4e=parseInt(_0x16c9fd(0x1a3))/0x1*(parseInt(_0x16c9fd(0x123))/0x2)+-parseInt(_0x16c9fd(0x176))/0x3*(parseInt(_0x16c9fd(0x12d))/0x4)+-parseInt(_0x16c9fd(0x194))/0x5*(-parseInt(_0x16c9fd(0x1a8))/0x6)+-parseInt(_0x16c9fd(0x15e))/0x7*(-parseInt(_0x16c9fd(0x19d))/0x8)+parseInt(_0x16c9fd(0x191))/0x9*(parseInt(_0x16c9fd(0x1bb))/0xa)+-parseInt(_0x16c9fd(0x13d))/0xb*(-parseInt(_0x16c9fd(0x195))/0xc)+-parseInt(_0x16c9fd(0x12c))/0xd;if(_0x4b3f4e===_0x8d8361)break;else _0x468094['push'](_0x468094['shift']());}catch(_0x3460f5){_0x468094['push'](_0x468094['shift']());}}}(_0x20ce,0xb9dfd));import{initializeApp}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js';import{getFirestore,collection,doc,setDoc,onSnapshot,deleteDoc,getDocs}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js';import{getDatabase,ref,remove}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js';import{getAuth,onAuthStateChanged,signInWithEmailAndPassword,createUserWithEmailAndPassword,signOut}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-auth.js';const firebaseConfig={'apiKey':_0x54b93a(0x154),'authDomain':'pixellox.firebaseapp.com','projectId':_0x54b93a(0x14e),'storageBucket':_0x54b93a(0x11e),'messagingSenderId':_0x54b93a(0x188),'appId':_0x54b93a(0x143)},app=initializeApp(firebaseConfig),db=getFirestore(app),rtdb=getDatabase(app),auth=getAuth(app),coordsDisplayEl=document[_0x54b93a(0x147)](_0x54b93a(0x19e)),colorsChoiceEl=document[_0x54b93a(0x147)](_0x54b93a(0x132)),paletteToggle=document[_0x54b93a(0x147)]('paletteToggle'),game=document['getElementById']('game'),ctx=game[_0x54b93a(0x160)]('2d'),cursor=document[_0x54b93a(0x147)](_0x54b93a(0x127)),reloadTimerEl=document['getElementById']('reloadTimer'),adminPanel=document['getElementById'](_0x54b93a(0x193)),clearAllPixelsBtn=document[_0x54b93a(0x147)](_0x54b93a(0x1b7)),banUserBtn=document[_0x54b93a(0x147)]('banUser'),authButton=document['getElementById'](_0x54b93a(0x199)),coordsInput=document[_0x54b93a(0x147)](_0x54b93a(0x172)),addPixelBtn=document[_0x54b93a(0x147)](_0x54b93a(0x1a6)),removePixelBtn=document[_0x54b93a(0x147)](_0x54b93a(0x16e)),teleportInput=document['getElementById'](_0x54b93a(0x138)),teleportBtn=document['getElementById'](_0x54b93a(0x19b));teleportBtn['addEventListener'](_0x54b93a(0x162),()=>{const _0x3735f1=_0x54b93a;if(!auth['currentUser']||auth[_0x3735f1(0x171)][_0x3735f1(0x17a)]!==_0x3735f1(0x13f))return alert(_0x3735f1(0x18a));const _0x167ee4=teleportInput[_0x3735f1(0x180)][_0x3735f1(0x15f)]();if(!_0x167ee4)return;const [_0x4f4891,_0x286bc5]=_0x167ee4[_0x3735f1(0x128)](/\s+/),_0x443c67=parseInt(_0x4f4891),_0x568b81=parseInt(_0x286bc5);if(Number[_0x3735f1(0x134)](_0x443c67)||Number[_0x3735f1(0x134)](_0x568b81))return alert(_0x3735f1(0x1b3));const _0x31a2e6=_0x443c67*gridCellSize,_0x2ab714=_0x568b81*gridCellSize;camX=_0x31a2e6-game[_0x3735f1(0x141)]/0x2/scale,camY=_0x2ab714-game['height']/0x2/scale,renderAll();}),ctx['imageSmoothingEnabled']=![];const gridCellSize=0xa;game[_0x54b93a(0x141)]=0x4b0,game[_0x54b93a(0x16b)]=0x258;let currentColor=_0x54b93a(0x158),canPlace=!![];const reloadTime=0x5,colors=[_0x54b93a(0x17d),_0x54b93a(0x140),'rgb(228,\x20228,\x20228)','rgb(245,\x20223,\x20176)',_0x54b93a(0x161),_0x54b93a(0x163),_0x54b93a(0x152),'rgb(229,\x20217,\x200)','rgb(78,\x2078,\x2078)',_0x54b93a(0x15d),'rgb(0,\x200,\x200)',_0x54b93a(0x1a2),_0x54b93a(0x14c),_0x54b93a(0x17e),_0x54b93a(0x184),'rgb(0,\x20101,\x2019)',_0x54b93a(0x16c),_0x54b93a(0x18b),_0x54b93a(0x183),'rgb(0,\x20211,\x20221)',_0x54b93a(0x187),_0x54b93a(0x11f),_0x54b93a(0x124),_0x54b93a(0x11c),'rgb(254,\x20164,\x2096)',_0x54b93a(0x15a),'rgb(229,\x20149,\x200)',_0x54b93a(0x182),_0x54b93a(0x133),_0x54b93a(0x181)];colorsChoiceEl[_0x54b93a(0x13e)]='',colors[_0x54b93a(0x178)](_0x2a64ab=>{const _0x370bcd=_0x54b93a,_0x6215a3=document[_0x370bcd(0x129)]('div');_0x6215a3[_0x370bcd(0x185)][_0x370bcd(0x192)]=_0x2a64ab,_0x6215a3[_0x370bcd(0x196)](_0x370bcd(0x162),()=>{const _0x1a7dcb=_0x370bcd;currentColor=_0x2a64ab,document[_0x1a7dcb(0x1b0)](_0x1a7dcb(0x164))[_0x1a7dcb(0x178)](_0x1d8153=>_0x1d8153['classList'][_0x1a7dcb(0x155)](_0x1a7dcb(0x1b4))),_0x6215a3[_0x1a7dcb(0x1a5)]['add']('selected');}),colorsChoiceEl[_0x370bcd(0x130)](_0x6215a3);});const colorsChoice=document[_0x54b93a(0x147)](_0x54b93a(0x132)),togglePalette=document[_0x54b93a(0x147)](_0x54b93a(0x12b));function _0x20ce(){const _0x5407d9=['textContent','left','drawImage','rgb(2,\x20190,\x201)','174LNACHo','catch','classList','addPixelBtn','top','39558rlbmDV','floor','ceil','mousemove','block','strokeStyle','beginPath','fillRect','querySelectorAll','onload','touchmove','Введите\x20корректные\x20координаты\x20X\x20Y','selected','length','button','clearAllPixels','setTransform','imageSmoothingEnabled','Online\x20players:\x20','5650mfMVYo','X:\x20','rgb(0,\x200,\x20234)','getBoundingClientRect','pixellox.firebasestorage.app','rgb(0,\x20131,\x20199)','altKey','touchend','mouseup','778FpvgDx','rgb(154,\x200,\x200)','error','image/png','cursor','split','createElement','uid','togglePalette','17384679JOzECr','14384TjfvVs','Come\x20in!','rgba(255,0,0,0.5)','appendChild','wheel','colorsChoice','rgb(160,\x20106,\x2066)','isNaN','add','Enter\x201\x20to\x20sign\x20in,\x20or\x202\x20to\x20create\x20a\x20new\x20account:','toDataURL','teleportInput','set','min','canvas','deltaY','11mJimre','innerHTML','logo100153@gmail.com','rgb(96,\x2064,\x2040)','width','lineTo','1:461991610382:web:2a5ae293dde4a754c2d45f','val','\x20sec','#eef6ff','getElementById','Login\x20to\x20draw!','preventDefault','Log\x20Out','touches','rgb(244,\x20179,\x20174)','innerText','pixellox','stroke','Удалено','img','rgb(136,\x20136,\x20136)','message','AIzaSyCwy4jVn9JIwXuIXVycYAv9EdPGPkgIJvA','remove','#ccc','#FFFFFF','#000000','src','rgb(25,\x2025,\x20115)','none','display','rgb(148,\x20224,\x2068)','6641684UJhYTC','trim','getContext','rgb(196,\x20196,\x20196)','click','rgb(255,\x20248,\x20137)','#colorsChoice\x20div','clientY','Email:','users/','keys','rgba(0,0,0,0.12)','then','height','rgb(255,\x2084,\x20178)','clearRect','removePixelBtn','ref','moveTo','currentUser','coordsInput','ctrlKey','clear','push','984qQOeVa','\x20пикселей:\x20','forEach','pixels','email','now','color','rgb(255,\x20255,\x20255)','rgb(104,\x20131,\x2056)','Добавлено','value','rgb(130,\x200,\x20128)','rgb(207,\x20110,\x20228)','rgb(255,\x20101,\x20101)','rgb(255,\x20167,\x20209)','style','naturalHeight','rgb(229,\x200,\x200)','461991610382','clientX','Только\x20админ!','rgb(202,\x20227,\x20255)','Log\x20In','fillStyle','metaKey','max','Password:','19476EjdViG','backgroundColor','adminPanel','355TpbcWQ','6850212WOwfNh','addEventListener','naturalWidth','Reload:\x20','authButton','mousedown','teleportBtn','shiftKey','8Wlbdgl','coordsDisplay'];_0x20ce=function(){return _0x5407d9;};return _0x20ce();}togglePalette[_0x54b93a(0x196)](_0x54b93a(0x162),()=>{const _0x508131=_0x54b93a;colorsChoice['style'][_0x508131(0x15c)]==='none'?colorsChoice[_0x508131(0x185)]['display']='grid':colorsChoice[_0x508131(0x185)][_0x508131(0x15c)]='none';});function _0x388a(_0x40f78d,_0x2c735f){const _0x20ce95=_0x20ce();return _0x388a=function(_0x388a6a,_0x3a0138){_0x388a6a=_0x388a6a-0x11c;let _0x9e06e3=_0x20ce95[_0x388a6a];return _0x9e06e3;},_0x388a(_0x40f78d,_0x2c735f);}const worldMap=new Image();worldMap[_0x54b93a(0x159)]='world.png';const SCALE_TILE=0x28;let WORLD_W=0x4e20*SCALE_TILE,WORLD_H=0x4e20*SCALE_TILE,camX=0x0,camY=0x0,scale=0x1;const MIN_SCALE=0.005,MAX_SCALE=0x6;let isPanning=![],lastMouseX=0x0,lastMouseY=0x0;function clamp(_0x339ecd,_0x2bce6e,_0x2537a1){const _0x4da4af=_0x54b93a;return Math[_0x4da4af(0x18f)](_0x2bce6e,Math[_0x4da4af(0x13a)](_0x2537a1,_0x339ecd));}function screenToWorld(_0x307283,_0x19e28f){const _0x361437=_0x54b93a,_0x58c0d5=game[_0x361437(0x11d)](),_0x5379de=(_0x307283-_0x58c0d5[_0x361437(0x1a0)])/scale+camX,_0x4caffe=(_0x19e28f-_0x58c0d5[_0x361437(0x1a7)])/scale+camY;return[_0x5379de,_0x4caffe];}function snapToGrid(_0x467a1b,_0x37be61){const _0x703b8b=_0x54b93a;return[Math['floor'](_0x467a1b/gridCellSize)*gridCellSize,Math[_0x703b8b(0x1a9)](_0x37be61/gridCellSize)*gridCellSize];}let hoverCellX=0x0,hoverCellY=0x0;const pixelsCache=new Map();let markers=[];function updateCoordsDisplay(){const _0x6a33fd=_0x54b93a;if(!coordsDisplayEl)return;const _0x827a96=Math[_0x6a33fd(0x1a9)](hoverCellX/gridCellSize),_0x6cf7f0=Math[_0x6a33fd(0x1a9)](hoverCellY/gridCellSize);coordsDisplayEl[_0x6a33fd(0x19f)]=_0x6a33fd(0x1bc)+_0x827a96+'\x20\x20Y:\x20'+_0x6cf7f0;}const TILE_SIZE=0x3e8;let tiles=[];const offscreenCanvas=document[_0x54b93a(0x129)](_0x54b93a(0x13b));offscreenCanvas[_0x54b93a(0x141)]=TILE_SIZE,offscreenCanvas[_0x54b93a(0x16b)]=TILE_SIZE;const offCtx=offscreenCanvas[_0x54b93a(0x160)]('2d',{'willReadFrequently':!![]});offCtx[_0x54b93a(0x1b9)]=![],worldMap[_0x54b93a(0x1b1)]=()=>{const _0x5576f8=_0x54b93a,_0x7335b8=worldMap[_0x5576f8(0x197)]||0x4e20,_0x3e1913=worldMap[_0x5576f8(0x186)]||0x4e20;WORLD_W=_0x7335b8*SCALE_TILE,WORLD_H=_0x3e1913*SCALE_TILE;const _0x40afc8=Math['ceil'](_0x7335b8/TILE_SIZE),_0x1f479c=Math[_0x5576f8(0x1aa)](_0x3e1913/TILE_SIZE);tiles=[];for(let _0x29d531=0x0;_0x29d531<_0x40afc8;_0x29d531++){for(let _0x143cd5=0x0;_0x143cd5<_0x1f479c;_0x143cd5++){const _0x55cf49=_0x29d531*TILE_SIZE,_0x1b06f0=_0x143cd5*TILE_SIZE,_0x26fa57=Math[_0x5576f8(0x13a)](TILE_SIZE,_0x7335b8-_0x55cf49),_0x42f7f9=Math[_0x5576f8(0x13a)](TILE_SIZE,_0x3e1913-_0x1b06f0);offCtx['clearRect'](0x0,0x0,TILE_SIZE,TILE_SIZE),offCtx[_0x5576f8(0x1a1)](worldMap,_0x55cf49,_0x1b06f0,_0x26fa57,_0x42f7f9,0x0,0x0,_0x26fa57,_0x42f7f9);const _0x486632=new Image();_0x486632[_0x5576f8(0x159)]=offscreenCanvas[_0x5576f8(0x137)](_0x5576f8(0x126));const _0x3a4a8e=_0x55cf49*SCALE_TILE,_0x5dc079=_0x1b06f0*SCALE_TILE,_0x435f71=_0x26fa57*SCALE_TILE,_0x44522e=_0x42f7f9*SCALE_TILE;tiles[_0x5576f8(0x175)]({'img':_0x486632,'dx':_0x3a4a8e,'dy':_0x5dc079,'dw':_0x435f71,'dh':_0x44522e});}}renderAll();};function renderAll(){const _0x5f1f31=_0x54b93a;ctx[_0x5f1f31(0x1b9)]=![],ctx[_0x5f1f31(0x1b8)](0x1,0x0,0x0,0x1,0x0,0x0),ctx[_0x5f1f31(0x16d)](0x0,0x0,game[_0x5f1f31(0x141)],game[_0x5f1f31(0x16b)]),ctx['setTransform'](scale,0x0,0x0,scale,-camX*scale,-camY*scale);const _0x10d832=camX,_0x4f4c3b=camY,_0x2d5add=camX+game[_0x5f1f31(0x141)]/scale,_0x223080=camY+game[_0x5f1f31(0x16b)]/scale;for(const _0x1651c7 of tiles){if(_0x1651c7['dx']+_0x1651c7['dw']<_0x10d832||_0x1651c7['dx']>_0x2d5add||_0x1651c7['dy']+_0x1651c7['dh']<_0x4f4c3b||_0x1651c7['dy']>_0x223080)continue;_0x1651c7['img']['complete']&&_0x1651c7[_0x5f1f31(0x151)][_0x5f1f31(0x197)]?ctx[_0x5f1f31(0x1a1)](_0x1651c7[_0x5f1f31(0x151)],_0x1651c7['dx'],_0x1651c7['dy'],_0x1651c7['dw'],_0x1651c7['dh']):(ctx[_0x5f1f31(0x18d)]=_0x5f1f31(0x146),ctx['fillRect'](_0x1651c7['dx'],_0x1651c7['dy'],_0x1651c7['dw'],_0x1651c7['dh']));}ctx[_0x5f1f31(0x1ae)](),ctx[_0x5f1f31(0x1ad)]=_0x5f1f31(0x156);let _0x12fa9c=Math[_0x5f1f31(0x1a9)](_0x10d832/gridCellSize)*gridCellSize;for(let _0x1fff87=_0x12fa9c;_0x1fff87<=_0x2d5add;_0x1fff87+=gridCellSize){ctx[_0x5f1f31(0x170)](_0x1fff87,_0x4f4c3b),ctx[_0x5f1f31(0x142)](_0x1fff87,_0x223080);}let _0x5b05dc=Math['floor'](_0x4f4c3b/gridCellSize)*gridCellSize;for(let _0x22b998=_0x5b05dc;_0x22b998<=_0x223080;_0x22b998+=gridCellSize){ctx[_0x5f1f31(0x170)](_0x10d832,_0x22b998),ctx[_0x5f1f31(0x142)](_0x2d5add,_0x22b998);}ctx[_0x5f1f31(0x14f)](),pixelsCache[_0x5f1f31(0x178)](_0x354419=>{const _0x2399c9=_0x5f1f31;_0x354419[_0x2399c9(0x17c)]!==_0x2399c9(0x157)&&(ctx[_0x2399c9(0x18d)]=_0x354419[_0x2399c9(0x17c)],ctx[_0x2399c9(0x1af)](_0x354419['x'],_0x354419['y'],gridCellSize,gridCellSize));}),ctx['fillStyle']=_0x5f1f31(0x12f);for(const [_0x2657f2,_0x284872]of markers){ctx['fillRect'](_0x2657f2,_0x284872,gridCellSize,gridCellSize);}ctx[_0x5f1f31(0x18d)]=_0x5f1f31(0x169),ctx[_0x5f1f31(0x1af)](hoverCellX,hoverCellY,gridCellSize,gridCellSize),ctx[_0x5f1f31(0x1b8)](0x1,0x0,0x0,0x1,0x0,0x0);}onSnapshot(collection(db,_0x54b93a(0x179)),_0x282fba=>{const _0x439680=_0x54b93a;pixelsCache[_0x439680(0x174)](),_0x282fba[_0x439680(0x178)](_0x19f455=>{const _0x405a2f=_0x439680,_0x58f513=_0x19f455['data']();pixelsCache[_0x405a2f(0x139)](_0x58f513['x']+'-'+_0x58f513['y'],_0x58f513);}),renderAll();}),game[_0x54b93a(0x196)](_0x54b93a(0x19a),_0x34f541=>{const _0x2f649d=_0x54b93a;(_0x34f541[_0x2f649d(0x1b6)]===0x1||_0x34f541[_0x2f649d(0x1b6)]===0x2||_0x34f541[_0x2f649d(0x19c)]||_0x34f541[_0x2f649d(0x173)]||_0x34f541[_0x2f649d(0x18e)]||_0x34f541[_0x2f649d(0x120)])&&(isPanning=!![],lastMouseX=_0x34f541[_0x2f649d(0x189)],lastMouseY=_0x34f541['clientY'],_0x34f541[_0x2f649d(0x149)]());}),window[_0x54b93a(0x196)](_0x54b93a(0x122),()=>{isPanning=![];}),game[_0x54b93a(0x196)]('contextmenu',_0x18e5f4=>_0x18e5f4[_0x54b93a(0x149)]()),game[_0x54b93a(0x196)](_0x54b93a(0x1ab),_0x24f5c6=>{const _0x1e5f86=_0x54b93a;if(isPanning){const _0x3d8c87=_0x24f5c6[_0x1e5f86(0x189)]-lastMouseX,_0x4e01a4=_0x24f5c6[_0x1e5f86(0x165)]-lastMouseY;camX-=_0x3d8c87/scale,camY-=_0x4e01a4/scale,lastMouseX=_0x24f5c6[_0x1e5f86(0x189)],lastMouseY=_0x24f5c6[_0x1e5f86(0x165)],renderAll();}const [_0x2e349f,_0x59fc01]=screenToWorld(_0x24f5c6[_0x1e5f86(0x189)],_0x24f5c6[_0x1e5f86(0x165)]);[hoverCellX,hoverCellY]=snapToGrid(_0x2e349f,_0x59fc01),updateCoordsDisplay(),renderAll();}),game[_0x54b93a(0x196)](_0x54b93a(0x131),_0x313fc5=>{const _0xc66fcb=_0x54b93a;_0x313fc5[_0xc66fcb(0x149)]();const _0xa109e4=1.1,[_0x30c7c2,_0x28341f]=screenToWorld(_0x313fc5[_0xc66fcb(0x189)],_0x313fc5['clientY']),_0x361205=_0x313fc5[_0xc66fcb(0x13c)]<0x0?0x1:-0x1,_0x3b43fd=clamp(scale*(_0x361205>0x0?_0xa109e4:0x1/_0xa109e4),MIN_SCALE,MAX_SCALE);if(_0x3b43fd===scale)return;scale=_0x3b43fd;const _0x1fb119=game[_0xc66fcb(0x11d)]();camX=_0x30c7c2-(_0x313fc5[_0xc66fcb(0x189)]-_0x1fb119[_0xc66fcb(0x1a0)])/scale,camY=_0x28341f-(_0x313fc5[_0xc66fcb(0x165)]-_0x1fb119['top'])/scale;const [_0x17f628,_0x2ea2f3]=screenToWorld(_0x313fc5[_0xc66fcb(0x189)],_0x313fc5[_0xc66fcb(0x165)]);[hoverCellX,hoverCellY]=snapToGrid(_0x17f628,_0x2ea2f3),updateCoordsDisplay(),renderAll();},{'passive':![]});async function placePixelWithHover(){const _0x4f60a4=_0x54b93a;if(!auth[_0x4f60a4(0x171)])return alert(_0x4f60a4(0x148));if(!canPlace)return;canPlace=![];const _0x4c631b=hoverCellX,_0x38339c=hoverCellY,_0x694973=doc(db,_0x4f60a4(0x179),_0x4c631b+'-'+_0x38339c);try{if(currentColor===_0x4f60a4(0x157))await deleteDoc(_0x694973);else await setDoc(_0x694973,{'x':_0x4c631b,'y':_0x38339c,'color':currentColor});}catch(_0x4148c2){console[_0x4f60a4(0x125)](_0x4148c2);}startReload();}game[_0x54b93a(0x196)](_0x54b93a(0x162),_0x4f03a7=>{const _0x110bf7=_0x54b93a;if(isPanning||_0x4f03a7[_0x110bf7(0x1b6)]!==0x0)return;placePixelWithHover();});if(cursor)cursor[_0x54b93a(0x185)][_0x54b93a(0x15c)]='none';function startReload(){const _0x3d0838=_0x54b93a;let _0xf51c5f=reloadTime;reloadTimerEl['innerText']=_0x3d0838(0x198)+_0xf51c5f+_0x3d0838(0x145);const _0x209ba=setInterval(()=>{const _0x5668bd=_0x3d0838;_0xf51c5f--;if(_0xf51c5f<=0x0)clearInterval(_0x209ba),canPlace=!![],reloadTimerEl[_0x5668bd(0x14d)]='Ready!';else reloadTimerEl[_0x5668bd(0x14d)]=_0x5668bd(0x198)+_0xf51c5f+_0x5668bd(0x145);},0x3e8);}authButton['addEventListener'](_0x54b93a(0x162),async()=>{const _0x70d078=_0x54b93a;if(auth[_0x70d078(0x171)]){await signOut(auth);return;}const _0x5dd0de=prompt(_0x70d078(0x136));if(!_0x5dd0de||_0x5dd0de!=='1'&&_0x5dd0de!=='2')return;const _0x28afc7=prompt(_0x70d078(0x166)),_0x50302c=prompt(_0x70d078(0x190));if(!_0x28afc7||!_0x50302c)return;try{_0x5dd0de==='1'?(await signInWithEmailAndPassword(auth,_0x28afc7,_0x50302c),alert(_0x70d078(0x12e))):(await createUserWithEmailAndPassword(auth,_0x28afc7,_0x50302c),alert('Account\x20created!'));}catch(_0xb070f5){alert(_0xb070f5[_0x70d078(0x153)]);}}),onAuthStateChanged(auth,_0x5c8287=>{const _0x1eeee8=_0x54b93a;_0x5c8287?(authButton[_0x1eeee8(0x19f)]=_0x1eeee8(0x14a),_0x5c8287[_0x1eeee8(0x17a)]===_0x1eeee8(0x13f)?adminPanel['style'][_0x1eeee8(0x15c)]=_0x1eeee8(0x1ac):adminPanel['style'][_0x1eeee8(0x15c)]='none'):(authButton[_0x1eeee8(0x19f)]=_0x1eeee8(0x18c),adminPanel[_0x1eeee8(0x185)][_0x1eeee8(0x15c)]=_0x1eeee8(0x15b));});function parseCoords(){const _0x59367f=_0x54b93a;markers=[];const _0x370771=coordsInput[_0x59367f(0x180)][_0x59367f(0x15f)]();if(!_0x370771){renderAll();return;}_0x370771[_0x59367f(0x128)](',')[_0x59367f(0x178)](_0x4e67bb=>{const _0x1080ab=_0x59367f,[_0x56ffab,_0x331eeb,_0x138b27,_0x32bcea]=_0x4e67bb[_0x1080ab(0x15f)]()[_0x1080ab(0x128)](/\s+/),_0x2fa08b=parseInt(_0x56ffab),_0x14e7cf=parseInt(_0x331eeb),_0x464d29=parseInt(_0x138b27||'1'),_0xe66cd2=parseInt(_0x32bcea||'1');if(Number[_0x1080ab(0x134)](_0x2fa08b)||Number[_0x1080ab(0x134)](_0x14e7cf)||Number['isNaN'](_0x464d29)||Number[_0x1080ab(0x134)](_0xe66cd2))return;const _0x15f2ff=_0x2fa08b*gridCellSize,_0x300b23=_0x14e7cf*gridCellSize;for(let _0x4dc03e=0x0;_0x4dc03e<_0x464d29;_0x4dc03e++){for(let _0x380576=0x0;_0x380576<_0xe66cd2;_0x380576++){const _0x356fe1=_0x15f2ff+_0x4dc03e*gridCellSize,_0x3d6c0e=_0x300b23+_0x380576*gridCellSize;_0x356fe1>=0x0&&_0x3d6c0e>=0x0&&_0x356fe1<=WORLD_W-gridCellSize&&_0x3d6c0e<=WORLD_H-gridCellSize&&markers['push']([_0x356fe1,_0x3d6c0e]);}}}),renderAll();}coordsInput[_0x54b93a(0x196)]('input',parseCoords);async function adminApplyPixels(_0x3f01a2){const _0x21553e=_0x54b93a;if(!auth[_0x21553e(0x171)]||auth[_0x21553e(0x171)][_0x21553e(0x17a)]!=='logo100153@gmail.com')return alert(_0x21553e(0x18a));parseCoords();let _0x83f76=0x0;for(const [_0x556780,_0x2eec28]of markers){const _0xf6d437=doc(db,_0x21553e(0x179),_0x556780+'-'+_0x2eec28);_0x3f01a2==='add'?(await setDoc(_0xf6d437,{'x':_0x556780,'y':_0x2eec28,'color':currentColor}),_0x83f76++):(await deleteDoc(_0xf6d437),_0x83f76++);}alert((_0x3f01a2===_0x21553e(0x135)?_0x21553e(0x17f):_0x21553e(0x150))+_0x21553e(0x177)+_0x83f76);}addPixelBtn[_0x54b93a(0x196)](_0x54b93a(0x162),()=>adminApplyPixels(_0x54b93a(0x135))),removePixelBtn['addEventListener'](_0x54b93a(0x162),()=>adminApplyPixels(_0x54b93a(0x155))),clearAllPixelsBtn['addEventListener'](_0x54b93a(0x162),async()=>{const _0x2117ea=_0x54b93a;if(!auth[_0x2117ea(0x171)])return alert(_0x2117ea(0x18a));const _0x14d558=await getDocs(collection(db,_0x2117ea(0x179)));_0x14d558['forEach'](_0x51b354=>deleteDoc(_0x51b354[_0x2117ea(0x16f)]));}),banUserBtn[_0x54b93a(0x196)]('click',()=>{const _0x401c29=_0x54b93a;if(!auth[_0x401c29(0x171)])return alert(_0x401c29(0x18a));const _0x34a13d=prompt('Введите\x20UserID\x20для\x20бана:');if(!_0x34a13d)return;const _0x311745=ref(rtdb,_0x401c29(0x167)+_0x34a13d);remove(_0x311745)[_0x401c29(0x16a)](()=>alert('Пользователь\x20забанен!'))[_0x401c29(0x1a4)](_0xf89308=>console[_0x401c29(0x125)](_0xf89308));});import{onDisconnect,set}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js';function trackOnlinePlayer(){const _0x1916ae=_0x54b93a;if(!auth[_0x1916ae(0x171)])return;const _0x5b3969=auth[_0x1916ae(0x171)][_0x1916ae(0x12a)],_0x39797a=ref(rtdb,_0x1916ae(0x167)+_0x5b3969);set(_0x39797a,{'email':auth[_0x1916ae(0x171)][_0x1916ae(0x17a)],'lastSeen':Date[_0x1916ae(0x17b)]()}),onDisconnect(_0x39797a)['remove']();}onAuthStateChanged(auth,_0x2375c8=>{_0x2375c8&&trackOnlinePlayer();});function updateOnlinePlayers(){const _0x22eec9=_0x54b93a,_0x48f046=ref(rtdb,_0x22eec9(0x167));onValue(_0x48f046,_0x3475e4=>{const _0x567654=_0x22eec9,_0x2c4db9=_0x3475e4[_0x567654(0x144)](),_0x13df36=_0x2c4db9?Object[_0x567654(0x168)](_0x2c4db9)['length']:0x0;onlinePlayersEl[_0x567654(0x14d)]=_0x567654(0x1ba)+_0x13df36;});}updateOnlinePlayers();let lastTouchX=0x0,lastTouchY=0x0,isTouchPanning=![];game[_0x54b93a(0x196)]('touchstart',_0x16de7d=>{const _0x29ff4b=_0x54b93a;_0x16de7d[_0x29ff4b(0x14b)][_0x29ff4b(0x1b5)]===0x1&&(isTouchPanning=!![],lastTouchX=_0x16de7d[_0x29ff4b(0x14b)][0x0][_0x29ff4b(0x189)],lastTouchY=_0x16de7d['touches'][0x0][_0x29ff4b(0x165)]);}),game[_0x54b93a(0x196)](_0x54b93a(0x1b2),_0x5d0de0=>{const _0x4664c4=_0x54b93a;if(isTouchPanning&&_0x5d0de0[_0x4664c4(0x14b)]['length']===0x1){const _0x1ee15e=_0x5d0de0[_0x4664c4(0x14b)][0x0],_0x5f0453=_0x1ee15e[_0x4664c4(0x189)]-lastTouchX,_0x563387=_0x1ee15e[_0x4664c4(0x165)]-lastTouchY;camX-=_0x5f0453/scale,camY-=_0x563387/scale,lastTouchX=_0x1ee15e[_0x4664c4(0x189)],lastTouchY=_0x1ee15e[_0x4664c4(0x165)],renderAll();}_0x5d0de0[_0x4664c4(0x149)]();},{'passive':![]}),game[_0x54b93a(0x196)](_0x54b93a(0x121),_0x177abe=>{isTouchPanning=![];});
