const _0x16fd29=_0x25c4;(function(_0x4dd4ab,_0x3cd938){const _0x4cccda=_0x25c4,_0xf4de01=_0x4dd4ab();while(!![]){try{const _0x2c8c58=parseInt(_0x4cccda(0x26e))/0x1+-parseInt(_0x4cccda(0x219))/0x2+parseInt(_0x4cccda(0x203))/0x3*(-parseInt(_0x4cccda(0x1e5))/0x4)+-parseInt(_0x4cccda(0x20a))/0x5*(-parseInt(_0x4cccda(0x226))/0x6)+parseInt(_0x4cccda(0x1d4))/0x7+parseInt(_0x4cccda(0x25d))/0x8*(-parseInt(_0x4cccda(0x227))/0x9)+-parseInt(_0x4cccda(0x232))/0xa*(-parseInt(_0x4cccda(0x254))/0xb);if(_0x2c8c58===_0x3cd938)break;else _0xf4de01['push'](_0xf4de01['shift']());}catch(_0x47e15f){_0xf4de01['push'](_0xf4de01['shift']());}}}(_0x4e56,0x90f83));import{initializeApp}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js';import{getFirestore,collection,doc,setDoc,onSnapshot,deleteDoc,getDocs}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js';import{getDatabase,ref,remove}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js';import{getAuth,onAuthStateChanged,signInWithEmailAndPassword,createUserWithEmailAndPassword,signOut}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-auth.js';const firebaseConfig={'apiKey':'AIzaSyCwy4jVn9JIwXuIXVycYAv9EdPGPkgIJvA','authDomain':_0x16fd29(0x21d),'projectId':'pixellox','storageBucket':'pixellox.firebasestorage.app','messagingSenderId':_0x16fd29(0x24c),'appId':_0x16fd29(0x217)},app=initializeApp(firebaseConfig),db=getFirestore(app),rtdb=getDatabase(app),auth=getAuth(app),coordsDisplayEl=document['getElementById']('coordsDisplay'),colorsChoiceEl=document['getElementById'](_0x16fd29(0x25a)),paletteToggle=document['getElementById']('paletteToggle'),game=document[_0x16fd29(0x240)](_0x16fd29(0x22d)),ctx=game[_0x16fd29(0x243)]('2d'),cursor=document['getElementById'](_0x16fd29(0x239)),reloadTimerEl=document['getElementById']('reloadTimer'),adminPanel=document['getElementById'](_0x16fd29(0x208)),clearAllPixelsBtn=document[_0x16fd29(0x240)](_0x16fd29(0x26c)),banUserBtn=document[_0x16fd29(0x240)]('banUser'),authButton=document[_0x16fd29(0x240)]('authButton'),coordsInput=document['getElementById']('coordsInput'),addPixelBtn=document[_0x16fd29(0x240)]('addPixelBtn'),removePixelBtn=document[_0x16fd29(0x240)](_0x16fd29(0x21f)),teleportInput=document['getElementById'](_0x16fd29(0x1cb)),teleportBtn=document['getElementById'](_0x16fd29(0x204));teleportBtn[_0x16fd29(0x1dc)](_0x16fd29(0x1d0),()=>{const _0x2a4a9d=_0x16fd29;if(!auth[_0x2a4a9d(0x1e8)]||auth[_0x2a4a9d(0x1e8)][_0x2a4a9d(0x1e9)]!=='logo100153@gmail.com')return alert(_0x2a4a9d(0x245));const _0x178436=teleportInput[_0x2a4a9d(0x22a)][_0x2a4a9d(0x235)]();if(!_0x178436)return;const [_0x22b705,_0x5cf578]=_0x178436[_0x2a4a9d(0x266)](/\s+/),_0x2451e8=parseInt(_0x22b705),_0x5f1867=parseInt(_0x5cf578);if(Number[_0x2a4a9d(0x248)](_0x2451e8)||Number[_0x2a4a9d(0x248)](_0x5f1867))return alert(_0x2a4a9d(0x234));const _0x381855=_0x2451e8*gridCellSize,_0xba413=_0x5f1867*gridCellSize;camX=_0x381855-game[_0x2a4a9d(0x1db)]/0x2/scale,camY=_0xba413-game['height']/0x2/scale,renderAll();}),ctx[_0x16fd29(0x274)]=![];const gridCellSize=0xa;game[_0x16fd29(0x1db)]=0x4b0,game[_0x16fd29(0x23e)]=0x258;let currentColor=_0x16fd29(0x1cd),canPlace=!![];const reloadTime=0x5,colors=['rgb(255,\x20255,\x20255)','rgb(96,\x2064,\x2040)','rgb(228,\x20228,\x20228)',_0x16fd29(0x20b),'rgb(196,\x20196,\x20196)','rgb(255,\x20248,\x20137)',_0x16fd29(0x258),_0x16fd29(0x1f1),_0x16fd29(0x1f9),'rgb(148,\x20224,\x2068)','rgb(0,\x200,\x200)',_0x16fd29(0x255),_0x16fd29(0x22f),_0x16fd29(0x262),_0x16fd29(0x24a),_0x16fd29(0x26b),_0x16fd29(0x264),_0x16fd29(0x1c5),'rgb(255,\x20101,\x20101)','rgb(0,\x20211,\x20221)','rgb(229,\x200,\x200)',_0x16fd29(0x1fe),_0x16fd29(0x205),_0x16fd29(0x214),_0x16fd29(0x230),_0x16fd29(0x1fb),_0x16fd29(0x21e),'rgb(207,\x20110,\x20228)','rgb(160,\x20106,\x2066)',_0x16fd29(0x211)];colorsChoiceEl[_0x16fd29(0x1f3)]='',colors[_0x16fd29(0x221)](_0x5b0d86=>{const _0x919b60=_0x16fd29,_0xe700c7=document['createElement'](_0x919b60(0x21b));_0xe700c7[_0x919b60(0x25f)][_0x919b60(0x242)]=_0x5b0d86,_0xe700c7[_0x919b60(0x1dc)](_0x919b60(0x1d0),()=>{const _0x29a52b=_0x919b60;currentColor=_0x5b0d86,document['querySelectorAll'](_0x29a52b(0x201))[_0x29a52b(0x221)](_0x3717b1=>_0x3717b1[_0x29a52b(0x207)]['remove'](_0x29a52b(0x249))),_0xe700c7[_0x29a52b(0x207)][_0x29a52b(0x1e4)](_0x29a52b(0x249));}),colorsChoiceEl[_0x919b60(0x1da)](_0xe700c7);});const colorsChoice=document[_0x16fd29(0x240)](_0x16fd29(0x25a)),togglePalette=document[_0x16fd29(0x240)]('togglePalette');togglePalette[_0x16fd29(0x1dc)]('click',()=>{const _0x4bdfdc=_0x16fd29;colorsChoice[_0x4bdfdc(0x25f)]['display']===_0x4bdfdc(0x220)?colorsChoice[_0x4bdfdc(0x25f)][_0x4bdfdc(0x259)]=_0x4bdfdc(0x215):colorsChoice[_0x4bdfdc(0x25f)][_0x4bdfdc(0x259)]=_0x4bdfdc(0x220);});const worldMap=new Image();worldMap[_0x16fd29(0x231)]=_0x16fd29(0x21a);const SCALE_TILE=0x32;let WORLD_W=0x4e20*SCALE_TILE,WORLD_H=0x4e20*SCALE_TILE,camX=0x0,camY=0x0,scale=0x1;const MIN_SCALE=0.005,MAX_SCALE=0x6;let isPanning=![],lastMouseX=0x0,lastMouseY=0x0;function _0x25c4(_0x3c3c2e,_0x4f0fa4){const _0x4e560d=_0x4e56();return _0x25c4=function(_0x25c405,_0x2b4b56){_0x25c405=_0x25c405-0x1c5;let _0x5e0b39=_0x4e560d[_0x25c405];return _0x5e0b39;},_0x25c4(_0x3c3c2e,_0x4f0fa4);}function clamp(_0xd2ca53,_0x54d668,_0x58e6cd){const _0x3a41c1=_0x16fd29;return Math[_0x3a41c1(0x1e2)](_0x54d668,Math[_0x3a41c1(0x247)](_0x58e6cd,_0xd2ca53));}function screenToWorld(_0x5c3e5f,_0x26cbff){const _0x3317b8=_0x16fd29,_0x46790d=game[_0x3317b8(0x1d7)](),_0x341c79=(_0x5c3e5f-_0x46790d[_0x3317b8(0x256)])/scale+camX,_0xea6e9d=(_0x26cbff-_0x46790d[_0x3317b8(0x24d)])/scale+camY;return[_0x341c79,_0xea6e9d];}function snapToGrid(_0x53a03b,_0x23a008){const _0x1f08bd=_0x16fd29;return[Math[_0x1f08bd(0x251)](_0x53a03b/gridCellSize)*gridCellSize,Math[_0x1f08bd(0x251)](_0x23a008/gridCellSize)*gridCellSize];}let hoverCellX=0x0,hoverCellY=0x0;const pixelsCache=new Map();let markers=[];function _0x4e56(){const _0x331665=['right','backgroundColor','getContext','touches','Только\x20админ!','background','min','isNaN','selected','rgb(255,\x20167,\x20209)','shiftKey','461991610382','top','push','fontFamily','onload','floor','Login\x20to\x20draw!','clientX','606562VmasfN','rgb(2,\x20190,\x201)','left','rgba(0,0,0,0.7)','rgb(136,\x20136,\x20136)','display','colorsChoice','touchmove','preventDefault','7184eLpQFm','⏳\x20Cooldown\x20≥\x2060\x20sec,\x20wait!','style','Online\x20players:\x20','padding','rgb(104,\x20131,\x2056)','val','rgb(255,\x2084,\x20178)','altKey','split','touchend','X:\x20','overlayTemplate','leftBtn','rgb(0,\x20101,\x2019)','clearAllPixels','block','436944AGTRTF','setTransform','now','message','mousedown','clientY','imageSmoothingEnabled','rgb(202,\x20227,\x20255)','touchstart','position','#eef6ff','coordY','px)\x20scale(','teleportInput','body','#000000','Email:','fillRect','click','canvas','px,\x20','moveTo','7437892zqBRuG','naturalHeight','innerText','getBoundingClientRect','error','color','appendChild','width','addEventListener','pixels','Удалено','fixed','zIndex','Ready!','max','toDataURL','add','28ykWQSc','clear','opacityRange','currentUser','email','remove','9999','clearRect','Reload:\x20','target','6px\x2010px','\x20sec','rgb(229,\x20217,\x200)','files','innerHTML','Добавлено','Cooldown:\x20','length','Пользователь\x20забанен!','input','rgb(78,\x2078,\x2078)','ceil','rgb(25,\x2025,\x20115)','zoomOutBtn','10px','rgb(0,\x20131,\x20199)','zoomInBtn','lineTo','#colorsChoice\x20div','stroke','234888KwOVgW','teleportBtn','rgb(154,\x200,\x200)','6px','classList','adminPanel','#FFFFFF','4265PLDgBI','rgb(245,\x20223,\x20176)','rgba(255,0,0,0.5)','templateFile','users/','strokeStyle','\x20пикселей:\x20','rgb(130,\x200,\x20128)','Log\x20In','textContent','rgb(0,\x200,\x20234)','grid','logo100153@gmail.com','1:461991610382:web:2a5ae293dde4a754c2d45f','\x20\x20Y:\x20','1292644IGVPQW','world.png','div','button','pixellox.firebaseapp.com','rgb(229,\x20149,\x200)','removePixelBtn','none','forEach','rgba(0,0,0,0.12)','Введите\x20UserID\x20для\x20бана:','transform','createElement','4062BVyUSl','3447uUpBia','img','wheel','value','opacity','top\x20left','game','downBtn','rgb(244,\x20179,\x20174)','rgb(254,\x20164,\x2096)','src','10HTZXjV','uid','Введите\x20корректные\x20координаты\x20X\x20Y','trim','catch','change','beginPath','cursor','Log\x20Out','fillStyle','ref','mousemove','height','image/png','getElementById'];_0x4e56=function(){return _0x331665;};return _0x4e56();}function updateCoordsDisplay(){const _0x34070d=_0x16fd29;if(!coordsDisplayEl)return;const _0x57e628=Math[_0x34070d(0x251)](hoverCellX/gridCellSize),_0x32f0ed=Math[_0x34070d(0x251)](hoverCellY/gridCellSize);coordsDisplayEl[_0x34070d(0x213)]=_0x34070d(0x268)+_0x57e628+_0x34070d(0x218)+_0x32f0ed;}const TILE_SIZE=0x3e8;let tiles=[];const offscreenCanvas=document[_0x16fd29(0x225)](_0x16fd29(0x1d1));offscreenCanvas[_0x16fd29(0x1db)]=TILE_SIZE,offscreenCanvas['height']=TILE_SIZE;const offCtx=offscreenCanvas[_0x16fd29(0x243)]('2d',{'willReadFrequently':!![]});offCtx[_0x16fd29(0x274)]=![],worldMap[_0x16fd29(0x250)]=()=>{const _0x237d75=_0x16fd29,_0x27d65d=worldMap['naturalWidth']||0x4e20,_0x502cf5=worldMap[_0x237d75(0x1d5)]||0x4e20;WORLD_W=_0x27d65d*SCALE_TILE,WORLD_H=_0x502cf5*SCALE_TILE;const _0x110c67=Math[_0x237d75(0x1fa)](_0x27d65d/TILE_SIZE),_0x4ba093=Math['ceil'](_0x502cf5/TILE_SIZE);tiles=[];for(let _0xeb30b8=0x0;_0xeb30b8<_0x110c67;_0xeb30b8++){for(let _0x3c06c4=0x0;_0x3c06c4<_0x4ba093;_0x3c06c4++){const _0x2e4475=_0xeb30b8*TILE_SIZE,_0x2b8479=_0x3c06c4*TILE_SIZE,_0xa213b3=Math[_0x237d75(0x247)](TILE_SIZE,_0x27d65d-_0x2e4475),_0x394e29=Math[_0x237d75(0x247)](TILE_SIZE,_0x502cf5-_0x2b8479);offCtx[_0x237d75(0x1ec)](0x0,0x0,TILE_SIZE,TILE_SIZE),offCtx['drawImage'](worldMap,_0x2e4475,_0x2b8479,_0xa213b3,_0x394e29,0x0,0x0,_0xa213b3,_0x394e29);const _0x2437b7=new Image();_0x2437b7[_0x237d75(0x231)]=offscreenCanvas[_0x237d75(0x1e3)](_0x237d75(0x23f));const _0x4e164f=_0x2e4475*SCALE_TILE,_0x3dc6d5=_0x2b8479*SCALE_TILE,_0x867000=_0xa213b3*SCALE_TILE,_0x69224d=_0x394e29*SCALE_TILE;tiles['push']({'img':_0x2437b7,'dx':_0x4e164f,'dy':_0x3dc6d5,'dw':_0x867000,'dh':_0x69224d});}}renderAll();};function renderAll(){const _0x4a712b=_0x16fd29;ctx[_0x4a712b(0x274)]=![],ctx['setTransform'](0x1,0x0,0x0,0x1,0x0,0x0),ctx[_0x4a712b(0x1ec)](0x0,0x0,game[_0x4a712b(0x1db)],game[_0x4a712b(0x23e)]),ctx[_0x4a712b(0x26f)](scale,0x0,0x0,scale,-camX*scale,-camY*scale);const _0x115360=camX,_0x37816f=camY,_0x58e492=camX+game['width']/scale,_0x6e959=camY+game['height']/scale;for(const _0x4bd9cc of tiles){if(_0x4bd9cc['dx']+_0x4bd9cc['dw']<_0x115360||_0x4bd9cc['dx']>_0x58e492||_0x4bd9cc['dy']+_0x4bd9cc['dh']<_0x37816f||_0x4bd9cc['dy']>_0x6e959)continue;_0x4bd9cc[_0x4a712b(0x228)]['complete']&&_0x4bd9cc[_0x4a712b(0x228)]['naturalWidth']?ctx['drawImage'](_0x4bd9cc[_0x4a712b(0x228)],_0x4bd9cc['dx'],_0x4bd9cc['dy'],_0x4bd9cc['dw'],_0x4bd9cc['dh']):(ctx[_0x4a712b(0x23b)]=_0x4a712b(0x1c8),ctx[_0x4a712b(0x1cf)](_0x4bd9cc['dx'],_0x4bd9cc['dy'],_0x4bd9cc['dw'],_0x4bd9cc['dh']));}ctx[_0x4a712b(0x238)](),ctx[_0x4a712b(0x20f)]='#ccc';let _0x34929=Math[_0x4a712b(0x251)](_0x115360/gridCellSize)*gridCellSize;for(let _0x1dc528=_0x34929;_0x1dc528<=_0x58e492;_0x1dc528+=gridCellSize){ctx[_0x4a712b(0x1d3)](_0x1dc528,_0x37816f),ctx['lineTo'](_0x1dc528,_0x6e959);}let _0x4d97c6=Math[_0x4a712b(0x251)](_0x37816f/gridCellSize)*gridCellSize;for(let _0x54bee0=_0x4d97c6;_0x54bee0<=_0x6e959;_0x54bee0+=gridCellSize){ctx[_0x4a712b(0x1d3)](_0x115360,_0x54bee0),ctx[_0x4a712b(0x200)](_0x58e492,_0x54bee0);}ctx[_0x4a712b(0x202)](),pixelsCache[_0x4a712b(0x221)](_0xb1a797=>{const _0x5508b8=_0x4a712b;_0xb1a797[_0x5508b8(0x1d9)]!==_0x5508b8(0x209)&&(ctx[_0x5508b8(0x23b)]=_0xb1a797[_0x5508b8(0x1d9)],ctx['fillRect'](_0xb1a797['x'],_0xb1a797['y'],gridCellSize,gridCellSize));}),ctx['fillStyle']=_0x4a712b(0x20c);for(const [_0x2c8f38,_0xe6dace]of markers){ctx[_0x4a712b(0x1cf)](_0x2c8f38,_0xe6dace,gridCellSize,gridCellSize);}ctx[_0x4a712b(0x23b)]=_0x4a712b(0x222),ctx[_0x4a712b(0x1cf)](hoverCellX,hoverCellY,gridCellSize,gridCellSize),ctx[_0x4a712b(0x26f)](0x1,0x0,0x0,0x1,0x0,0x0);}onSnapshot(collection(db,_0x16fd29(0x1dd)),_0x3505e7=>{const _0x154667=_0x16fd29;pixelsCache[_0x154667(0x1e6)](),_0x3505e7[_0x154667(0x221)](_0x5bb71b=>{const _0x27f8d1=_0x5bb71b['data']();pixelsCache['set'](_0x27f8d1['x']+'-'+_0x27f8d1['y'],_0x27f8d1);}),renderAll();}),game['addEventListener'](_0x16fd29(0x272),_0x380a99=>{const _0x42b532=_0x16fd29;(_0x380a99['button']===0x1||_0x380a99[_0x42b532(0x21c)]===0x2||_0x380a99[_0x42b532(0x24b)]||_0x380a99['ctrlKey']||_0x380a99['metaKey']||_0x380a99[_0x42b532(0x265)])&&(isPanning=!![],lastMouseX=_0x380a99[_0x42b532(0x253)],lastMouseY=_0x380a99[_0x42b532(0x273)],_0x380a99[_0x42b532(0x25c)]());}),window[_0x16fd29(0x1dc)]('mouseup',()=>{isPanning=![];}),game[_0x16fd29(0x1dc)]('contextmenu',_0x1dd38c=>_0x1dd38c['preventDefault']()),game[_0x16fd29(0x1dc)](_0x16fd29(0x23d),_0xc70d1c=>{const _0x346ee2=_0x16fd29;if(isPanning){const _0x26ecce=_0xc70d1c[_0x346ee2(0x253)]-lastMouseX,_0x1bc75e=_0xc70d1c['clientY']-lastMouseY;camX-=_0x26ecce/scale,camY-=_0x1bc75e/scale,lastMouseX=_0xc70d1c['clientX'],lastMouseY=_0xc70d1c[_0x346ee2(0x273)],renderAll();}const [_0x5cbdd7,_0x57fac6]=screenToWorld(_0xc70d1c[_0x346ee2(0x253)],_0xc70d1c[_0x346ee2(0x273)]);[hoverCellX,hoverCellY]=snapToGrid(_0x5cbdd7,_0x57fac6),updateCoordsDisplay(),renderAll();}),game[_0x16fd29(0x1dc)](_0x16fd29(0x229),_0x31923b=>{const _0x3e7a0f=_0x16fd29;_0x31923b[_0x3e7a0f(0x25c)]();const _0xf22074=1.1,[_0x14d957,_0x530871]=screenToWorld(_0x31923b[_0x3e7a0f(0x253)],_0x31923b[_0x3e7a0f(0x273)]),_0xb5ebf4=_0x31923b['deltaY']<0x0?0x1:-0x1,_0x2d6eef=clamp(scale*(_0xb5ebf4>0x0?_0xf22074:0x1/_0xf22074),MIN_SCALE,MAX_SCALE);if(_0x2d6eef===scale)return;scale=_0x2d6eef;const _0x13a7f3=game[_0x3e7a0f(0x1d7)]();camX=_0x14d957-(_0x31923b['clientX']-_0x13a7f3['left'])/scale,camY=_0x530871-(_0x31923b[_0x3e7a0f(0x273)]-_0x13a7f3[_0x3e7a0f(0x24d)])/scale;const [_0x102cac,_0x5d2436]=screenToWorld(_0x31923b[_0x3e7a0f(0x253)],_0x31923b[_0x3e7a0f(0x273)]);[hoverCellX,hoverCellY]=snapToGrid(_0x102cac,_0x5d2436),updateCoordsDisplay(),renderAll();},{'passive':![]});async function placePixelWithHover(){const _0x37e84f=_0x16fd29;if(!auth['currentUser'])return alert('Login\x20to\x20draw!');if(!canPlace)return;canPlace=![];const _0x70a49=hoverCellX,_0x2d8982=hoverCellY,_0x3936da=doc(db,_0x37e84f(0x1dd),_0x70a49+'-'+_0x2d8982);try{if(currentColor===_0x37e84f(0x209))await deleteDoc(_0x3936da);else await setDoc(_0x3936da,{'x':_0x70a49,'y':_0x2d8982,'color':currentColor});}catch(_0x14a5d0){console[_0x37e84f(0x1d8)](_0x14a5d0);}startReload();}game[_0x16fd29(0x1dc)](_0x16fd29(0x1d0),_0x52170e=>{const _0x307a57=_0x16fd29;if(isPanning||_0x52170e[_0x307a57(0x21c)]!==0x0)return;placePixelWithHover();});if(cursor)cursor[_0x16fd29(0x25f)][_0x16fd29(0x259)]=_0x16fd29(0x220);function startReload(){const _0x5c3185=_0x16fd29;let _0x1ea007=reloadTime;reloadTimerEl[_0x5c3185(0x1d6)]=_0x5c3185(0x1ed)+_0x1ea007+_0x5c3185(0x1f0);const _0x2fa997=setInterval(()=>{const _0x11d84e=_0x5c3185;_0x1ea007--;if(_0x1ea007<=0x0)clearInterval(_0x2fa997),canPlace=!![],reloadTimerEl[_0x11d84e(0x1d6)]=_0x11d84e(0x1e1);else reloadTimerEl[_0x11d84e(0x1d6)]=_0x11d84e(0x1ed)+_0x1ea007+_0x11d84e(0x1f0);},0x3e8);}authButton[_0x16fd29(0x1dc)](_0x16fd29(0x1d0),async()=>{const _0x131fd2=_0x16fd29;if(auth['currentUser']){await signOut(auth);return;}const _0x2efdd7=prompt('Enter\x201\x20to\x20sign\x20in,\x20or\x202\x20to\x20create\x20a\x20new\x20account:');if(!_0x2efdd7||_0x2efdd7!=='1'&&_0x2efdd7!=='2')return;const _0x4c7aa0=prompt(_0x131fd2(0x1ce)),_0x4d7c03=prompt('Password:');if(!_0x4c7aa0||!_0x4d7c03)return;try{_0x2efdd7==='1'?(await signInWithEmailAndPassword(auth,_0x4c7aa0,_0x4d7c03),alert('Come\x20in!')):(await createUserWithEmailAndPassword(auth,_0x4c7aa0,_0x4d7c03),alert('Account\x20created!'));}catch(_0x7f27df){alert(_0x7f27df[_0x131fd2(0x271)]);}}),onAuthStateChanged(auth,_0x158473=>{const _0x38d086=_0x16fd29;_0x158473?(authButton[_0x38d086(0x213)]=_0x38d086(0x23a),_0x158473[_0x38d086(0x1e9)]===_0x38d086(0x216)?adminPanel[_0x38d086(0x25f)][_0x38d086(0x259)]=_0x38d086(0x26d):adminPanel[_0x38d086(0x25f)][_0x38d086(0x259)]=_0x38d086(0x220)):(authButton[_0x38d086(0x213)]=_0x38d086(0x212),adminPanel[_0x38d086(0x25f)][_0x38d086(0x259)]=_0x38d086(0x220));});function parseCoords(){const _0x1bef59=_0x16fd29;markers=[];const _0x31396c=coordsInput[_0x1bef59(0x22a)][_0x1bef59(0x235)]();if(!_0x31396c){renderAll();return;}_0x31396c[_0x1bef59(0x266)](',')[_0x1bef59(0x221)](_0x1afc6d=>{const _0x368ed0=_0x1bef59,[_0x17d125,_0x49d33a,_0x4a1769,_0x592076]=_0x1afc6d[_0x368ed0(0x235)]()['split'](/\s+/),_0x70116=parseInt(_0x17d125),_0x257daf=parseInt(_0x49d33a),_0x593c1e=parseInt(_0x4a1769||'1'),_0x532e4f=parseInt(_0x592076||'1');if(Number[_0x368ed0(0x248)](_0x70116)||Number['isNaN'](_0x257daf)||Number[_0x368ed0(0x248)](_0x593c1e)||Number[_0x368ed0(0x248)](_0x532e4f))return;const _0x435afb=_0x70116*gridCellSize,_0x3a66d7=_0x257daf*gridCellSize;for(let _0x4c5fc0=0x0;_0x4c5fc0<_0x593c1e;_0x4c5fc0++){for(let _0x26410c=0x0;_0x26410c<_0x532e4f;_0x26410c++){const _0xf42958=_0x435afb+_0x4c5fc0*gridCellSize,_0x584bd6=_0x3a66d7+_0x26410c*gridCellSize;_0xf42958>=0x0&&_0x584bd6>=0x0&&_0xf42958<=WORLD_W-gridCellSize&&_0x584bd6<=WORLD_H-gridCellSize&&markers[_0x368ed0(0x24e)]([_0xf42958,_0x584bd6]);}}}),renderAll();}const upBtn=document[_0x16fd29(0x240)]('upBtn'),downBtn=document[_0x16fd29(0x240)](_0x16fd29(0x22e)),leftBtn=document[_0x16fd29(0x240)](_0x16fd29(0x26a)),rightBtn=document[_0x16fd29(0x240)]('rightBtn'),zoomInBtn=document[_0x16fd29(0x240)](_0x16fd29(0x1ff)),zoomOutBtn=document[_0x16fd29(0x240)](_0x16fd29(0x1fc)),moveSpeed=0x32,zoomFactorBtn=1.2;function moveCamera(_0x2128e1,_0x22d192){camX+=_0x2128e1/scale,camY+=_0x22d192/scale,renderAll();}upBtn[_0x16fd29(0x1dc)]('click',()=>moveCamera(0x0,-moveSpeed)),downBtn[_0x16fd29(0x1dc)](_0x16fd29(0x1d0),()=>moveCamera(0x0,moveSpeed)),leftBtn[_0x16fd29(0x1dc)](_0x16fd29(0x1d0),()=>moveCamera(-moveSpeed,0x0)),rightBtn[_0x16fd29(0x1dc)](_0x16fd29(0x1d0),()=>moveCamera(moveSpeed,0x0)),zoomInBtn['addEventListener'](_0x16fd29(0x1d0),()=>{const _0x2b44f3=clamp(scale*zoomFactorBtn,MIN_SCALE,MAX_SCALE);scale=_0x2b44f3,renderAll();}),zoomOutBtn[_0x16fd29(0x1dc)](_0x16fd29(0x1d0),()=>{const _0x59d43f=clamp(scale/zoomFactorBtn,MIN_SCALE,MAX_SCALE);scale=_0x59d43f,renderAll();}),coordsInput[_0x16fd29(0x1dc)](_0x16fd29(0x1f8),parseCoords);async function adminApplyPixels(_0x555da0){const _0x28a11a=_0x16fd29;if(!auth[_0x28a11a(0x1e8)]||auth['currentUser']['email']!==_0x28a11a(0x216))return alert(_0x28a11a(0x245));parseCoords();let _0x17d7c9=0x0;for(const [_0x3d8e72,_0x48d02c]of markers){const _0x39dd04=doc(db,_0x28a11a(0x1dd),_0x3d8e72+'-'+_0x48d02c);_0x555da0==='add'?(await setDoc(_0x39dd04,{'x':_0x3d8e72,'y':_0x48d02c,'color':currentColor}),_0x17d7c9++):(await deleteDoc(_0x39dd04),_0x17d7c9++);}alert((_0x555da0===_0x28a11a(0x1e4)?_0x28a11a(0x1f4):_0x28a11a(0x1de))+_0x28a11a(0x210)+_0x17d7c9);}addPixelBtn['addEventListener'](_0x16fd29(0x1d0),()=>adminApplyPixels(_0x16fd29(0x1e4))),removePixelBtn['addEventListener']('click',()=>adminApplyPixels(_0x16fd29(0x1ea))),clearAllPixelsBtn[_0x16fd29(0x1dc)](_0x16fd29(0x1d0),async()=>{const _0x2b1be0=_0x16fd29;if(!auth[_0x2b1be0(0x1e8)])return alert(_0x2b1be0(0x245));const _0x422a69=await getDocs(collection(db,'pixels'));_0x422a69[_0x2b1be0(0x221)](_0x473ca5=>deleteDoc(_0x473ca5[_0x2b1be0(0x23c)]));}),banUserBtn[_0x16fd29(0x1dc)](_0x16fd29(0x1d0),()=>{const _0x295d3b=_0x16fd29;if(!auth[_0x295d3b(0x1e8)])return alert(_0x295d3b(0x245));const _0x2aca22=prompt(_0x295d3b(0x223));if(!_0x2aca22)return;const _0x496d85=ref(rtdb,'users/'+_0x2aca22);remove(_0x496d85)['then'](()=>alert(_0x295d3b(0x1f7)))[_0x295d3b(0x236)](_0x1aecc9=>console[_0x295d3b(0x1d8)](_0x1aecc9));});import{onDisconnect,set}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js';function trackOnlinePlayer(){const _0x2a028b=_0x16fd29;if(!auth['currentUser'])return;const _0x28c30e=auth[_0x2a028b(0x1e8)][_0x2a028b(0x233)],_0x411a64=ref(rtdb,_0x2a028b(0x20e)+_0x28c30e);set(_0x411a64,{'email':auth['currentUser'][_0x2a028b(0x1e9)],'lastSeen':Date[_0x2a028b(0x270)]()}),onDisconnect(_0x411a64)[_0x2a028b(0x1ea)]();}onAuthStateChanged(auth,_0x13717f=>{_0x13717f&&trackOnlinePlayer();});function updateOnlinePlayers(){const _0x50251b=ref(rtdb,'users/');onValue(_0x50251b,_0x50087f=>{const _0x152d35=_0x25c4,_0x419166=_0x50087f[_0x152d35(0x263)](),_0x34759b=_0x419166?Object['keys'](_0x419166)['length']:0x0;onlinePlayersEl['innerText']=_0x152d35(0x260)+_0x34759b;});}updateOnlinePlayers();let lastTouchX=0x0,lastTouchY=0x0,isTouchPanning=![];game[_0x16fd29(0x1dc)](_0x16fd29(0x1c6),_0xe480c2=>{const _0x50c758=_0x16fd29;_0xe480c2[_0x50c758(0x244)][_0x50c758(0x1f6)]===0x1&&(isTouchPanning=!![],lastTouchX=_0xe480c2['touches'][0x0][_0x50c758(0x253)],lastTouchY=_0xe480c2['touches'][0x0][_0x50c758(0x273)]);}),game[_0x16fd29(0x1dc)](_0x16fd29(0x25b),_0x54ad2f=>{const _0x545566=_0x16fd29;if(isTouchPanning&&_0x54ad2f[_0x545566(0x244)][_0x545566(0x1f6)]===0x1){const _0x786773=_0x54ad2f[_0x545566(0x244)][0x0],_0x512935=_0x786773[_0x545566(0x253)]-lastTouchX,_0x2e4051=_0x786773[_0x545566(0x273)]-lastTouchY;camX-=_0x512935/scale,camY-=_0x2e4051/scale,lastTouchX=_0x786773[_0x545566(0x253)],lastTouchY=_0x786773[_0x545566(0x273)],renderAll();}_0x54ad2f[_0x545566(0x25c)]();},{'passive':![]}),game[_0x16fd29(0x1dc)](_0x16fd29(0x267),_0x4bfb3e=>{isTouchPanning=![];});const overlay=document[_0x16fd29(0x240)](_0x16fd29(0x269)),fileInput=document[_0x16fd29(0x240)](_0x16fd29(0x20d)),opacityRange=document[_0x16fd29(0x240)](_0x16fd29(0x1e7)),coordX=document[_0x16fd29(0x240)]('coordX'),coordY=document[_0x16fd29(0x240)](_0x16fd29(0x1c9)),applyCoordsBtn=document['getElementById']('applyCoords'),toggleBtn=document[_0x16fd29(0x240)]('toggleBtn');let templateX=0x0,templateY=0x0,templateOpacity=0.5,templateVisible=!![];fileInput['addEventListener'](_0x16fd29(0x237),_0x3aec6b=>{const _0x45d601=_0x16fd29,_0x6f3116=_0x3aec6b[_0x45d601(0x1ee)][_0x45d601(0x1f2)][0x0];if(!_0x6f3116)return;const _0x1d263c=new FileReader();_0x1d263c[_0x45d601(0x250)]=_0x42b94e=>{const _0x273537=_0x45d601;overlay[_0x273537(0x231)]=_0x42b94e['target']['result'],overlay[_0x273537(0x25f)][_0x273537(0x259)]='block';},_0x1d263c['readAsDataURL'](_0x6f3116);}),opacityRange[_0x16fd29(0x1dc)](_0x16fd29(0x1f8),()=>{const _0x44e5ab=_0x16fd29;templateOpacity=opacityRange['value'],overlay[_0x44e5ab(0x25f)][_0x44e5ab(0x22b)]=templateOpacity;}),applyCoordsBtn['addEventListener']('click',()=>{const _0x25ec7c=_0x16fd29;templateX=parseInt(coordX[_0x25ec7c(0x22a)])||0x0,templateY=parseInt(coordY['value'])||0x0,updateTemplatePosition();}),toggleBtn[_0x16fd29(0x1dc)](_0x16fd29(0x1d0),()=>{const _0x522f54=_0x16fd29;templateVisible=!templateVisible,overlay[_0x522f54(0x25f)][_0x522f54(0x259)]=templateVisible?_0x522f54(0x26d):_0x522f54(0x220);});function updateTemplatePosition(){const _0x1ffbc9=_0x16fd29;overlay[_0x1ffbc9(0x25f)][_0x1ffbc9(0x224)]='translate('+(-camX*scale+templateX)+_0x1ffbc9(0x1d2)+(-camY*scale+templateY)+_0x1ffbc9(0x1ca)+scale+')',overlay[_0x1ffbc9(0x25f)]['transformOrigin']=_0x1ffbc9(0x22c);}const oldRenderAll=renderAll;renderAll=function(){const _0x151f88=_0x16fd29;oldRenderAll();if(overlay[_0x151f88(0x231)])updateTemplatePosition();};let cooldown=0x0;const MAX_COOLDOWN=0x3c,cooldownDisplay=document[_0x16fd29(0x225)]('div');cooldownDisplay[_0x16fd29(0x25f)][_0x16fd29(0x1c7)]=_0x16fd29(0x1df),cooldownDisplay[_0x16fd29(0x25f)][_0x16fd29(0x24d)]=_0x16fd29(0x1fd),cooldownDisplay[_0x16fd29(0x25f)][_0x16fd29(0x241)]=_0x16fd29(0x1fd),cooldownDisplay[_0x16fd29(0x25f)][_0x16fd29(0x246)]=_0x16fd29(0x257),cooldownDisplay['style'][_0x16fd29(0x1d9)]='white',cooldownDisplay['style'][_0x16fd29(0x261)]=_0x16fd29(0x1ef),cooldownDisplay[_0x16fd29(0x25f)]['borderRadius']=_0x16fd29(0x206),cooldownDisplay[_0x16fd29(0x25f)][_0x16fd29(0x24f)]='Arial,\x20sans-serif',cooldownDisplay[_0x16fd29(0x25f)][_0x16fd29(0x1e0)]=_0x16fd29(0x1eb),document[_0x16fd29(0x1cc)][_0x16fd29(0x1da)](cooldownDisplay);function updateCooldownDisplay(){const _0xd00bb1=_0x16fd29;cooldownDisplay['innerText']=_0xd00bb1(0x1f5)+cooldown+'s',cooldownDisplay[_0xd00bb1(0x25f)]['display']=cooldown>0x0?_0xd00bb1(0x26d):'none';}updateCooldownDisplay(),setInterval(()=>{cooldown>0x0&&(cooldown--,updateCooldownDisplay());},0x3e8);async function placePixelWithHover(){const _0x49e147=_0x16fd29;if(!auth[_0x49e147(0x1e8)])return alert(_0x49e147(0x252));if(cooldown>=MAX_COOLDOWN)return alert(_0x49e147(0x25e));const _0x5bb600=hoverCellX,_0x2c94a6=hoverCellY,_0x63aad7=doc(db,'pixels',_0x5bb600+'-'+_0x2c94a6);try{if(currentColor===_0x49e147(0x209))await deleteDoc(_0x63aad7);else await setDoc(_0x63aad7,{'x':_0x5bb600,'y':_0x2c94a6,'color':currentColor});}catch(_0x1d4875){console['error'](_0x1d4875);}cooldown++,updateCooldownDisplay(),startReload();}game[_0x16fd29(0x1dc)](_0x16fd29(0x1d0),_0xd9b3c4=>{if(isPanning||_0xd9b3c4['button']!==0x0)return;placePixelWithHover();});
