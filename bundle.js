const _0xb6c6f2=_0x1c46;(function(_0x3f944e,_0xe4604f){const _0x3f1e6a=_0x1c46,_0x2053aa=_0x3f944e();while(!![]){try{const _0x33559d=-parseInt(_0x3f1e6a(0x15a))/0x1*(-parseInt(_0x3f1e6a(0x147))/0x2)+-parseInt(_0x3f1e6a(0xcf))/0x3*(parseInt(_0x3f1e6a(0x12e))/0x4)+parseInt(_0x3f1e6a(0x160))/0x5*(parseInt(_0x3f1e6a(0xd6))/0x6)+-parseInt(_0x3f1e6a(0xe2))/0x7+parseInt(_0x3f1e6a(0xec))/0x8*(parseInt(_0x3f1e6a(0xeb))/0x9)+parseInt(_0x3f1e6a(0x137))/0xa+-parseInt(_0x3f1e6a(0x161))/0xb*(parseInt(_0x3f1e6a(0x13e))/0xc);if(_0x33559d===_0xe4604f)break;else _0x2053aa['push'](_0x2053aa['shift']());}catch(_0x58d7b6){_0x2053aa['push'](_0x2053aa['shift']());}}}(_0x3d73,0x4e364));import{initializeApp}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js';import{getFirestore,collection,doc,setDoc,onSnapshot,deleteDoc,getDocs}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js';import{getDatabase,ref,remove}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js';import{getAuth,onAuthStateChanged,signInWithEmailAndPassword,createUserWithEmailAndPassword,signOut}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-auth.js';const firebaseConfig={'apiKey':_0xb6c6f2(0x158),'authDomain':_0xb6c6f2(0xf2),'projectId':'pixellox','storageBucket':_0xb6c6f2(0xf1),'messagingSenderId':_0xb6c6f2(0x104),'appId':'1:461991610382:web:2a5ae293dde4a754c2d45f'},app=initializeApp(firebaseConfig),db=getFirestore(app),rtdb=getDatabase(app),auth=getAuth(app),coordsDisplayEl=document[_0xb6c6f2(0x13c)]('coordsDisplay'),colorsChoiceEl=document[_0xb6c6f2(0x13c)](_0xb6c6f2(0xef)),paletteToggle=document['getElementById']('paletteToggle'),game=document['getElementById']('game'),ctx=game[_0xb6c6f2(0x106)]('2d'),cursor=document['getElementById'](_0xb6c6f2(0x120)),reloadTimerEl=document['getElementById'](_0xb6c6f2(0x118)),adminPanel=document[_0xb6c6f2(0x13c)](_0xb6c6f2(0x168)),clearAllPixelsBtn=document[_0xb6c6f2(0x13c)](_0xb6c6f2(0x15b)),banUserBtn=document[_0xb6c6f2(0x13c)](_0xb6c6f2(0x107)),authButton=document[_0xb6c6f2(0x13c)](_0xb6c6f2(0x153)),coordsInput=document[_0xb6c6f2(0x13c)](_0xb6c6f2(0x148)),addPixelBtn=document[_0xb6c6f2(0x13c)](_0xb6c6f2(0x13b)),removePixelBtn=document[_0xb6c6f2(0x13c)](_0xb6c6f2(0x155)),teleportInput=document[_0xb6c6f2(0x13c)](_0xb6c6f2(0xe6)),teleportBtn=document[_0xb6c6f2(0x13c)](_0xb6c6f2(0x130));teleportBtn['addEventListener'](_0xb6c6f2(0x140),()=>{const _0x40fccb=_0xb6c6f2;if(!auth[_0x40fccb(0xf5)]||auth[_0x40fccb(0xf5)][_0x40fccb(0x112)]!==_0x40fccb(0x139))return alert(_0x40fccb(0xf8));const _0x1fd54d=teleportInput[_0x40fccb(0xed)][_0x40fccb(0x10c)]();if(!_0x1fd54d)return;const [_0x379db8,_0x4bcdee]=_0x1fd54d[_0x40fccb(0x116)](/\s+/),_0x1b0786=parseInt(_0x379db8),_0x69ca44=parseInt(_0x4bcdee);if(Number[_0x40fccb(0x132)](_0x1b0786)||Number['isNaN'](_0x69ca44))return alert('Введите\x20корректные\x20координаты\x20X\x20Y');const _0x426af9=_0x1b0786*gridCellSize,_0x594bc4=_0x69ca44*gridCellSize;camX=_0x426af9-game[_0x40fccb(0x11c)]/0x2/scale,camY=_0x594bc4-game[_0x40fccb(0xd3)]/0x2/scale,renderAll();}),ctx[_0xb6c6f2(0x127)]=![];const gridCellSize=0xa;game['width']=0x4b0,game[_0xb6c6f2(0xd3)]=0x258;let currentColor=_0xb6c6f2(0x10d),canPlace=!![];const reloadTime=0x5,colors=[_0xb6c6f2(0x14d),_0xb6c6f2(0xde),'rgb(228,\x20228,\x20228)',_0xb6c6f2(0x11b),_0xb6c6f2(0xd8),_0xb6c6f2(0x12c),_0xb6c6f2(0x162),'rgb(229,\x20217,\x200)','rgb(78,\x2078,\x2078)',_0xb6c6f2(0xfe),_0xb6c6f2(0xf7),'rgb(2,\x20190,\x201)','rgb(244,\x20179,\x20174)',_0xb6c6f2(0x11e),_0xb6c6f2(0x141),'rgb(0,\x20101,\x2019)',_0xb6c6f2(0x138),_0xb6c6f2(0x113),_0xb6c6f2(0x109),_0xb6c6f2(0xf0),'rgb(229,\x200,\x200)',_0xb6c6f2(0x114),_0xb6c6f2(0xdd),_0xb6c6f2(0x12f),_0xb6c6f2(0x165),_0xb6c6f2(0x10f),_0xb6c6f2(0xe8),_0xb6c6f2(0xd7),_0xb6c6f2(0x14a),_0xb6c6f2(0x115)];colorsChoiceEl['innerHTML']='',colors[_0xb6c6f2(0xda)](_0x294f5e=>{const _0x227c61=_0xb6c6f2,_0x22b3ce=document[_0x227c61(0x13f)](_0x227c61(0xf9));_0x22b3ce['style'][_0x227c61(0x156)]=_0x294f5e,_0x22b3ce[_0x227c61(0x135)](_0x227c61(0x140),()=>{const _0x56cbe1=_0x227c61;currentColor=_0x294f5e,document[_0x56cbe1(0x14e)]('#colorsChoice\x20div')[_0x56cbe1(0xda)](_0x183967=>_0x183967[_0x56cbe1(0x142)][_0x56cbe1(0x126)](_0x56cbe1(0x164))),_0x22b3ce[_0x56cbe1(0x142)][_0x56cbe1(0xe7)](_0x56cbe1(0x164));}),colorsChoiceEl[_0x227c61(0x145)](_0x22b3ce);});const colorsChoice=document['getElementById'](_0xb6c6f2(0xef)),togglePalette=document[_0xb6c6f2(0x13c)]('togglePalette');togglePalette[_0xb6c6f2(0x135)](_0xb6c6f2(0x140),()=>{const _0x501c4c=_0xb6c6f2;colorsChoice[_0x501c4c(0xff)][_0x501c4c(0xee)]===_0x501c4c(0xdb)?colorsChoice[_0x501c4c(0xff)][_0x501c4c(0xee)]=_0x501c4c(0xfa):colorsChoice[_0x501c4c(0xff)]['display']=_0x501c4c(0xdb);});const worldMap=new Image();worldMap['src']=_0xb6c6f2(0x11d);const SCALE_TILE=0x28;let WORLD_W=0x4e20*SCALE_TILE,WORLD_H=0x4e20*SCALE_TILE,camX=0x0,camY=0x0,scale=0x1;const MIN_SCALE=0.005,MAX_SCALE=0x6;let isPanning=![],lastMouseX=0x0,lastMouseY=0x0;function clamp(_0x24b14e,_0x565d0c,_0x150b5a){const _0x17ef75=_0xb6c6f2;return Math['max'](_0x565d0c,Math[_0x17ef75(0xd2)](_0x150b5a,_0x24b14e));}function screenToWorld(_0x2ec2e,_0x1b8ff8){const _0x37145a=_0xb6c6f2,_0x18196e=game[_0x37145a(0xdf)](),_0xc3df60=(_0x2ec2e-_0x18196e['left'])/scale+camX,_0x5e46ab=(_0x1b8ff8-_0x18196e[_0x37145a(0x15d)])/scale+camY;return[_0xc3df60,_0x5e46ab];}function snapToGrid(_0x1ecf5d,_0x12202e){const _0x3ffae8=_0xb6c6f2;return[Math['floor'](_0x1ecf5d/gridCellSize)*gridCellSize,Math[_0x3ffae8(0x166)](_0x12202e/gridCellSize)*gridCellSize];}let hoverCellX=0x0,hoverCellY=0x0;const pixelsCache=new Map();function _0x1c46(_0x4aa0af,_0x286471){const _0x3d730d=_0x3d73();return _0x1c46=function(_0x1c4650,_0x167b9e){_0x1c4650=_0x1c4650-0xcd;let _0x2f9850=_0x3d730d[_0x1c4650];return _0x2f9850;},_0x1c46(_0x4aa0af,_0x286471);}let markers=[];function updateCoordsDisplay(){const _0x137ca5=_0xb6c6f2;if(!coordsDisplayEl)return;const _0x3e692b=Math['floor'](hoverCellX/gridCellSize),_0x369f8e=Math[_0x137ca5(0x166)](hoverCellY/gridCellSize);coordsDisplayEl[_0x137ca5(0x125)]=_0x137ca5(0x167)+_0x3e692b+'\x20\x20Y:\x20'+_0x369f8e;}const TILE_SIZE=0x3e8;let tiles=[];const offscreenCanvas=document[_0xb6c6f2(0x13f)](_0xb6c6f2(0x13a));offscreenCanvas[_0xb6c6f2(0x11c)]=TILE_SIZE,offscreenCanvas[_0xb6c6f2(0xd3)]=TILE_SIZE;const offCtx=offscreenCanvas[_0xb6c6f2(0x106)]('2d',{'willReadFrequently':!![]});offCtx[_0xb6c6f2(0x127)]=![],worldMap[_0xb6c6f2(0xe0)]=()=>{const _0x2a4dac=_0xb6c6f2,_0x1e5dbe=worldMap[_0x2a4dac(0xfc)]||0x4e20,_0x1905c0=worldMap['naturalHeight']||0x4e20;WORLD_W=_0x1e5dbe*SCALE_TILE,WORLD_H=_0x1905c0*SCALE_TILE;const _0x2a2d8d=Math['ceil'](_0x1e5dbe/TILE_SIZE),_0x3716cf=Math[_0x2a4dac(0x143)](_0x1905c0/TILE_SIZE);tiles=[];for(let _0x1dddc6=0x0;_0x1dddc6<_0x2a2d8d;_0x1dddc6++){for(let _0x227d9a=0x0;_0x227d9a<_0x3716cf;_0x227d9a++){const _0x434a69=_0x1dddc6*TILE_SIZE,_0x411eb6=_0x227d9a*TILE_SIZE,_0x59e30c=Math['min'](TILE_SIZE,_0x1e5dbe-_0x434a69),_0x309933=Math['min'](TILE_SIZE,_0x1905c0-_0x411eb6);offCtx[_0x2a4dac(0xd9)](0x0,0x0,TILE_SIZE,TILE_SIZE),offCtx[_0x2a4dac(0x11a)](worldMap,_0x434a69,_0x411eb6,_0x59e30c,_0x309933,0x0,0x0,_0x59e30c,_0x309933);const _0x152201=new Image();_0x152201['src']=offscreenCanvas[_0x2a4dac(0xf4)](_0x2a4dac(0x14b));const _0x25293d=_0x434a69*SCALE_TILE,_0x21fb88=_0x411eb6*SCALE_TILE,_0x6bf022=_0x59e30c*SCALE_TILE,_0x93540f=_0x309933*SCALE_TILE;tiles[_0x2a4dac(0x10e)]({'img':_0x152201,'dx':_0x25293d,'dy':_0x21fb88,'dw':_0x6bf022,'dh':_0x93540f});}}renderAll();};function renderAll(){const _0xbf34f7=_0xb6c6f2;ctx[_0xbf34f7(0x127)]=![],ctx[_0xbf34f7(0x12d)](0x1,0x0,0x0,0x1,0x0,0x0),ctx[_0xbf34f7(0xd9)](0x0,0x0,game[_0xbf34f7(0x11c)],game[_0xbf34f7(0xd3)]),ctx[_0xbf34f7(0x12d)](scale,0x0,0x0,scale,-camX*scale,-camY*scale);const _0x552082=camX,_0x29e3e3=camY,_0x38c8f8=camX+game[_0xbf34f7(0x11c)]/scale,_0x55427d=camY+game[_0xbf34f7(0xd3)]/scale;for(const _0x2dc0c9 of tiles){if(_0x2dc0c9['dx']+_0x2dc0c9['dw']<_0x552082||_0x2dc0c9['dx']>_0x38c8f8||_0x2dc0c9['dy']+_0x2dc0c9['dh']<_0x29e3e3||_0x2dc0c9['dy']>_0x55427d)continue;_0x2dc0c9[_0xbf34f7(0x12b)][_0xbf34f7(0xce)]&&_0x2dc0c9[_0xbf34f7(0x12b)]['naturalWidth']?ctx[_0xbf34f7(0x11a)](_0x2dc0c9['img'],_0x2dc0c9['dx'],_0x2dc0c9['dy'],_0x2dc0c9['dw'],_0x2dc0c9['dh']):(ctx[_0xbf34f7(0x15e)]=_0xbf34f7(0x128),ctx['fillRect'](_0x2dc0c9['dx'],_0x2dc0c9['dy'],_0x2dc0c9['dw'],_0x2dc0c9['dh']));}ctx[_0xbf34f7(0x129)](),ctx[_0xbf34f7(0x105)]=_0xbf34f7(0x151);let _0x2522a4=Math[_0xbf34f7(0x166)](_0x552082/gridCellSize)*gridCellSize;for(let _0x83f8ef=_0x2522a4;_0x83f8ef<=_0x38c8f8;_0x83f8ef+=gridCellSize){ctx[_0xbf34f7(0x150)](_0x83f8ef,_0x29e3e3),ctx['lineTo'](_0x83f8ef,_0x55427d);}let _0x4d3667=Math['floor'](_0x29e3e3/gridCellSize)*gridCellSize;for(let _0x2dcc67=_0x4d3667;_0x2dcc67<=_0x55427d;_0x2dcc67+=gridCellSize){ctx[_0xbf34f7(0x150)](_0x552082,_0x2dcc67),ctx[_0xbf34f7(0x131)](_0x38c8f8,_0x2dcc67);}ctx[_0xbf34f7(0x110)](),pixelsCache[_0xbf34f7(0xda)](_0x40a8bb=>{const _0x566d5b=_0xbf34f7;_0x40a8bb[_0x566d5b(0x14f)]!==_0x566d5b(0x119)&&(ctx[_0x566d5b(0x15e)]=_0x40a8bb[_0x566d5b(0x14f)],ctx[_0x566d5b(0x103)](_0x40a8bb['x'],_0x40a8bb['y'],gridCellSize,gridCellSize));}),ctx[_0xbf34f7(0x15e)]=_0xbf34f7(0xea);for(const [_0x53dd69,_0x177244]of markers){ctx[_0xbf34f7(0x103)](_0x53dd69,_0x177244,gridCellSize,gridCellSize);}ctx['fillStyle']=_0xbf34f7(0x159),ctx[_0xbf34f7(0x103)](hoverCellX,hoverCellY,gridCellSize,gridCellSize),ctx[_0xbf34f7(0x12d)](0x1,0x0,0x0,0x1,0x0,0x0);}onSnapshot(collection(db,_0xb6c6f2(0xe5)),_0x1e298b=>{const _0x323f5f=_0xb6c6f2;pixelsCache['clear'](),_0x1e298b[_0x323f5f(0xda)](_0x1de50c=>{const _0x1d217e=_0x323f5f,_0x3ce413=_0x1de50c[_0x1d217e(0x10b)]();pixelsCache[_0x1d217e(0x124)](_0x3ce413['x']+'-'+_0x3ce413['y'],_0x3ce413);}),renderAll();}),game['addEventListener'](_0xb6c6f2(0x14c),_0x547ad5=>{const _0x2fe11c=_0xb6c6f2;(_0x547ad5['button']===0x1||_0x547ad5[_0x2fe11c(0x15c)]===0x2||_0x547ad5[_0x2fe11c(0x152)]||_0x547ad5[_0x2fe11c(0x154)]||_0x547ad5['metaKey']||_0x547ad5[_0x2fe11c(0x13d)])&&(isPanning=!![],lastMouseX=_0x547ad5[_0x2fe11c(0x108)],lastMouseY=_0x547ad5['clientY'],_0x547ad5[_0x2fe11c(0x122)]());}),window['addEventListener'](_0xb6c6f2(0x133),()=>{isPanning=![];}),game[_0xb6c6f2(0x135)](_0xb6c6f2(0xe4),_0x4a7a63=>_0x4a7a63[_0xb6c6f2(0x122)]()),game[_0xb6c6f2(0x135)](_0xb6c6f2(0xdc),_0x23270f=>{const _0x15914e=_0xb6c6f2;if(isPanning){const _0xf93a9c=_0x23270f[_0x15914e(0x108)]-lastMouseX,_0x2bcd06=_0x23270f[_0x15914e(0x102)]-lastMouseY;camX-=_0xf93a9c/scale,camY-=_0x2bcd06/scale,lastMouseX=_0x23270f[_0x15914e(0x108)],lastMouseY=_0x23270f[_0x15914e(0x102)],renderAll();}const [_0x93f303,_0x47425e]=screenToWorld(_0x23270f['clientX'],_0x23270f[_0x15914e(0x102)]);[hoverCellX,hoverCellY]=snapToGrid(_0x93f303,_0x47425e),updateCoordsDisplay(),renderAll();}),game[_0xb6c6f2(0x135)]('wheel',_0x1f280b=>{const _0x3a0870=_0xb6c6f2;_0x1f280b[_0x3a0870(0x122)]();const _0x36d3ca=1.1,[_0x222802,_0x11f7b1]=screenToWorld(_0x1f280b['clientX'],_0x1f280b[_0x3a0870(0x102)]),_0xad73c0=_0x1f280b[_0x3a0870(0xd4)]<0x0?0x1:-0x1,_0x28af54=clamp(scale*(_0xad73c0>0x0?_0x36d3ca:0x1/_0x36d3ca),MIN_SCALE,MAX_SCALE);if(_0x28af54===scale)return;scale=_0x28af54;const _0x235279=game[_0x3a0870(0xdf)]();camX=_0x222802-(_0x1f280b[_0x3a0870(0x108)]-_0x235279[_0x3a0870(0x134)])/scale,camY=_0x11f7b1-(_0x1f280b[_0x3a0870(0x102)]-_0x235279[_0x3a0870(0x15d)])/scale;const [_0x5cc301,_0x10ae8f]=screenToWorld(_0x1f280b['clientX'],_0x1f280b[_0x3a0870(0x102)]);[hoverCellX,hoverCellY]=snapToGrid(_0x5cc301,_0x10ae8f),updateCoordsDisplay(),renderAll();},{'passive':![]});function _0x3d73(){const _0x8a83f8=['rgb(255,\x20167,\x20209)','classList','ceil','input','appendChild','error','212822wwrLCA','coordsInput','zoomInBtn','rgb(160,\x20106,\x2066)','image/png','mousedown','rgb(255,\x20255,\x20255)','querySelectorAll','color','moveTo','#ccc','shiftKey','authButton','ctrlKey','removePixelBtn','backgroundColor','Online\x20players:\x20','AIzaSyCwy4jVn9JIwXuIXVycYAv9EdPGPkgIJvA','rgba(0,0,0,0.12)','2DvDURK','clearAllPixels','button','top','fillStyle','Добавлено','5BiUVsC','77ToEbPK','rgb(136,\x20136,\x20136)','uid','selected','rgb(254,\x20164,\x2096)','floor','X:\x20','adminPanel','upBtn','complete','150408ifLXsn','val','leftBtn','min','height','deltaY','message','2033406LqMuAK','rgb(207,\x20110,\x20228)','rgb(196,\x20196,\x20196)','clearRect','forEach','none','mousemove','rgb(154,\x200,\x200)','rgb(96,\x2064,\x2040)','getBoundingClientRect','onload','now','1549667disokS','\x20sec','contextmenu','pixels','teleportInput','add','rgb(229,\x20149,\x200)','Пользователь\x20забанен!','rgba(255,0,0,0.5)','35802cEiYvs','1264CrJmsd','value','display','colorsChoice','rgb(0,\x20211,\x20221)','pixellox.firebasestorage.app','pixellox.firebaseapp.com','innerText','toDataURL','currentUser','Enter\x201\x20to\x20sign\x20in,\x20or\x202\x20to\x20create\x20a\x20new\x20account:','rgb(0,\x200,\x200)','Только\x20админ!','div','grid','Введите\x20UserID\x20для\x20бана:','naturalWidth','then','rgb(148,\x20224,\x2068)','style','Password:','downBtn','clientY','fillRect','461991610382','strokeStyle','getContext','banUser','clientX','rgb(255,\x20101,\x20101)','\x20пикселей:\x20','data','trim','#000000','push','rgb(25,\x2025,\x20115)','stroke','rightBtn','email','rgb(202,\x20227,\x20255)','rgb(0,\x20131,\x20199)','rgb(130,\x200,\x20128)','split','Login\x20to\x20draw!','reloadTimer','#FFFFFF','drawImage','rgb(245,\x20223,\x20176)','width','world.png','rgb(104,\x20131,\x2056)','Удалено','cursor','users/','preventDefault','zoomOutBtn','set','textContent','remove','imageSmoothingEnabled','#eef6ff','beginPath','ref','img','rgb(255,\x20248,\x20137)','setTransform','16eVYMqm','rgb(0,\x200,\x20234)','teleportBtn','lineTo','isNaN','mouseup','left','addEventListener','block','111680KpGHEg','rgb(255,\x2084,\x20178)','logo100153@gmail.com','canvas','addPixelBtn','getElementById','altKey','769944WqjdVh','createElement','click'];_0x3d73=function(){return _0x8a83f8;};return _0x3d73();}async function placePixelWithHover(){const _0x23bb7a=_0xb6c6f2;if(!auth[_0x23bb7a(0xf5)])return alert(_0x23bb7a(0x117));if(!canPlace)return;canPlace=![];const _0x57f8ae=hoverCellX,_0x4846b4=hoverCellY,_0x2a9746=doc(db,'pixels',_0x57f8ae+'-'+_0x4846b4);try{if(currentColor===_0x23bb7a(0x119))await deleteDoc(_0x2a9746);else await setDoc(_0x2a9746,{'x':_0x57f8ae,'y':_0x4846b4,'color':currentColor});}catch(_0x176d3c){console[_0x23bb7a(0x146)](_0x176d3c);}startReload();}game[_0xb6c6f2(0x135)]('click',_0x210b93=>{const _0x3ca631=_0xb6c6f2;if(isPanning||_0x210b93[_0x3ca631(0x15c)]!==0x0)return;placePixelWithHover();});if(cursor)cursor[_0xb6c6f2(0xff)][_0xb6c6f2(0xee)]='none';function startReload(){const _0x50e263=_0xb6c6f2;let _0x5a59b4=reloadTime;reloadTimerEl[_0x50e263(0xf3)]='Reload:\x20'+_0x5a59b4+_0x50e263(0xe3);const _0x4be849=setInterval(()=>{const _0x557f4e=_0x50e263;_0x5a59b4--;if(_0x5a59b4<=0x0)clearInterval(_0x4be849),canPlace=!![],reloadTimerEl[_0x557f4e(0xf3)]='Ready!';else reloadTimerEl['innerText']='Reload:\x20'+_0x5a59b4+_0x557f4e(0xe3);},0x3e8);}authButton[_0xb6c6f2(0x135)](_0xb6c6f2(0x140),async()=>{const _0x70d491=_0xb6c6f2;if(auth[_0x70d491(0xf5)]){await signOut(auth);return;}const _0x2f3371=prompt(_0x70d491(0xf6));if(!_0x2f3371||_0x2f3371!=='1'&&_0x2f3371!=='2')return;const _0x5519be=prompt('Email:'),_0x41b3e1=prompt(_0x70d491(0x100));if(!_0x5519be||!_0x41b3e1)return;try{_0x2f3371==='1'?(await signInWithEmailAndPassword(auth,_0x5519be,_0x41b3e1),alert('Come\x20in!')):(await createUserWithEmailAndPassword(auth,_0x5519be,_0x41b3e1),alert('Account\x20created!'));}catch(_0x3a4222){alert(_0x3a4222[_0x70d491(0xd5)]);}}),onAuthStateChanged(auth,_0x42ff5f=>{const _0x3b5bea=_0xb6c6f2;_0x42ff5f?(authButton[_0x3b5bea(0x125)]='Log\x20Out',_0x42ff5f[_0x3b5bea(0x112)]===_0x3b5bea(0x139)?adminPanel['style'][_0x3b5bea(0xee)]=_0x3b5bea(0x136):adminPanel['style'][_0x3b5bea(0xee)]=_0x3b5bea(0xdb)):(authButton[_0x3b5bea(0x125)]='Log\x20In',adminPanel['style'][_0x3b5bea(0xee)]=_0x3b5bea(0xdb));});function parseCoords(){const _0x38b4c5=_0xb6c6f2;markers=[];const _0x3d664e=coordsInput[_0x38b4c5(0xed)][_0x38b4c5(0x10c)]();if(!_0x3d664e){renderAll();return;}_0x3d664e[_0x38b4c5(0x116)](',')[_0x38b4c5(0xda)](_0xf835e5=>{const _0x559f73=_0x38b4c5,[_0x4846ef,_0x168310,_0x1b4045,_0x40b824]=_0xf835e5[_0x559f73(0x10c)]()[_0x559f73(0x116)](/\s+/),_0x142e18=parseInt(_0x4846ef),_0x5e84c7=parseInt(_0x168310),_0x3ca791=parseInt(_0x1b4045||'1'),_0x210fbb=parseInt(_0x40b824||'1');if(Number['isNaN'](_0x142e18)||Number[_0x559f73(0x132)](_0x5e84c7)||Number[_0x559f73(0x132)](_0x3ca791)||Number['isNaN'](_0x210fbb))return;const _0x241f1e=_0x142e18*gridCellSize,_0xedc73=_0x5e84c7*gridCellSize;for(let _0x3d1c6e=0x0;_0x3d1c6e<_0x3ca791;_0x3d1c6e++){for(let _0x2018ba=0x0;_0x2018ba<_0x210fbb;_0x2018ba++){const _0xa6feb8=_0x241f1e+_0x3d1c6e*gridCellSize,_0x127a65=_0xedc73+_0x2018ba*gridCellSize;_0xa6feb8>=0x0&&_0x127a65>=0x0&&_0xa6feb8<=WORLD_W-gridCellSize&&_0x127a65<=WORLD_H-gridCellSize&&markers['push']([_0xa6feb8,_0x127a65]);}}}),renderAll();}const upBtn=document['getElementById'](_0xb6c6f2(0xcd)),downBtn=document['getElementById'](_0xb6c6f2(0x101)),leftBtn=document[_0xb6c6f2(0x13c)](_0xb6c6f2(0xd1)),rightBtn=document['getElementById'](_0xb6c6f2(0x111)),zoomInBtn=document['getElementById'](_0xb6c6f2(0x149)),zoomOutBtn=document['getElementById'](_0xb6c6f2(0x123)),moveSpeed=0x32,zoomFactorBtn=1.2;function moveCamera(_0x42af24,_0x43aaac){camX+=_0x42af24/scale,camY+=_0x43aaac/scale,renderAll();}upBtn[_0xb6c6f2(0x135)](_0xb6c6f2(0x140),()=>moveCamera(0x0,-moveSpeed)),downBtn[_0xb6c6f2(0x135)]('click',()=>moveCamera(0x0,moveSpeed)),leftBtn['addEventListener'](_0xb6c6f2(0x140),()=>moveCamera(-moveSpeed,0x0)),rightBtn[_0xb6c6f2(0x135)](_0xb6c6f2(0x140),()=>moveCamera(moveSpeed,0x0)),zoomInBtn[_0xb6c6f2(0x135)]('click',()=>{const _0x553935=clamp(scale*zoomFactorBtn,MIN_SCALE,MAX_SCALE);scale=_0x553935,renderAll();}),zoomOutBtn[_0xb6c6f2(0x135)](_0xb6c6f2(0x140),()=>{const _0x25b200=clamp(scale/zoomFactorBtn,MIN_SCALE,MAX_SCALE);scale=_0x25b200,renderAll();}),coordsInput[_0xb6c6f2(0x135)](_0xb6c6f2(0x144),parseCoords);async function adminApplyPixels(_0x3c677e){const _0x420406=_0xb6c6f2;if(!auth[_0x420406(0xf5)]||auth[_0x420406(0xf5)]['email']!==_0x420406(0x139))return alert(_0x420406(0xf8));parseCoords();let _0x33850f=0x0;for(const [_0x18d513,_0x8d55e8]of markers){const _0x7bd22a=doc(db,_0x420406(0xe5),_0x18d513+'-'+_0x8d55e8);_0x3c677e==='add'?(await setDoc(_0x7bd22a,{'x':_0x18d513,'y':_0x8d55e8,'color':currentColor}),_0x33850f++):(await deleteDoc(_0x7bd22a),_0x33850f++);}alert((_0x3c677e===_0x420406(0xe7)?_0x420406(0x15f):_0x420406(0x11f))+_0x420406(0x10a)+_0x33850f);}addPixelBtn['addEventListener'](_0xb6c6f2(0x140),()=>adminApplyPixels('add')),removePixelBtn[_0xb6c6f2(0x135)](_0xb6c6f2(0x140),()=>adminApplyPixels('remove')),clearAllPixelsBtn[_0xb6c6f2(0x135)](_0xb6c6f2(0x140),async()=>{const _0x2e1b03=_0xb6c6f2;if(!auth[_0x2e1b03(0xf5)])return alert(_0x2e1b03(0xf8));const _0x25d457=await getDocs(collection(db,_0x2e1b03(0xe5)));_0x25d457[_0x2e1b03(0xda)](_0x5593bd=>deleteDoc(_0x5593bd[_0x2e1b03(0x12a)]));}),banUserBtn[_0xb6c6f2(0x135)]('click',()=>{const _0x273e60=_0xb6c6f2;if(!auth[_0x273e60(0xf5)])return alert('Только\x20админ!');const _0x1e21e2=prompt(_0x273e60(0xfb));if(!_0x1e21e2)return;const _0x42fde1=ref(rtdb,_0x273e60(0x121)+_0x1e21e2);remove(_0x42fde1)[_0x273e60(0xfd)](()=>alert(_0x273e60(0xe9)))['catch'](_0x6156af=>console[_0x273e60(0x146)](_0x6156af));});import{onDisconnect,set}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js';function trackOnlinePlayer(){const _0xa7be84=_0xb6c6f2;if(!auth[_0xa7be84(0xf5)])return;const _0x20738f=auth[_0xa7be84(0xf5)][_0xa7be84(0x163)],_0x11cb5d=ref(rtdb,_0xa7be84(0x121)+_0x20738f);set(_0x11cb5d,{'email':auth[_0xa7be84(0xf5)][_0xa7be84(0x112)],'lastSeen':Date[_0xa7be84(0xe1)]()}),onDisconnect(_0x11cb5d)[_0xa7be84(0x126)]();}onAuthStateChanged(auth,_0x16240a=>{_0x16240a&&trackOnlinePlayer();});function updateOnlinePlayers(){const _0x3c461b=_0xb6c6f2,_0x4a536f=ref(rtdb,_0x3c461b(0x121));onValue(_0x4a536f,_0x4912dc=>{const _0x4c7340=_0x3c461b,_0x31d25c=_0x4912dc[_0x4c7340(0xd0)](),_0x272d9d=_0x31d25c?Object['keys'](_0x31d25c)['length']:0x0;onlinePlayersEl['innerText']=_0x4c7340(0x157)+_0x272d9d;});}updateOnlinePlayers();
