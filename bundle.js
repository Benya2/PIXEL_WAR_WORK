const _0x5854a8=_0x43c5;(function(_0x1213aa,_0x4a984b){const _0xec4072=_0x43c5,_0x99cc5d=_0x1213aa();while(!![]){try{const _0x5890a9=-parseInt(_0xec4072(0x1b2))/0x1*(-parseInt(_0xec4072(0x133))/0x2)+-parseInt(_0xec4072(0x141))/0x3*(-parseInt(_0xec4072(0x195))/0x4)+-parseInt(_0xec4072(0x13b))/0x5+-parseInt(_0xec4072(0x1bb))/0x6*(parseInt(_0xec4072(0x146))/0x7)+-parseInt(_0xec4072(0x11c))/0x8+-parseInt(_0xec4072(0x14e))/0x9+parseInt(_0xec4072(0x163))/0xa*(parseInt(_0xec4072(0x1b0))/0xb);if(_0x5890a9===_0x4a984b)break;else _0x99cc5d['push'](_0x99cc5d['shift']());}catch(_0xe60dd8){_0x99cc5d['push'](_0x99cc5d['shift']());}}}(_0xf556,0xdc273));import{initializeApp}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js';import{getFirestore,collection,doc,setDoc,onSnapshot,deleteDoc,getDocs}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js';import{getDatabase,ref,remove}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js';import{getAuth,onAuthStateChanged,signInWithEmailAndPassword,createUserWithEmailAndPassword,signOut}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-auth.js';const firebaseConfig={'apiKey':_0x5854a8(0x147),'authDomain':_0x5854a8(0x144),'projectId':'pixellox','storageBucket':_0x5854a8(0x139),'messagingSenderId':'461991610382','appId':_0x5854a8(0x1bd)},app=initializeApp(firebaseConfig),db=getFirestore(app),rtdb=getDatabase(app),auth=getAuth(app),coordsDisplayEl=document[_0x5854a8(0x174)](_0x5854a8(0x125)),colorsChoiceEl=document[_0x5854a8(0x174)](_0x5854a8(0x130)),paletteToggle=document[_0x5854a8(0x174)](_0x5854a8(0x179)),game=document[_0x5854a8(0x174)](_0x5854a8(0x1ad)),ctx=game[_0x5854a8(0x155)]('2d'),cursor=document[_0x5854a8(0x174)]('cursor'),reloadTimerEl=document[_0x5854a8(0x174)](_0x5854a8(0x12a)),adminPanel=document[_0x5854a8(0x174)](_0x5854a8(0x13c)),clearAllPixelsBtn=document[_0x5854a8(0x174)]('clearAllPixels'),banUserBtn=document['getElementById'](_0x5854a8(0x19d)),authButton=document[_0x5854a8(0x174)](_0x5854a8(0x1a5)),coordsInput=document['getElementById'](_0x5854a8(0x1a6)),addPixelBtn=document[_0x5854a8(0x174)](_0x5854a8(0x154)),removePixelBtn=document[_0x5854a8(0x174)](_0x5854a8(0x14c)),teleportInput=document[_0x5854a8(0x174)](_0x5854a8(0x1a9)),teleportBtn=document[_0x5854a8(0x174)](_0x5854a8(0x198));teleportBtn[_0x5854a8(0x159)](_0x5854a8(0x13d),()=>{const _0x2de2c4=_0x5854a8;if(!auth[_0x2de2c4(0x160)]||auth[_0x2de2c4(0x160)][_0x2de2c4(0x161)]!==_0x2de2c4(0x1a3))return alert(_0x2de2c4(0x1a1));const _0x518529=teleportInput[_0x2de2c4(0x134)]['trim']();if(!_0x518529)return;const [_0x3f1877,_0xba0e8]=_0x518529['split'](/\s+/),_0x3ad44f=parseInt(_0x3f1877),_0x41e3b1=parseInt(_0xba0e8);if(Number[_0x2de2c4(0x132)](_0x3ad44f)||Number[_0x2de2c4(0x132)](_0x41e3b1))return alert(_0x2de2c4(0x1be));const _0x5617a9=_0x3ad44f*gridCellSize,_0x28f829=_0x41e3b1*gridCellSize;camX=_0x5617a9-game[_0x2de2c4(0x143)]/0x2/scale,camY=_0x28f829-game[_0x2de2c4(0x136)]/0x2/scale,renderAll();}),ctx[_0x5854a8(0x1b7)]=![];const gridCellSize=0xa;game['width']=0x4b0,game[_0x5854a8(0x136)]=0x258;function _0x43c5(_0x2a45fb,_0x22f442){const _0xf556db=_0xf556();return _0x43c5=function(_0x43c5d7,_0x200d7b){_0x43c5d7=_0x43c5d7-0x11c;let _0x2c7628=_0xf556db[_0x43c5d7];return _0x2c7628;},_0x43c5(_0x2a45fb,_0x22f442);}let currentColor=_0x5854a8(0x181),canPlace=!![];const reloadTime=0x5,colors=[_0x5854a8(0x120),_0x5854a8(0x13a),_0x5854a8(0x164),'rgb(245,\x20223,\x20176)',_0x5854a8(0x11d),'rgb(255,\x20248,\x20137)',_0x5854a8(0x131),_0x5854a8(0x189),_0x5854a8(0x1b9),_0x5854a8(0x127),_0x5854a8(0x182),_0x5854a8(0x1ae),_0x5854a8(0x149),'rgb(104,\x20131,\x2056)',_0x5854a8(0x165),_0x5854a8(0x1ab),_0x5854a8(0x17f),'rgb(202,\x20227,\x20255)','rgb(255,\x20101,\x20101)',_0x5854a8(0x194),_0x5854a8(0x1a8),'rgb(0,\x20131,\x20199)',_0x5854a8(0x183),_0x5854a8(0x191),_0x5854a8(0x15d),'rgb(25,\x2025,\x20115)','rgb(229,\x20149,\x200)',_0x5854a8(0x19f),_0x5854a8(0x148),_0x5854a8(0x172)];colorsChoiceEl[_0x5854a8(0x1ac)]='',colors[_0x5854a8(0x15c)](_0x4ce927=>{const _0x3554e5=_0x5854a8,_0x2dce6e=document[_0x3554e5(0x121)](_0x3554e5(0x16f));_0x2dce6e['style'][_0x3554e5(0x1a4)]=_0x4ce927,_0x2dce6e['addEventListener']('click',()=>{const _0x2215dc=_0x3554e5;currentColor=_0x4ce927,document[_0x2215dc(0x19b)](_0x2215dc(0x1b6))[_0x2215dc(0x15c)](_0x13003d=>_0x13003d['classList'][_0x2215dc(0x19e)](_0x2215dc(0x169))),_0x2dce6e[_0x2215dc(0x1b8)][_0x2215dc(0x171)](_0x2215dc(0x169));}),colorsChoiceEl['appendChild'](_0x2dce6e);});const colorsChoice=document['getElementById'](_0x5854a8(0x130)),togglePalette=document[_0x5854a8(0x174)]('togglePalette');togglePalette[_0x5854a8(0x159)](_0x5854a8(0x13d),()=>{const _0x11c6b5=_0x5854a8;colorsChoice[_0x11c6b5(0x1b5)][_0x11c6b5(0x12b)]===_0x11c6b5(0x17c)?colorsChoice[_0x11c6b5(0x1b5)]['display']=_0x11c6b5(0x15b):colorsChoice[_0x11c6b5(0x1b5)][_0x11c6b5(0x12b)]=_0x11c6b5(0x17c);});const worldMap=new Image();worldMap[_0x5854a8(0x197)]=_0x5854a8(0x12f);const SCALE_TILE=0x28;let WORLD_W=0x4e20*SCALE_TILE,WORLD_H=0x4e20*SCALE_TILE,camX=0x0,camY=0x0,scale=0x1;const MIN_SCALE=0.005,MAX_SCALE=0x6;let isPanning=![],lastMouseX=0x0,lastMouseY=0x0;function clamp(_0x1cdc70,_0x2163ff,_0x31c6d1){const _0x25dab4=_0x5854a8;return Math[_0x25dab4(0x18e)](_0x2163ff,Math[_0x25dab4(0x175)](_0x31c6d1,_0x1cdc70));}function screenToWorld(_0x58cee6,_0x2b040e){const _0x5a7186=game['getBoundingClientRect'](),_0x321617=(_0x58cee6-_0x5a7186['left'])/scale+camX,_0x5e359c=(_0x2b040e-_0x5a7186['top'])/scale+camY;return[_0x321617,_0x5e359c];}function snapToGrid(_0x3bf674,_0x4657c7){const _0xcef3f5=_0x5854a8;return[Math[_0xcef3f5(0x1b4)](_0x3bf674/gridCellSize)*gridCellSize,Math[_0xcef3f5(0x1b4)](_0x4657c7/gridCellSize)*gridCellSize];}let hoverCellX=0x0,hoverCellY=0x0;const pixelsCache=new Map();let markers=[];function updateCoordsDisplay(){const _0x52f709=_0x5854a8;if(!coordsDisplayEl)return;const _0x256e83=Math[_0x52f709(0x1b4)](hoverCellX/gridCellSize),_0x4e6901=Math['floor'](hoverCellY/gridCellSize);coordsDisplayEl['textContent']=_0x52f709(0x18a)+_0x256e83+_0x52f709(0x1a7)+_0x4e6901;}const TILE_SIZE=0x3e8;let tiles=[];const offscreenCanvas=document[_0x5854a8(0x121)](_0x5854a8(0x185));offscreenCanvas[_0x5854a8(0x143)]=TILE_SIZE,offscreenCanvas[_0x5854a8(0x136)]=TILE_SIZE;const offCtx=offscreenCanvas[_0x5854a8(0x155)]('2d',{'willReadFrequently':!![]});offCtx[_0x5854a8(0x1b7)]=![],worldMap['onload']=()=>{const _0x41148d=_0x5854a8,_0x29c36a=worldMap['naturalWidth']||0x4e20,_0x3df81c=worldMap['naturalHeight']||0x4e20;WORLD_W=_0x29c36a*SCALE_TILE,WORLD_H=_0x3df81c*SCALE_TILE;const _0x2f5ede=Math[_0x41148d(0x13e)](_0x29c36a/TILE_SIZE),_0xfb3c5e=Math['ceil'](_0x3df81c/TILE_SIZE);tiles=[];for(let _0x154f6a=0x0;_0x154f6a<_0x2f5ede;_0x154f6a++){for(let _0x1e5151=0x0;_0x1e5151<_0xfb3c5e;_0x1e5151++){const _0x4ec8e5=_0x154f6a*TILE_SIZE,_0x47f155=_0x1e5151*TILE_SIZE,_0x36fb89=Math[_0x41148d(0x175)](TILE_SIZE,_0x29c36a-_0x4ec8e5),_0x5e1dd4=Math[_0x41148d(0x175)](TILE_SIZE,_0x3df81c-_0x47f155);offCtx[_0x41148d(0x1af)](0x0,0x0,TILE_SIZE,TILE_SIZE),offCtx[_0x41148d(0x162)](worldMap,_0x4ec8e5,_0x47f155,_0x36fb89,_0x5e1dd4,0x0,0x0,_0x36fb89,_0x5e1dd4);const _0x4b90d6=new Image();_0x4b90d6['src']=offscreenCanvas[_0x41148d(0x188)](_0x41148d(0x12c));const _0x18ad47=_0x4ec8e5*SCALE_TILE,_0x20b524=_0x47f155*SCALE_TILE,_0x3807f3=_0x36fb89*SCALE_TILE,_0x20486c=_0x5e1dd4*SCALE_TILE;tiles['push']({'img':_0x4b90d6,'dx':_0x18ad47,'dy':_0x20b524,'dw':_0x3807f3,'dh':_0x20486c});}}renderAll();};function renderAll(){const _0x2438d4=_0x5854a8;ctx[_0x2438d4(0x1b7)]=![],ctx[_0x2438d4(0x14a)](0x1,0x0,0x0,0x1,0x0,0x0),ctx[_0x2438d4(0x1af)](0x0,0x0,game[_0x2438d4(0x143)],game[_0x2438d4(0x136)]),ctx[_0x2438d4(0x14a)](scale,0x0,0x0,scale,-camX*scale,-camY*scale);const _0x2ff6b8=camX,_0x1c0de1=camY,_0x10999f=camX+game[_0x2438d4(0x143)]/scale,_0x28a4a0=camY+game[_0x2438d4(0x136)]/scale;for(const _0x48432f of tiles){if(_0x48432f['dx']+_0x48432f['dw']<_0x2ff6b8||_0x48432f['dx']>_0x10999f||_0x48432f['dy']+_0x48432f['dh']<_0x1c0de1||_0x48432f['dy']>_0x28a4a0)continue;_0x48432f['img'][_0x2438d4(0x166)]&&_0x48432f[_0x2438d4(0x14b)][_0x2438d4(0x135)]?ctx[_0x2438d4(0x162)](_0x48432f[_0x2438d4(0x14b)],_0x48432f['dx'],_0x48432f['dy'],_0x48432f['dw'],_0x48432f['dh']):(ctx[_0x2438d4(0x1b3)]=_0x2438d4(0x12e),ctx['fillRect'](_0x48432f['dx'],_0x48432f['dy'],_0x48432f['dw'],_0x48432f['dh']));}ctx[_0x2438d4(0x167)](),ctx[_0x2438d4(0x15f)]=_0x2438d4(0x16d);let _0xd2e149=Math[_0x2438d4(0x1b4)](_0x2ff6b8/gridCellSize)*gridCellSize;for(let _0x5212ff=_0xd2e149;_0x5212ff<=_0x10999f;_0x5212ff+=gridCellSize){ctx['moveTo'](_0x5212ff,_0x1c0de1),ctx[_0x2438d4(0x170)](_0x5212ff,_0x28a4a0);}let _0x4d27e5=Math[_0x2438d4(0x1b4)](_0x1c0de1/gridCellSize)*gridCellSize;for(let _0x4578e4=_0x4d27e5;_0x4578e4<=_0x28a4a0;_0x4578e4+=gridCellSize){ctx[_0x2438d4(0x151)](_0x2ff6b8,_0x4578e4),ctx[_0x2438d4(0x170)](_0x10999f,_0x4578e4);}ctx['stroke'](),pixelsCache[_0x2438d4(0x15c)](_0x2f32e0=>{const _0x47df2f=_0x2438d4;_0x2f32e0[_0x47df2f(0x17b)]!==_0x47df2f(0x19c)&&(ctx[_0x47df2f(0x1b3)]=_0x2f32e0[_0x47df2f(0x17b)],ctx[_0x47df2f(0x16e)](_0x2f32e0['x'],_0x2f32e0['y'],gridCellSize,gridCellSize));}),ctx[_0x2438d4(0x1b3)]=_0x2438d4(0x184);for(const [_0x5ceb0f,_0x57d346]of markers){ctx[_0x2438d4(0x16e)](_0x5ceb0f,_0x57d346,gridCellSize,gridCellSize);}ctx[_0x2438d4(0x1b3)]=_0x2438d4(0x16b),ctx['fillRect'](hoverCellX,hoverCellY,gridCellSize,gridCellSize),ctx[_0x2438d4(0x14a)](0x1,0x0,0x0,0x1,0x0,0x0);}onSnapshot(collection(db,'pixels'),_0x50ae3b=>{const _0x3fe72a=_0x5854a8;pixelsCache[_0x3fe72a(0x1aa)](),_0x50ae3b[_0x3fe72a(0x15c)](_0x26d4e8=>{const _0x51dc41=_0x3fe72a,_0x42f7d1=_0x26d4e8[_0x51dc41(0x145)]();pixelsCache[_0x51dc41(0x128)](_0x42f7d1['x']+'-'+_0x42f7d1['y'],_0x42f7d1);}),renderAll();}),game[_0x5854a8(0x159)](_0x5854a8(0x18d),_0x499aa9=>{const _0x4e58d3=_0x5854a8;(_0x499aa9[_0x4e58d3(0x156)]===0x1||_0x499aa9[_0x4e58d3(0x156)]===0x2||_0x499aa9[_0x4e58d3(0x18f)]||_0x499aa9['ctrlKey']||_0x499aa9[_0x4e58d3(0x137)]||_0x499aa9['altKey'])&&(isPanning=!![],lastMouseX=_0x499aa9[_0x4e58d3(0x158)],lastMouseY=_0x499aa9['clientY'],_0x499aa9[_0x4e58d3(0x17e)]());}),window[_0x5854a8(0x159)](_0x5854a8(0x19a),()=>{isPanning=![];}),game[_0x5854a8(0x159)](_0x5854a8(0x142),_0x8f8f9c=>_0x8f8f9c['preventDefault']()),game['addEventListener'](_0x5854a8(0x176),_0x2ef6f6=>{const _0x21a5bf=_0x5854a8;if(isPanning){const _0x1f8e0b=_0x2ef6f6[_0x21a5bf(0x158)]-lastMouseX,_0x45d263=_0x2ef6f6[_0x21a5bf(0x180)]-lastMouseY;camX-=_0x1f8e0b/scale,camY-=_0x45d263/scale,lastMouseX=_0x2ef6f6[_0x21a5bf(0x158)],lastMouseY=_0x2ef6f6[_0x21a5bf(0x180)],renderAll();}const [_0x55599e,_0x3f4796]=screenToWorld(_0x2ef6f6['clientX'],_0x2ef6f6['clientY']);[hoverCellX,hoverCellY]=snapToGrid(_0x55599e,_0x3f4796),updateCoordsDisplay(),renderAll();}),game['addEventListener'](_0x5854a8(0x11f),_0x32fd18=>{const _0x45ef3e=_0x5854a8;_0x32fd18['preventDefault']();const _0x4eb287=1.1,[_0x532378,_0xe85187]=screenToWorld(_0x32fd18['clientX'],_0x32fd18[_0x45ef3e(0x180)]),_0x979e05=_0x32fd18[_0x45ef3e(0x129)]<0x0?0x1:-0x1,_0x12a21f=clamp(scale*(_0x979e05>0x0?_0x4eb287:0x1/_0x4eb287),MIN_SCALE,MAX_SCALE);if(_0x12a21f===scale)return;scale=_0x12a21f;const _0xff3e=game['getBoundingClientRect']();camX=_0x532378-(_0x32fd18[_0x45ef3e(0x158)]-_0xff3e[_0x45ef3e(0x186)])/scale,camY=_0xe85187-(_0x32fd18[_0x45ef3e(0x180)]-_0xff3e[_0x45ef3e(0x1bc)])/scale;const [_0x4c3e89,_0x496fc4]=screenToWorld(_0x32fd18[_0x45ef3e(0x158)],_0x32fd18['clientY']);[hoverCellX,hoverCellY]=snapToGrid(_0x4c3e89,_0x496fc4),updateCoordsDisplay(),renderAll();},{'passive':![]});async function placePixelWithHover(){const _0x492071=_0x5854a8;if(!auth[_0x492071(0x160)])return alert(_0x492071(0x13f));if(!canPlace)return;canPlace=![];const _0x1e5a3e=hoverCellX,_0x419353=hoverCellY,_0x3b79d6=doc(db,'pixels',_0x1e5a3e+'-'+_0x419353);try{if(currentColor==='#FFFFFF')await deleteDoc(_0x3b79d6);else await setDoc(_0x3b79d6,{'x':_0x1e5a3e,'y':_0x419353,'color':currentColor});}catch(_0x1c956a){console[_0x492071(0x150)](_0x1c956a);}startReload();}game[_0x5854a8(0x159)]('click',_0x1c5fc5=>{if(isPanning||_0x1c5fc5['button']!==0x0)return;placePixelWithHover();});if(cursor)cursor[_0x5854a8(0x1b5)][_0x5854a8(0x12b)]='none';function startReload(){const _0x2bb88d=_0x5854a8;let _0x4fb47f=reloadTime;reloadTimerEl['innerText']=_0x2bb88d(0x11e)+_0x4fb47f+_0x2bb88d(0x187);const _0x3a5635=setInterval(()=>{const _0x5aa129=_0x2bb88d;_0x4fb47f--;if(_0x4fb47f<=0x0)clearInterval(_0x3a5635),canPlace=!![],reloadTimerEl[_0x5aa129(0x177)]=_0x5aa129(0x140);else reloadTimerEl[_0x5aa129(0x177)]=_0x5aa129(0x11e)+_0x4fb47f+_0x5aa129(0x187);},0x3e8);}authButton[_0x5854a8(0x159)]('click',async()=>{const _0xa426e3=_0x5854a8;if(auth[_0xa426e3(0x160)]){await signOut(auth);return;}const _0x36b17d=prompt('Enter\x201\x20to\x20sign\x20in,\x20or\x202\x20to\x20create\x20a\x20new\x20account:');if(!_0x36b17d||_0x36b17d!=='1'&&_0x36b17d!=='2')return;const _0x6da84=prompt('Email:'),_0x276080=prompt(_0xa426e3(0x173));if(!_0x6da84||!_0x276080)return;try{_0x36b17d==='1'?(await signInWithEmailAndPassword(auth,_0x6da84,_0x276080),alert(_0xa426e3(0x15e))):(await createUserWithEmailAndPassword(auth,_0x6da84,_0x276080),alert(_0xa426e3(0x1a2)));}catch(_0x307878){alert(_0x307878[_0xa426e3(0x192)]);}}),onAuthStateChanged(auth,_0x1f44b1=>{const _0x44d463=_0x5854a8;_0x1f44b1?(authButton[_0x44d463(0x168)]=_0x44d463(0x18b),_0x1f44b1[_0x44d463(0x161)]===_0x44d463(0x1a3)?adminPanel[_0x44d463(0x1b5)][_0x44d463(0x12b)]=_0x44d463(0x123):adminPanel['style']['display']=_0x44d463(0x17c)):(authButton[_0x44d463(0x168)]=_0x44d463(0x17a),adminPanel['style'][_0x44d463(0x12b)]=_0x44d463(0x17c));});function parseCoords(){const _0x4d55d2=_0x5854a8;markers=[];const _0x1afea8=coordsInput[_0x4d55d2(0x134)][_0x4d55d2(0x12d)]();if(!_0x1afea8){renderAll();return;}_0x1afea8[_0x4d55d2(0x199)](',')['forEach'](_0x4e0134=>{const _0x485a9b=_0x4d55d2,[_0xadc152,_0xc5f75d,_0x17936c,_0x6da54f]=_0x4e0134[_0x485a9b(0x12d)]()[_0x485a9b(0x199)](/\s+/),_0x2402e5=parseInt(_0xadc152),_0xaa3d32=parseInt(_0xc5f75d),_0x5e06ec=parseInt(_0x17936c||'1'),_0x344a7f=parseInt(_0x6da54f||'1');if(Number[_0x485a9b(0x132)](_0x2402e5)||Number['isNaN'](_0xaa3d32)||Number[_0x485a9b(0x132)](_0x5e06ec)||Number[_0x485a9b(0x132)](_0x344a7f))return;const _0x7d9f14=_0x2402e5*gridCellSize,_0x5110a7=_0xaa3d32*gridCellSize;for(let _0x1b9bb3=0x0;_0x1b9bb3<_0x5e06ec;_0x1b9bb3++){for(let _0x25c1e4=0x0;_0x25c1e4<_0x344a7f;_0x25c1e4++){const _0x5be24b=_0x7d9f14+_0x1b9bb3*gridCellSize,_0x25ab28=_0x5110a7+_0x25c1e4*gridCellSize;_0x5be24b>=0x0&&_0x25ab28>=0x0&&_0x5be24b<=WORLD_W-gridCellSize&&_0x25ab28<=WORLD_H-gridCellSize&&markers[_0x485a9b(0x1a0)]([_0x5be24b,_0x25ab28]);}}}),renderAll();}coordsInput[_0x5854a8(0x159)](_0x5854a8(0x196),parseCoords);async function adminApplyPixels(_0x194c0b){const _0x2ecee=_0x5854a8;if(!auth[_0x2ecee(0x160)]||auth['currentUser'][_0x2ecee(0x161)]!==_0x2ecee(0x1a3))return alert(_0x2ecee(0x1a1));parseCoords();let _0x5e3c70=0x0;for(const [_0x666ae6,_0x35d769]of markers){const _0x58ef21=doc(db,_0x2ecee(0x178),_0x666ae6+'-'+_0x35d769);_0x194c0b===_0x2ecee(0x171)?(await setDoc(_0x58ef21,{'x':_0x666ae6,'y':_0x35d769,'color':currentColor}),_0x5e3c70++):(await deleteDoc(_0x58ef21),_0x5e3c70++);}alert((_0x194c0b==='add'?'Добавлено':_0x2ecee(0x126))+_0x2ecee(0x16c)+_0x5e3c70);}addPixelBtn[_0x5854a8(0x159)](_0x5854a8(0x13d),()=>adminApplyPixels(_0x5854a8(0x171))),removePixelBtn['addEventListener'](_0x5854a8(0x13d),()=>adminApplyPixels('remove')),clearAllPixelsBtn[_0x5854a8(0x159)](_0x5854a8(0x13d),async()=>{const _0x5b5f98=_0x5854a8;if(!auth[_0x5b5f98(0x160)])return alert(_0x5b5f98(0x1a1));const _0x3615d2=await getDocs(collection(db,_0x5b5f98(0x178)));_0x3615d2['forEach'](_0x481c00=>deleteDoc(_0x481c00[_0x5b5f98(0x16a)]));}),banUserBtn[_0x5854a8(0x159)]('click',()=>{const _0x387fba=_0x5854a8;if(!auth['currentUser'])return alert(_0x387fba(0x1a1));const _0x5b64b0=prompt(_0x387fba(0x157));if(!_0x5b64b0)return;const _0x101005=ref(rtdb,'users/'+_0x5b64b0);remove(_0x101005)[_0x387fba(0x1b1)](()=>alert(_0x387fba(0x18c)))[_0x387fba(0x14f)](_0x4c2d2c=>console[_0x387fba(0x150)](_0x4c2d2c));});import{onDisconnect,set}from'https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js';function trackOnlinePlayer(){const _0x51d5b8=_0x5854a8;if(!auth[_0x51d5b8(0x160)])return;const _0x317a5d=auth['currentUser'][_0x51d5b8(0x14d)],_0x57511e=ref(rtdb,_0x51d5b8(0x15a)+_0x317a5d);set(_0x57511e,{'email':auth[_0x51d5b8(0x160)]['email'],'lastSeen':Date[_0x51d5b8(0x122)]()}),onDisconnect(_0x57511e)['remove']();}onAuthStateChanged(auth,_0x183c00=>{_0x183c00&&trackOnlinePlayer();});function updateOnlinePlayers(){const _0x4ba807=_0x5854a8,_0x43c9f8=ref(rtdb,_0x4ba807(0x15a));onValue(_0x43c9f8,_0x3849aa=>{const _0x3ad564=_0x4ba807,_0x521667=_0x3849aa[_0x3ad564(0x138)](),_0x4c9a0a=_0x521667?Object[_0x3ad564(0x1ba)](_0x521667)[_0x3ad564(0x17d)]:0x0;onlinePlayersEl[_0x3ad564(0x177)]='Online\x20players:\x20'+_0x4c9a0a;});}updateOnlinePlayers();let lastTouchX=0x0,lastTouchY=0x0,isTouchPanning=![],lastTouchDist=0x0;function getTouchDist(_0x1b51ff){const _0x417506=_0x5854a8;if(_0x1b51ff[_0x417506(0x17d)]<0x2)return 0x0;const _0x401275=_0x1b51ff[0x0]['clientX']-_0x1b51ff[0x1][_0x417506(0x158)],_0x22d562=_0x1b51ff[0x0][_0x417506(0x180)]-_0x1b51ff[0x1]['clientY'];return Math[_0x417506(0x153)](_0x401275*_0x401275+_0x22d562*_0x22d562);}game[_0x5854a8(0x159)](_0x5854a8(0x124),_0x105b57=>{const _0x541c18=_0x5854a8;if(_0x105b57[_0x541c18(0x193)][_0x541c18(0x17d)]===0x1)isTouchPanning=!![],lastTouchX=_0x105b57['touches'][0x0]['clientX'],lastTouchY=_0x105b57[_0x541c18(0x193)][0x0][_0x541c18(0x180)];else _0x105b57['touches'][_0x541c18(0x17d)]===0x2&&(lastTouchDist=getTouchDist(_0x105b57[_0x541c18(0x193)]));}),game[_0x5854a8(0x159)](_0x5854a8(0x190),_0x1ebbc4=>{const _0x151fe6=_0x5854a8;_0x1ebbc4[_0x151fe6(0x17e)]();if(_0x1ebbc4[_0x151fe6(0x193)][_0x151fe6(0x17d)]===0x1&&isTouchPanning){const _0x3f4e4a=_0x1ebbc4['touches'][0x0],_0x171e1d=_0x3f4e4a['clientX']-lastTouchX,_0x2a09d0=_0x3f4e4a[_0x151fe6(0x180)]-lastTouchY;camX-=_0x171e1d/scale,camY-=_0x2a09d0/scale,lastTouchX=_0x3f4e4a[_0x151fe6(0x158)],lastTouchY=_0x3f4e4a[_0x151fe6(0x180)],renderAll();}else{if(_0x1ebbc4[_0x151fe6(0x193)][_0x151fe6(0x17d)]===0x2){const _0x2365cd=getTouchDist(_0x1ebbc4[_0x151fe6(0x193)]);if(lastTouchDist>0x0){const _0x784fc3=_0x2365cd/lastTouchDist,_0xa4983a=game['getBoundingClientRect'](),_0x449a59=(_0x1ebbc4[_0x151fe6(0x193)][0x0][_0x151fe6(0x158)]+_0x1ebbc4['touches'][0x1][_0x151fe6(0x158)])/0x2,_0x4135c4=(_0x1ebbc4[_0x151fe6(0x193)][0x0][_0x151fe6(0x180)]+_0x1ebbc4[_0x151fe6(0x193)][0x1]['clientY'])/0x2,[_0x560db6,_0xfbce90]=screenToWorld(_0x449a59,_0x4135c4);scale=clamp(scale*_0x784fc3,MIN_SCALE,MAX_SCALE),camX=_0x560db6-(_0x449a59-_0xa4983a[_0x151fe6(0x186)])/scale,camY=_0xfbce90-(_0x4135c4-_0xa4983a[_0x151fe6(0x1bc)])/scale;const [_0x4a493e,_0x1b39a4]=screenToWorld(_0x449a59,_0x4135c4);[hoverCellX,hoverCellY]=snapToGrid(_0x4a493e,_0x1b39a4),updateCoordsDisplay(),renderAll();}lastTouchDist=_0x2365cd;}}},{'passive':![]}),game[_0x5854a8(0x159)](_0x5854a8(0x152),_0x50a9e0=>{const _0x1eccdb=_0x5854a8;_0x50a9e0[_0x1eccdb(0x193)][_0x1eccdb(0x17d)]===0x0&&(isTouchPanning=![],lastTouchDist=0x0);});function _0xf556(){const _0x18b0fd=['fillStyle','floor','style','#colorsChoice\x20div','imageSmoothingEnabled','classList','rgb(78,\x2078,\x2078)','keys','1387470TylElv','top','1:461991610382:web:2a5ae293dde4a754c2d45f','Введите\x20корректные\x20координаты\x20X\x20Y','12445720JRuxmd','rgb(196,\x20196,\x20196)','Reload:\x20','wheel','rgb(255,\x20255,\x20255)','createElement','now','block','touchstart','coordsDisplay','Удалено','rgb(148,\x20224,\x2068)','set','deltaY','reloadTimer','display','image/png','trim','#eef6ff','world.png','colorsChoice','rgb(136,\x20136,\x20136)','isNaN','4cToaoW','value','naturalWidth','height','metaKey','val','pixellox.firebasestorage.app','rgb(96,\x2064,\x2040)','109325iWFScE','adminPanel','click','ceil','Login\x20to\x20draw!','Ready!','1762461iqXCzN','contextmenu','width','pixellox.firebaseapp.com','data','14meQSEL','AIzaSyCwy4jVn9JIwXuIXVycYAv9EdPGPkgIJvA','rgb(160,\x20106,\x2066)','rgb(244,\x20179,\x20174)','setTransform','img','removePixelBtn','uid','3718494UsAmbv','catch','error','moveTo','touchend','sqrt','addPixelBtn','getContext','button','Введите\x20UserID\x20для\x20бана:','clientX','addEventListener','users/','grid','forEach','rgb(254,\x20164,\x2096)','Come\x20in!','strokeStyle','currentUser','email','drawImage','250EMHmUe','rgb(228,\x20228,\x20228)','rgb(255,\x20167,\x20209)','complete','beginPath','textContent','selected','ref','rgba(0,0,0,0.12)','\x20пикселей:\x20','#ccc','fillRect','div','lineTo','add','rgb(130,\x200,\x20128)','Password:','getElementById','min','mousemove','innerText','pixels','paletteToggle','Log\x20In','color','none','length','preventDefault','rgb(255,\x2084,\x20178)','clientY','#000000','rgb(0,\x200,\x200)','rgb(154,\x200,\x200)','rgba(255,0,0,0.5)','canvas','left','\x20sec','toDataURL','rgb(229,\x20217,\x200)','X:\x20','Log\x20Out','Пользователь\x20забанен!','mousedown','max','shiftKey','touchmove','rgb(0,\x200,\x20234)','message','touches','rgb(0,\x20211,\x20221)','4cAjMjn','input','src','teleportBtn','split','mouseup','querySelectorAll','#FFFFFF','banUser','remove','rgb(207,\x20110,\x20228)','push','Только\x20админ!','Account\x20created!','logo100153@gmail.com','backgroundColor','authButton','coordsInput','\x20\x20Y:\x20','rgb(229,\x200,\x200)','teleportInput','clear','rgb(0,\x20101,\x2019)','innerHTML','game','rgb(2,\x20190,\x201)','clearRect','614196JRNSHd','then','685798ctIPcx'];_0xf556=function(){return _0x18b0fd;};return _0xf556();}
